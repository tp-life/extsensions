LavaPack.loadBundle([[3248,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i,o=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function c(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,(function(e){var t=a[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(e,t){var r,o,a,u,h,d=n,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof i&&(p=i.call(t,e,p)),typeof p){case"string":return c(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(n+=s,h=[],"[object Array]"===Object.prototype.toString.apply(p)){for(u=p.length,r=0;r<u;r+=1)h[r]=l(r,p)||"null";return a=0===h.length?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+d+"]":"["+h.join(",")+"]",n=d,a}if(i&&"object"==typeof i)for(u=i.length,r=0;r<u;r+=1)"string"==typeof(o=i[r])&&(a=l(o,p))&&h.push(c(o)+(n?": ":":")+a);else for(o in p)Object.prototype.hasOwnProperty.call(p,o)&&(a=l(o,p))&&h.push(c(o)+(n?": ":":")+a);return a=0===h.length?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+d+"}":"{"+h.join(",")+"}",n=d,a}}t.exports=function(e,t,r){var o;if(n="",s="","number"==typeof r)for(o=0;o<r;o+=1)s+=" ";else"string"==typeof r&&(s=r);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return l("",{"":e})}}}},{package:"lavamoat>json-stable-stringify>jsonify",file:"node_modules/jsonify/lib/stringify.js"}],[33,{"../../../../shared/constants/app":3946,"../../../../shared/constants/network":3954,"../../../../shared/constants/transaction":3964,"../../../../shared/modules/random-id":3987,"../../../../shared/modules/transaction.utils":3993,"../../metamask-controller":81,"./lib/tx-state-history-helpers":29,"./lib/util":30,"@metamask/obs-store":1351,"@metamask/safe-event-emitter":1415,lodash:3442,loglevel:3454},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ERROR_SUBMITTING=void 0;var n=g(e("@metamask/safe-event-emitter")),s=e("@metamask/obs-store"),i=g(e("loglevel")),o=e("lodash"),a=g(e("../../../../shared/modules/random-id")),c=e("../../../../shared/constants/transaction"),l=e("../../metamask-controller"),u=e("../../../../shared/modules/transaction.utils"),h=e("../../../../shared/constants/app"),d=e("../../../../shared/constants/network"),p=e("./lib/tx-state-history-helpers"),f=e("./lib/util");function g(e){return e&&e.__esModule?e:{default:e}}const m="There was an error when resubmitting this transaction.";r.ERROR_SUBMITTING=m;class y extends n.default{constructor({initState:e,txHistoryLimit:t,getNetworkId:r,getNetworkStatus:n,getCurrentChainId:i}){super(),this.store=new s.ObservableStore({transactions:{},...e}),this.txHistoryLimit=t,this.getNetworkId=r,this.getNetworkStatus=n,this.getCurrentChainId=i}generateTxMeta(e={}){var t;const r=this.getNetworkId(),n=this.getNetworkStatus(),s=this.getCurrentChainId();if(n!==d.NetworkStatus.Available)throw new Error("MetaMask is having trouble connecting to the network");let i=null;return e.txParams&&"string"==typeof e.origin&&e.origin!==h.ORIGIN_METAMASK&&(void 0!==e.txParams.gasPrice?i={gasPrice:e.txParams.gasPrice}:void 0===e.txParams.maxFeePerGas&&void 0===e.txParams.maxPriorityFeePerGas||(i={maxPriorityFeePerGas:e.txParams.maxPriorityFeePerGas,maxFeePerGas:e.txParams.maxFeePerGas}),void 0!==e.txParams.gas&&(i={...i,gas:e.txParams.gas})),{id:(0,a.default)(),time:(new Date).getTime(),status:c.TransactionStatus.unapproved,metamaskNetworkId:r,originalGasEstimate:null===(t=e.txParams)||void 0===t?void 0:t.gas,userEditedGasLimit:!1,chainId:s,loadingDefaults:!0,dappSuggestedGasFees:i,sendFlowHistory:[],...e}}getUnapprovedTxList(){const e=this.getCurrentChainId(),t=this.getNetworkId();return(0,o.pickBy)(this.store.getState().transactions,(r=>r.status===c.TransactionStatus.unapproved&&(0,u.transactionMatchesNetwork)(r,e,t)))}getApprovedTransactions(e){const t={status:c.TransactionStatus.approved};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getPendingTransactions(e){const t={status:c.TransactionStatus.submitted};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getConfirmedTransactions(e){const t={status:c.TransactionStatus.confirmed};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getTransactionWithActionId(e){return(0,o.values)((0,o.pickBy)(this.store.getState().transactions,(t=>t.actionId===e)))[0]}addTransaction(e){e.txParams&&(e.txParams=(0,f.normalizeAndValidateTxParams)(e.txParams,!1)),this.once(`${e.id}:signed`,(()=>{this.removeAllListeners(`${e.id}:rejected`)})),this.once(`${e.id}:rejected`,(()=>{this.removeAllListeners(`${e.id}:signed`)})),e.history=[];const t=(0,p.snapshotFromTxMeta)(e);e.history.push(t);const r=this.getTransactions({filterToCurrentNetwork:!1}),{txHistoryLimit:n}=this,s=new Set,i=r.reverse().filter((e=>{const{nonce:t,from:r}=e.txParams,{chainId:i,metamaskNetworkId:o,status:a}=e,c=`${t}-${i??o}-${r}`;return!s.has(c)&&(!(s.size<n-1||!1===(0,f.getFinalStates)().includes(a))||(s.add(c),!1))})).map((e=>e.id));return this._deleteTransactions(i),this._addTransactionsToState([e]),e}addExternalTransaction(e){var t;const r=null==e||null===(t=e.txParams)||void 0===t?void 0:t.from,n=this.getConfirmedTransactions(r),s=this.getPendingTransactions(r);return(0,f.validateConfirmedExternalTransaction)({txMeta:e,pendingTransactions:s,confirmedTransactions:n}),this._addTransactionsToState([e]),e}getTransaction(e){const{transactions:t}=this.store.getState();return t[e]}updateTransaction(e,t){if(e.txParams)try{e.txParams=(0,f.normalizeAndValidateTxParams)(e.txParams,!1)}catch(t){if(e.warning.message!==m)throw t;return void this.setTxStatusFailed(e.id,t)}this._updateTransactionHistory(e,t)}_updateTransactionHistory(e,t){const r=(0,p.snapshotFromTxMeta)(e),n=(0,p.replayHistory)(e.history),s=(0,p.generateHistoryEntry)(n,r,t);s.length&&e.history.push(s);const i=e.id;this.store.updateState({transactions:{...this.store.getState().transactions,[i]:e}})}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:r=!0,limit:n}={}){const s=this.getCurrentChainId(),i=this.getNetworkId(),a=(0,o.mapValues)(e,(e=>"function"==typeof e?e:t=>t===e)),c=t?(0,o.keyBy)(t,"id"):this.store.getState().transactions,l=(0,o.sortBy)((0,o.pickBy)(c,(e=>{if(r&&!1===(0,u.transactionMatchesNetwork)(e,s,i))return!1;for(const[t,r]of Object.entries(a))if(t in e.txParams){if(!1===r(e.txParams[t]))return!1}else if(!1===r(e[t]))return!1;return!0})),"time");if(n!==undefined){const e=new Set,t=[];for(let r=l.length-1;r>-1;r--){const s=l[r],{nonce:i}=s.txParams;if(!e.has(i)){if(!(e.size<n))continue;e.add(i)}t.unshift(s)}return t}return l}setTxStatusRejected(e){this._setTransactionStatus(e,c.TransactionStatus.rejected),this._deleteTransaction(e)}setTxStatusUnapproved(e){this._setTransactionStatus(e,c.TransactionStatus.unapproved)}setTxStatusApproved(e){this._setTransactionStatus(e,c.TransactionStatus.approved)}setTxStatusSigned(e){this._setTransactionStatus(e,c.TransactionStatus.signed)}setTxStatusSubmitted(e){const t=this.getTransaction(e);t.submittedTime=(new Date).getTime(),this.updateTransaction(t,"txStateManager - add submitted time stamp"),this._setTransactionStatus(e,c.TransactionStatus.submitted)}setTxStatusConfirmed(e){this._setTransactionStatus(e,c.TransactionStatus.confirmed)}setTxStatusDropped(e){this._setTransactionStatus(e,c.TransactionStatus.dropped)}setTxStatusFailed(e,t){var r;const n=t||new Error("Internal metamask failure"),s=this.getTransaction(e);s.err={message:(null===(r=n.message)||void 0===r?void 0:r.toString())||n.toString(),rpc:n.value,stack:n.stack},this._updateTransactionHistory(s,"transactions:tx-state-manager#fail - add error"),this._setTransactionStatus(e,c.TransactionStatus.failed)}wipeTransactions(e){const{transactions:t}=this.store.getState(),r=this.getCurrentChainId(),n=this.getNetworkId();this.store.updateState({transactions:(0,o.omitBy)(t,(t=>t.txParams.from===e&&(0,u.transactionMatchesNetwork)(t,r,n)))})}clearUnapprovedTxs(){this.store.updateState({transactions:(0,o.omitBy)(this.store.getState().transactions,(e=>e.status===c.TransactionStatus.unapproved))})}_setTransactionStatus(e,t){const r=this.getTransaction(e);if(r){r.status=t;try{this._updateTransactionHistory(r,`txStateManager: setting status to ${t}`),this.emit(`${r.id}:${t}`,e),this.emit("tx:status-update",e,t),[c.TransactionStatus.submitted,c.TransactionStatus.rejected,c.TransactionStatus.failed].includes(t)&&this.emit(`${r.id}:finished`,r),this.emit(l.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}catch(e){i.default.error(e)}}}_addTransactionsToState(e){this.store.updateState({transactions:e.reduce(((e,t)=>(e[t.id]=t,e)),this.store.getState().transactions)})}_deleteTransaction(e){const{transactions:t}=this.store.getState();delete t[e],this.store.updateState({transactions:t})}_deleteTransactions(e){const{transactions:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({transactions:t})}}r.default=y}}},{package:"$root$",file:"app/scripts/controllers/transactions/tx-state-manager.js"}],[3315,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=Math.max,s=Math.min;t.exports=function(e,t,r){return e>=s(t,r)&&e<n(t,r)}}}},{package:"lodash",file:"node_modules/lodash/_baseInRange.js"}],[3334,{"./_trimmedEndIndex":3414},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_trimmedEndIndex"),s=/^\s+/;t.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}}}},{package:"lodash",file:"node_modules/lodash/_baseTrim.js"}],[34,{"../../shared/constants/app":3946,"./lib/util":80,"webextension-polyfill":3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.onMessageReceived=r.checkForMultipleVersionsRunning=void 0;var n,s=(n=e("webextension-polyfill"))&&n.__esModule?n:{default:n},i=e("../../shared/constants/app"),o=e("./lib/util");const a="isRunning";r.onMessageReceived=e=>{e===a&&console.warn("Warning! You have multiple instances of MetaMask running!")};r.checkForMultipleVersionsRunning=async()=>{if((0,o.getPlatform)()!==i.PLATFORM_CHROME&&(0,o.getPlatform)()!==i.PLATFORM_FIREFOX)return;const e=(0,o.getPlatform)()===i.PLATFORM_CHROME?i.CHROME_BUILD_IDS:i.FIREFOX_BUILD_IDS,t=s.default.runtime.id;for(const r of e)if(r!==t)try{await s.default.runtime.sendMessage(r,a)}catch(e){}}}}},{package:"$root$",file:"app/scripts/detect-multiple-instances.js"}],[3414,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=/\s/;t.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}}}},{package:"lodash",file:"node_modules/lodash/_trimmedEndIndex.js"}],[3421,{"./_baseInRange":3315,"./toFinite":3450,"./toNumber":3452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseInRange"),s=e("./toFinite"),i=e("./toNumber");t.exports=function(e,t,r){return t=s(t),r===undefined?(r=t,t=0):r=s(r),e=i(e),n(e,t,r)}}}},{package:"lodash",file:"node_modules/lodash/inRange.js"}],[3427,{"./_baseKeys":3325,"./_getTag":3366,"./_isPrototype":3381,"./isArguments":3422,"./isArray":3423,"./isArrayLike":3424,"./isBuffer":3426,"./isTypedArray":3439},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseKeys"),s=e("./_getTag"),i=e("./isArguments"),o=e("./isArray"),a=e("./isArrayLike"),c=e("./isBuffer"),l=e("./_isPrototype"),u=e("./isTypedArray"),h=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(a(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||u(e)||i(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!n(e).length;for(var r in e)if(h.call(e,r))return!1;return!0}}}},{package:"lodash",file:"node_modules/lodash/isEmpty.js"}],[3430,{"./toInteger":3451},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toInteger");t.exports=function(e){return"number"==typeof e&&e==n(e)}}}},{package:"lodash",file:"node_modules/lodash/isInteger.js"}],[3443,{"./_baseAssignValue":3305,"./_baseForOwn":3310,"./_baseIteratee":3324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseAssignValue"),s=e("./_baseForOwn"),i=e("./_baseIteratee");t.exports=function(e,t){var r={};return t=i(t,3),s(e,(function(e,s,i){n(r,s,t(e,s,i))})),r}}}},{package:"lodash",file:"node_modules/lodash/mapValues.js"}],[3450,{"./toNumber":3452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toNumber"),s=1/0;t.exports=function(e){return e?(e=n(e))===s||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}}}},{package:"lodash",file:"node_modules/lodash/toFinite.js"}],[3451,{"./toFinite":3450},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toFinite");t.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}}}},{package:"lodash",file:"node_modules/lodash/toInteger.js"}],[3452,{"./_baseTrim":3334,"./isObject":3434,"./isSymbol":3438},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseTrim"),s=e("./isObject"),i=e("./isSymbol"),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=c.test(e);return r||l.test(e)?u(e.slice(2),r?2:8):a.test(e)?o:+e}}}},{package:"lodash",file:"node_modules/lodash/toNumber.js"}],[3455,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function s(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}s.prototype.__isLong__,Object.defineProperty(s.prototype,"__isLong__",{value:!0}),s.isLong=i;var o={},a={};function c(e,t){var r,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=a[e])?n:(r=u(e,(0|e)<0?-1:0,!0),s&&(a[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=u(e,e<0?-1:0,!1),s&&(o[e]=r),r)}function l(e,t){if(isNaN(e))return t?w:b;if(t){if(e<0)return w;if(e>=g)return S}else{if(e<=-m)return _;if(e+1>=m)return C}return e<0?l(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new s(e,t,r)}s.fromInt=c,s.fromNumber=l,s.fromBits=u;var h=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var s=l(h(r,8)),i=b,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+a),r);if(a<8){var u=l(h(r,a));i=i.mul(u).add(l(c))}else i=(i=i.mul(s)).add(l(c))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}s.fromString=d,s.fromValue=p;var f=4294967296,g=f*f,m=g/2,y=c(1<<24),b=c(0);s.ZERO=b;var w=c(0,!0);s.UZERO=w;var v=c(1);s.ONE=v;var k=c(1,!0);s.UONE=k;var T=c(-1);s.NEG_ONE=T;var C=u(-1,2147483647,!1);s.MAX_VALUE=C;var S=u(-1,-1,!0);s.MAX_UNSIGNED_VALUE=S;var _=u(0,-2147483648,!1);s.MIN_VALUE=_;var A=s.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=l(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=l(h(e,6),this.unsigned),i=this,o="";;){var a=i.div(s),c=(i.sub(a.mul(s)).toInt()>>>0).toString(e);if((i=a).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return i(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(i(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(v)},A.neg=A.negate,A.add=function(e){i(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,o=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,h=0,d=0,f=0;return d+=(f+=s+(65535&e.low))>>>16,h+=(d+=n+c)>>>16,l+=(h+=r+a)>>>16,l+=t+o,u((d&=65535)<<16|(f&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},A.subtract=function(e){return i(e)||(e=p(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return b;if(i(e)||(e=p(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(_))return e.isOdd()?_:b;if(e.eq(_))return this.isOdd()?_:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,s=this.low>>>16,o=65535&this.low,a=e.high>>>16,c=65535&e.high,h=e.low>>>16,d=65535&e.low,f=0,g=0,m=0,w=0;return m+=(w+=o*d)>>>16,g+=(m+=s*d)>>>16,m&=65535,g+=(m+=o*h)>>>16,f+=(g+=r*d)>>>16,g&=65535,f+=(g+=s*h)>>>16,g&=65535,f+=(g+=o*c)>>>16,f+=t*d+r*h+s*c+o*a,u((m&=65535)<<16|(w&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(i(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,r,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?w:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return w;if(e.gt(this.shru(1)))return k;s=w}else{if(this.eq(_))return e.eq(v)||e.eq(T)?_:e.eq(_)?v:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?v:T:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(_))return this.unsigned?w:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:h(2,o-48),c=l(t),d=c.mul(e);d.isNegative()||d.gt(r);)d=(c=l(t-=a,this.unsigned)).mul(e);c.isZero()&&(c=v),s=s.add(c),r=r.sub(d)}return s},A.div=A.divide,A.modulo=function(e){return i(e)||(e=p(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return u(~this.low,~this.high,this.unsigned)},A.and=function(e){return i(e)||(e=p(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return i(e)||(e=p(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return i(e)||(e=p(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},s.fromBytes=function(e,t,r){return r?s.fromBytesLE(e,t):s.fromBytesBE(e,t)},s.fromBytesLE=function(e,t){return new s(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},s.fromBytesBE=function(e,t){return new s(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>long",file:"node_modules/long/src/long.js"}],[3467,{"./util":3471},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encodeText:n}=e("./util");t.exports=class{constructor(e,t,r,s){this.name=e,this.code=t,this.codeBuf=n(this.code),this.alphabet=s,this.codec=r(s)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/base.js"}],[3468,{"./base.js":3467,"./rfc4648":3470,"./util":3471,"@multiformats/base-x":1535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@multiformats/base-x"),s=e("./base.js"),{rfc4648:i}=e("./rfc4648"),{decodeText:o,encodeText:a}=e("./util"),c=[["identity","\0",()=>({encode:o,decode:a}),""],["base2","0",i(1),"01"],["base8","7",i(3),"01234567"],["base10","9",n,"0123456789"],["base16","f",i(4),"0123456789abcdef"],["base16upper","F",i(4),"0123456789ABCDEF"],["base32hex","v",i(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",i(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",i(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",i(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",i(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",n,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",n,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",n,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],l=c.reduce(((e,t)=>(e[t[0]]=new s(t[0],t[1],t[2],t[3]),e)),{}),u=c.reduce(((e,t)=>(e[t[1]]=l[t[0]],e)),{});t.exports={names:l,codes:u}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/constants.js"}],[3469,{"./constants":3468,"./util":3471},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./constants"),{encodeText:s,decodeText:i,concat:o}=e("./util");function a(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(r=t.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:n}=a(e);return function(e,t){const r=a(e);r.decode(i(t))}(r,t),o([n,t],n.length+t.length)}).encode=function(e,t){const r=a(e),n=s(r.encode(t));return o([r.codeBuf,n],r.codeBuf.length+n.length)},r.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},r.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(e){return!1}},r.encoding=a,r.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),a(e[0])};const c=Object.freeze(n.names),l=Object.freeze(n.codes);r.names=c,r.codes=l}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/index.js"}],[3470,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={rfc4648:e=>t=>({encode:r=>((e,t,r)=>{const n="="===t[t.length-1],s=(1<<r)-1;let i="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i})(r,t,e),decode:r=>((e,t,r)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*r/8|0);let o=0,a=0,c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined)throw new SyntaxError("Invalid character "+e[t]);a=a<<r|s,o+=r,o>=8&&(o-=8,i[c++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return i})(r,t,e)})}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/rfc4648.js"}],[3471,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=new TextDecoder,s=new TextEncoder;t.exports={decodeText:e=>n.decode(e),encodeText:e=>s.encode(e),concat:function(e,t){const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/util.js"}],[3472,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r){var i,o=0,a=0,c=r=r||0,l=t.length;do{if(c>=l||a>49)throw e.bytes=0,new RangeError("Could not decode varint");i=t[c++],o+=a<28?(i&s)<<a:(i&s)*Math.pow(2,a),a+=7}while(i>=n);return e.bytes=c-r,o};var n=128,s=127}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/decode.js"}],[3473,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r,o){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");r=r||[];var a=o=o||0;for(;t>=i;)r[o++]=255&t|n,t/=128;for(;t&s;)r[o++]=255&t|n,t>>>=7;return r[o]=0|t,e.bytes=o-a+1,r};var n=128,s=-128,i=Math.pow(2,31)}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/encode.js"}],[3474,{"./decode.js":3472,"./encode.js":3473,"./length.js":3475},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/index.js"}],[3475,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=Math.pow(2,7),s=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),c=Math.pow(2,42),l=Math.pow(2,49),u=Math.pow(2,56),h=Math.pow(2,63);t.exports=function(e){return e<n?1:e<s?2:e<i?3:e<o?4:e<a?5:e<c?6:e<l?7:e<u?8:e<h?9:10}}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/length.js"}],[3476,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056});t.exports={baseTable:n}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/generated-table.js"}],[3477,{"./maps":3478,"./util":3479,"uint8arrays/concat":3866,varint:3474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/concat"),i=e("./util"),{nameToVarint:o,constantToCode:a,nameToCode:c,codeToName:l}=e("./maps");function u(e){const t=n.decode(e),r=l[t];if(r===undefined)throw new Error(`Code "${t}" not found`);return r}function h(e){return l[e]}function d(e){const t=c[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function p(e){return n.decode(e)}function f(e){const t=o[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function g(e){return i.varintEncode(e)}t.exports={addPrefix:function(e,t){let r;if(e instanceof Uint8Array)r=i.varintUint8ArrayEncode(e);else{if(!o[e])throw new Error("multicodec not recognized");r=o[e]}return s([r,t],r.length+t.length)},rmPrefix:function(e){return n.decode(e),e.slice(n.decode.bytes)},getNameFromData:u,getNameFromCode:h,getCodeFromName:d,getCodeFromData:p,getVarintFromName:f,getVarintFromCode:g,getCodec:function(e){return u(e)},getName:function(e){return h(e)},getNumber:function(e){return d(e)},getCode:function(e){return p(e)},getCodeVarint:function(e){return f(e)},getVarint:function(e){return Array.from(g(e))},...a,nameToVarint:o,nameToCode:c,codeToName:l}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/index.js"}],[3478,{"./generated-table":3476,"./util":3479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./generated-table"),s=e("./util").varintEncode,i={},o={},a={};for(const e in n){const t=e,r=n[t];i[t]=s(r);o[t.toUpperCase().replace(/-/g,"_")]=r,a[r]||(a[r]=t)}Object.freeze(i),Object.freeze(o),Object.freeze(a);const c=Object.freeze(n);t.exports={nameToVarint:i,constantToCode:o,nameToCode:c,codeToName:a}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/maps.js"}],[3479,{"uint8arrays/from-string":3868,"uint8arrays/to-string":3869,varint:3474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/to-string"),i=e("uint8arrays/from-string");function o(e){return parseInt(s(e,"base16"),16)}t.exports={numberToUint8Array:function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);return i(t,"base16")},uint8ArrayToNumber:o,varintUint8ArrayEncode:function(e){return Uint8Array.from(n.encode(o(e)))},varintEncode:function(e){return Uint8Array.from(n.encode(e))}}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/util.js"}],[3497,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){for(var n=self.crypto||self.msCrypto,s="-_",i=36;i--;)s+=i.toString(36);for(i=36;i---10;)s+=i.toString(36).toUpperCase();t.exports=function(e){var t="",r=n.getRandomValues(new Uint8Array(e||21));for(i=e||21;i--;)t+=s[63&r[i]];return t}}}},{package:"nanoid",file:"node_modules/nanoid/index.browser.js"}],[35,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={config:{}};r.default=n}}},{package:"$root$",file:"app/scripts/first-time-state.js"}],[3502,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();t.exports=r=n.fetch,n.fetch&&(r.default=n.fetch.bind(n)),r.Headers=n.Headers,r.Request=n.Request,r.Response=n.Response}}},{package:"node-fetch",file:"node_modules/node-fetch/browser.js"}],[3505,{assert:2182,"await-semaphore":2061,"ethjs-query":2658},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("ethjs-query"),s=e("assert"),i=e("await-semaphore").Mutex;t.exports=class{constructor({provider:e,blockTracker:t,getPendingTransactions:r,getConfirmedTransactions:s}){this.provider=e,this.blockTracker=t,this.ethQuery=new n(e),this.getPendingTransactions=r,this.getConfirmedTransactions=s,this.lockMap={}}async getGlobalLock(){const e=this._lookupMutex("global");return{releaseLock:await e.acquire()}}async getNonceLock(e){await this._globalMutexFree();const t=await this._takeMutex(e);try{const r={},n=await this._getNetworkNextNonce(e),i=this._getHighestLocallyConfirmed(e),o=n.nonce,a=Math.max(o,i),c=this.getPendingTransactions(e),l=this._getHighestContinuousFrom(c,a)||0;r.params={highestLocallyConfirmed:i,highestSuggested:a,nextNetworkNonce:o},r.local=l,r.network=n;const u=Math.max(n.nonce,l.nonce);return s(Number.isInteger(u),`nonce-tracker - nextNonce is not an integer - got: (${typeof u}) "${u}"`),{nextNonce:u,nonceDetails:r,releaseLock:t}}catch(e){throw t(),e}}async _globalMutexFree(){const e=this._lookupMutex("global");(await e.acquire())()}async _takeMutex(e){const t=this._lookupMutex(e);return await t.acquire()}_lookupMutex(e){let t=this.lockMap[e];return t||(t=new i,this.lockMap[e]=t),t}async _getNetworkNextNonce(e){const t=await this.blockTracker.getLatestBlock(),r=(await this.ethQuery.getTransactionCount(e,t)).toNumber();s(Number.isInteger(r),`nonce-tracker - baseCount is not an integer - got: (${typeof r}) "${r}"`);return{name:"network",nonce:r,details:{blockNumber:t,baseCount:r}}}_getHighestLocallyConfirmed(e){const t=this.getConfirmedTransactions(e),r=this._getHighestNonce(t);return Number.isInteger(r)?r+1:0}_getHighestNonce(e){const t=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));return Math.max.apply(null,t)}_getHighestContinuousFrom(e,t){const r=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));let n=t;for(;r.includes(n);)n++;return{name:"local",nonce:n,details:{startPoint:t,highest:n}}}}}}},{package:"nonce-tracker",file:"node_modules/nonce-tracker/index.js"}],[3517,{"safe-event-emitter":3763,xtend:3934},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){e("xtend");const n=e("safe-event-emitter");t.exports=class extends n{constructor(e={}){super(),this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState(),r=Object.assign({},t,e);this.putState(r)}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}}}},{package:"@metamask/eth-keyring-controller>obs-store",file:"node_modules/obs-store/index.js"}],[3558,{"./src/index-light":3564},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./src/index-light")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/light.js"}],[3559,{"./enum":3562,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./enum"),i=e("./util");function o(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",n);for(var i=t.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)t.repeated&&i[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",n,i[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=i.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof s||r("if(d%s!=null){",c),o(r,a,n,c),a.resolvedType instanceof s||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?n:t[l].map?o:c).push(t[l]);if(n.length){for(r("if(o.arrays||o.defaults){"),l=0;l<n.length;++l)r("d%s=[]",i.safeProp(n[l].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),l=0;l<o.length;++l)r("d%s={}",i.safeProp(o[l].name));r("}")}if(c.length){for(r("if(o.defaults){"),l=0;l<c.length;++l){var u=c[l],h=i.safeProp(u.name);if(u.resolvedType instanceof s)r("d%s=o.enums===String?%j:%j",h,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",h)("}else")("d%s=o.longs===String?%j:%i",h,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var d="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",h,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",h,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",h,h)("}")}else r("d%s=%j",h,u.typeDefault)}r("}")}var p=!1;for(l=0;l<t.length;++l){u=t[l];var f=e._fieldsArray.indexOf(u);h=i.safeProp(u.name);u.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",h,h)("d%s={}",h)("for(var j=0;j<ks2.length;++j){"),a(r,u,f,h+"[ks2[j]]")("}")):u.repeated?(r("if(m%s&&m%s.length){",h,h)("d%s=[]",h)("for(var j=0;j<m%s.length;++j){",h),a(r,u,f,h+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",h,u.name),a(r,u,f,h),u.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(u.partOf.name),u.name)),r("}")}return r("return d")}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/converter.js"}],[3560,{"./enum":3562,"./types":3580,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,l="m"+i.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),s.defaults[a.keyType]!==undefined?t("k=%j",s.defaults[a.keyType]):t("k=null"),s.defaults[c]!==undefined?t("value=%j",s.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),s.basic[c]===undefined?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),s.long[a.keyType]!==undefined?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),s.packed[c]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),s.basic[c]===undefined?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,r):t("%s.push(r.%s())",l,c)):s.basic[c]===undefined?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,r):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var u=e._fieldsArray[r];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",o(u))}return t("return m")};var n=e("./enum"),s=e("./types"),i=e("./util");function o(e){return"missing required '"+e.name+"'"}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/decoder.js"}],[3561,{"./enum":3562,"./types":3580,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),u=e._fieldsArray.indexOf(l),h=l.resolvedType instanceof n?"int32":l.type,d=s.basic[h];t="m"+i.safeProp(l.name),l.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|s.mapKey[l.keyType],l.keyType),d===undefined?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,h,t),r("}")("}")):l.repeated?(r("if(%s!=null&&%s.length){",t,t),l.packed&&s.packed[h]!==undefined?r("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",h,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),d===undefined?o(r,l,u,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(l.id<<3|d)>>>0,h,t)),r("}")):(l.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),d===undefined?o(r,l,u,t):r("w.uint32(%i).%s(%s)",(l.id<<3|d)>>>0,h,t))}return r("return w")};var n=e("./enum"),s=e("./types"),i=e("./util");function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/encoder.js"}],[3562,{"./namespace":3569,"./object":3570,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./object");((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var s=e("./namespace"),i=e("./util");function o(e,t,r,s,i){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=i||{},this.reserved=undefined,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},o.prototype.add=function(e,t,r){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/enum.js"}],[3563,{"./enum":3562,"./object":3570,"./types":3580,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("./object");((l.prototype=Object.create(n.prototype)).constructor=l).className="Field";var s,i=e("./enum"),o=e("./types"),a=e("./util"),c=/^required|optional|repeated$/;function l(e,t,r,s,i,l,u){if(a.isObject(s)?(u=i,l=s,s=i=undefined):a.isObject(i)&&(u=l,l=i,i=undefined),n.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(s!==undefined&&!c.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==undefined&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:undefined,this.type=r,this.id=t,this.extend=i||undefined,this.required="required"===s,this.optional=!this.required,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&o.long[r]!==undefined,this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},l.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=o.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof s?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},l.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(s,i){a.decorateType(s.constructor).add(new l(i,e,t,r,{default:n}))}},l._configure=function(e){s=e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/field.js"}],[3564,{"./converter":3559,"./decoder":3560,"./encoder":3561,"./enum":3562,"./field":3563,"./index-minimal":3565,"./mapfield":3566,"./message":3567,"./method":3568,"./namespace":3569,"./object":3570,"./oneof":3571,"./root":3574,"./service":3578,"./type":3579,"./types":3580,"./util":3581,"./verifier":3584,"./wrappers":3585},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports=e("./index-minimal");n.build="light",n.load=function(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=e("./encoder"),n.decoder=e("./decoder"),n.verifier=e("./verifier"),n.converter=e("./converter"),n.ReflectionObject=e("./object"),n.Namespace=e("./namespace"),n.Root=e("./root"),n.Enum=e("./enum"),n.Type=e("./type"),n.Field=e("./field"),n.OneOf=e("./oneof"),n.MapField=e("./mapfield"),n.Service=e("./service"),n.Method=e("./method"),n.Message=e("./message"),n.wrappers=e("./wrappers"),n.types=e("./types"),n.util=e("./util"),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/index-light.js"}],[3565,{"./reader":3572,"./reader_buffer":3573,"./roots":3575,"./rpc":3576,"./util/minimal":3583,"./writer":3586,"./writer_buffer":3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;function s(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=s,s()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/index-minimal.js"}],[3566,{"./field":3563,"./types":3580,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./field");((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var s=e("./types"),i=e("./util");function o(e,t,r,s,o,a){if(n.call(this,e,t,s,undefined,undefined,o,a),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){if(this.resolved)return this;if(s.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"==typeof r?r=i.decorateType(r).name:r&&"object"==typeof r&&(r=i.decorateEnum(r).name),function(n,s){i.decorateType(n.constructor).add(new o(s,e,t,r))}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/mapfield.js"}],[3567,{"./util/minimal":3583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("./util/minimal");function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/message.js"}],[3568,{"./object":3570,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./object");((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var s=e("./util");function i(e,t,r,i,o,a,c,l,u){if(s.isObject(o)?(c=o,o=a=undefined):s.isObject(a)&&(c=a,a=undefined),t!==undefined&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(r))throw TypeError("requestType must be a string");if(!s.isString(i))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||undefined,this.responseType=i,this.responseStream=!!a||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=u}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/method.js"}],[3569,{"./field":3563,"./object":3570,"./oneof":3571,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=h;var n=e("./object");((h.prototype=Object.create(n.prototype)).constructor=h).className="Namespace";var s,i,o,a=e("./field"),c=e("./oneof"),l=e("./util");function u(e,t){if(!e||!e.length)return undefined;for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}function h(e,t){n.call(this,e,t),this.nested=undefined,this._nestedArray=null}function d(e){return e._nestedArray=null,e}h.fromJSON=function(e,t){return new h(e,t.options).addJSON(t.nested)},h.arrayToJSON=u,h.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},h.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(h.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),h.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},h.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((t.fields!==undefined?s.fromJSON:t.values!==undefined?o.fromJSON:t.methods!==undefined?i.fromJSON:t.id!==undefined?a.fromJSON:h.fromJSON)(r[n],t));return this},h.prototype.get=function(e){return this.nested&&this.nested[e]||null},h.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},h.prototype.add=function(e){if(!(e instanceof a&&e.extend!==undefined||e instanceof s||e instanceof o||e instanceof i||e instanceof h||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof h&&e instanceof h)||t instanceof s||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},h.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),d(this)},h.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof h))throw Error("path conflicts with non-namespace objects")}else r.add(r=new h(n))}return t&&r.addJSON(t),r},h.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof h?e[t++].resolveAll():e[t++].resolve();return this.resolve()},h.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof h&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof h&&(n=this._nestedArray[s].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},h.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},h.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},h.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},h.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},h._configure=function(e,t,r){s=e,i=t,o=r}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/namespace.js"}],[3570,{"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i,i.className="ReflectionObject";var n,s=e("./util");function i(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(e){return this.options?this.options[e]:undefined},i.prototype.setOption=function(e,t,r){return r&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var i=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var o=i[e];s.setProperty(o,r,t)}else(i={})[e]=s.setProperty({},r,t),n.push(i)}else{var a={};a[e]=t,n.push(a)}return this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/object.js"}],[3571,{"./field":3563,"./object":3570,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./object");((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var s=e("./field"),i=e("./util");function o(e,t,r,s){if(Array.isArray(t)||(r=t,t=undefined),n.call(this,e,r),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},o.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/oneof.js"}],[3572,{"./util/minimal":3583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=c;var n,s=e("./util/minimal"),i=s.LongBits,o=s.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},h=function(){return s.Buffer?function(e){return(c.create=function(e){return s.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=h(),n._configure();var t=s.Long?"toLong":"toNumber";s.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/reader.js"}],[3573,{"./reader":3572,"./util/minimal":3583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./reader");(i.prototype=Object.create(n.prototype)).constructor=i;var s=e("./util/minimal");function i(e){n.call(this,e)}i._configure=function(){s.Buffer&&(i.prototype._slice=s.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/reader_buffer.js"}],[3574,{"./enum":3562,"./field":3563,"./namespace":3569,"./oneof":3571,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=h;var n=e("./namespace");((h.prototype=Object.create(n.prototype)).constructor=h).className="Root";var s,i,o,a=e("./field"),c=e("./enum"),l=e("./oneof"),u=e("./util");function h(e){n.call(this,"",e),this.deferred=[],this.files=[]}function d(){}h.fromJSON=function(e,t){return t||(t=new h),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=u.path.resolve,h.prototype.fetch=u.fetch,h.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=undefined);var s=this;if(!n)return u.asPromise(e,s,t,r);var a=n===d;function c(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in o)return r}return null}function h(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){i.filename=e;var n,o=i(t,s,r),h=0;if(o.imports)for(;h<o.imports.length;++h)(n=l(o.imports[h])||s.resolvePath(e,o.imports[h]))&&p(n);if(o.weakImports)for(h=0;h<o.weakImports.length;++h)(n=l(o.weakImports[h])||s.resolvePath(e,o.weakImports[h]))&&p(n,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,s)}function p(e,t){if(!(s.files.indexOf(e)>-1))if(s.files.push(e),e in o)a?h(e,o[e]):(++f,setTimeout((function(){--f,h(e,o[e])})));else if(a){var r;try{r=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}h(e,r)}else++f,s.fetch(e,(function(r,i){--f,n&&(r?t?f||c(null,s):c(r):h(e,i))}))}var f=0;u.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=s.resolvePath("",t[m]))&&p(g);return a?s:(f||c(null,s),undefined)},h.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,d)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,undefined,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}h.prototype._handleAdd=function(e){if(e instanceof a)e.extend===undefined||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof s)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},h.prototype._handleRemove=function(e){if(e instanceof a){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},h._configure=function(e,t,r){s=e,i=t,o=r}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/root.js"}],[3575,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/roots.js"}],[3576,{"./rpc/service":3577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.Service=e("./rpc/service")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/rpc.js"}],[3577,{"../util/minimal":3583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("../util/minimal");function s(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(s.prototype=Object.create(n.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,r,s,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,s,i);if(!a.rpcImpl)return setTimeout((function(){o(Error("already ended"))}),0),undefined;try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null===r)return a.end(!0),undefined;if(!(r instanceof s))try{r=s[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){o(e)}),0),undefined}},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/rpc/service.js"}],[3578,{"./method":3568,"./namespace":3569,"./rpc":3576,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=a;var n=e("./namespace");((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var s=e("./method"),i=e("./util"),o=e("./rpc");function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(s.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,s=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return s}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/service.js"}],[3579,{"./converter":3559,"./decoder":3560,"./encoder":3561,"./enum":3562,"./field":3563,"./mapfield":3566,"./message":3567,"./namespace":3569,"./oneof":3571,"./reader":3572,"./service":3578,"./util":3581,"./verifier":3584,"./wrappers":3585,"./writer":3586},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=b;var n=e("./namespace");((b.prototype=Object.create(n.prototype)).constructor=b).className="Type";var s=e("./enum"),i=e("./oneof"),o=e("./field"),a=e("./mapfield"),c=e("./service"),l=e("./message"),u=e("./reader"),h=e("./writer"),d=e("./util"),p=e("./encoder"),f=e("./decoder"),g=e("./verifier"),m=e("./converter"),y=e("./wrappers");function b(e,t){n.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function w(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=b.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,l,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),b.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},b.fromJSON=function(e,t){var r=new b(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var l=Object.keys(t.fields),u=0;u<l.length;++u)r.add((void 0!==t.fields[l[u]].keyType?a.fromJSON:o.fromJSON)(l[u],t.fields[l[u]]));if(t.oneofs)for(l=Object.keys(t.oneofs),u=0;u<l.length;++u)r.add(i.fromJSON(l[u],t.oneofs[l[u]]));if(t.nested)for(l=Object.keys(t.nested),u=0;u<l.length;++u){var h=t.nested[l[u]];r.add((h.id!==undefined?o.fromJSON:h.fields!==undefined?b.fromJSON:h.values!==undefined?s.fromJSON:h.methods!==undefined?c.fromJSON:n.fromJSON)(l[u],h))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},b.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])},b.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},b.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},b.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),w(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),w(this)):n.prototype.add.call(this,e)},b.prototype.remove=function(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),w(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),w(this)}return n.prototype.remove.call(this,e)},b.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},b.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},b.prototype.create=function(e){return new this.ctor(e)},b.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:h,types:t,util:d}),this.decode=f(this)({Reader:u,types:t,util:d}),this.verify=g(this)({types:t,util:d}),this.fromObject=m.fromObject(this)({types:t,util:d}),this.toObject=m.toObject(this)({types:t,util:d});var n=y[e];if(n){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(s),s.toObject=this.toObject,this.toObject=n.toObject.bind(s)}return this},b.prototype.encode=function(e,t){return this.setup().encode(e,t)},b.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},b.prototype.decode=function(e,t){return this.setup().decode(e,t)},b.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},b.prototype.verify=function(e){return this.setup().verify(e)},b.prototype.fromObject=function(e){return this.setup().fromObject(e)},b.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},b.d=function(e){return function(t){d.decorateType(t,e)}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/type.js"}],[3580,{"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./util"),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/types.js"}],[3581,{"./enum":3562,"./root":3574,"./roots":3575,"./type":3579,"./util/minimal":3583,"@protobufjs/codegen":1577,"@protobufjs/fetch":1579,"@protobufjs/path":1582},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=t.exports=e("./util/minimal"),o=e("./roots");i.codegen=e("@protobufjs/codegen"),i.fetch=e("@protobufjs/fetch"),i.path=e("@protobufjs/path"),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],s=e[r++];s!==undefined&&(t[n]=s)}return t};var a=/\\/g,c=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(t,r){if(t.$type)return r&&t.$type.name!==r&&(i.decorateRoot.remove(t.$type),t.$type.name=r,i.decorateRoot.add(t.$type)),t.$type;n||(n=e("./type"));var s=new n(r||t.name);return i.decorateRoot.add(s),s.ctor=t,Object.defineProperty(t,"$type",{value:s,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:s,enumerable:!1}),s};var u=0;i.decorateEnum=function(t){if(t.$type)return t.$type;s||(s=e("./enum"));var r=new s("Enum"+u++,t);return i.decorateRoot.add(r),Object.defineProperty(t,"$type",{value:r,enumerable:!1}),r},i.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var s=r.shift();if("__proto__"===s)return t;if(r.length>0)t[s]=e(t[s]||{},r,n);else{var i=t[s];i&&(n=[].concat(i).concat(n)),t[s]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e("./root")))}})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util.js"}],[3582,{"../util/minimal":3583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("../util/minimal");function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=s.zero=new s(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new s(r,n)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(n.isString(e)){if(!n.Long)return s.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):i},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;s.fromHash=function(e){return e===o?i:new s((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util/longbits.js"}],[3583,{"./longbits":3582,"@protobufjs/aspromise":1575,"@protobufjs/base64":1576,"@protobufjs/eventemitter":1578,"@protobufjs/float":1580,"@protobufjs/inquire":1581,"@protobufjs/pool":1583,"@protobufjs/utf8":1584},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;function s(e,t,r){for(var n=Object.keys(t),s=0;s<n.length;++s)e[n[s]]!==undefined&&r||(e[n[s]]=t[n[s]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&s(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=e("@protobufjs/aspromise"),n.base64=e("@protobufjs/base64"),n.EventEmitter=e("@protobufjs/eventemitter"),n.float=e("@protobufjs/float"),n.inquire=e("@protobufjs/inquire"),n.utf8=e("@protobufjs/utf8"),n.pool=e("@protobufjs/pool"),n.LongBits=e("./longbits"),n.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=s,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&this[e[r]]!==undefined&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util/minimal.js"}],[3584,{"./enum":3562,"./util":3581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var l=e._fieldsArray[c].resolve(),u="m"+s.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,l.name),l.map)t("if(!util.isObject(%s))",u)("return%j",i(l,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),a(t,l,"k[i]"),o(t,l,c,u+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",u)("return%j",i(l,"array"))("for(var i=0;i<%s.length;++i){",u),o(t,l,c,u+"[i]")("}");else{if(l.partOf){var h=s.safeProp(l.partOf.name);1===n[l.partOf.name]&&t("if(p%s===1)",h)("return%j",l.partOf.name+": multiple values"),n[l.partOf.name]=1,t("p%s=1",h)}o(t,l,c,u)}l.optional&&t("}")}return t("return null")};var n=e("./enum"),s=e("./util");function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,s){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",s)("default:")("return%j",i(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",i(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/verifier.js"}],[3585,{"./message":3567},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./message");n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var o=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/wrappers.js"}],[3586,{"./util/minimal":3583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=h;var n,s=e("./util/minimal"),i=s.LongBits,o=s.base64,a=s.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=undefined,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return s.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=d(),h.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(h.alloc=s.pool(h.alloc,s.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(p,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var y=s.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(s.isString(e)){var r=h.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/writer.js"}],[3587,{"./util/minimal":3583,"./writer":3586},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./writer");(i.prototype=Object.create(n.prototype)).constructor=i;var s=e("./util/minimal");function i(){n.call(this)}function o(e,t,r){e.length<40?s.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=s._Buffer_allocUnsafe,i.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/writer_buffer.js"}],[36,{"@metamask/base-controller":1085,"@metamask/obs-store":1351},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("@metamask/base-controller");function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.ObservableStore{constructor({config:e,controllerMessenger:t,state:r,persist:n}){super(r),i(this,"config",{}),this.persist=n,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();for(const t of Object.keys(e)){if(!e[t])throw new Error(`Undefined '${t}'`);const r=e[t];r.subscribe?e[t].subscribe((e=>{this.updateState({[t]:e})})):this.controllerMessenger.subscribe(`${r.name}:stateChange`,(r=>{let n=r;this.persist&&(n=(0,s.getPersistentState)(r,e[t].metadata)),this.updateState({[t]:n})}))}}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const r=this.config[t],n=r.getState?r.getState():r.state;e={...e,...n}}return e}}r.default=o}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[37,{"../../../shared/constants/network":3954,"../constants/contracts":6,"./util":80,"@ethersproject/contracts":459,"@ethersproject/providers":498,"@metamask/obs-store":1351,"eth-query":2583,loglevel:3454,pify:3547,"single-call-balance-checker-abi":3831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=p(e("eth-query")),s=e("@metamask/obs-store"),i=p(e("loglevel")),o=p(e("pify")),a=e("@ethersproject/providers"),c=e("@ethersproject/contracts"),l=p(e("single-call-balance-checker-abi")),u=e("../../../shared/constants/network"),h=e("../constants/contracts"),d=e("./util");function p(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(e={}){const t={accounts:{},currentBlockGasLimit:""};this.store=new s.ObservableStore({...t,...e.initState}),this.resetState=()=>{this.store.updateState(t)},this._provider=e.provider,this._query=(0,o.default)(new n.default(this._provider)),this._blockTracker=e.blockTracker,this._currentBlockNumber=this._blockTracker.getCurrentBlock(),this._blockTracker.once("latest",(e=>{this._currentBlockNumber=e})),this._updateForBlock=this._updateForBlock.bind(this),this.getCurrentChainId=e.getCurrentChainId,this.getNetworkIdentifier=e.getNetworkIdentifier,this.preferencesController=e.preferencesController,this.onboardingController=e.onboardingController,this.onboardingController.store.subscribe((0,d.previousValueComparator)((async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;!r&&n&&this._updateAccounts()}),this.onboardingController.store.getState())),this.preferencesController.store.subscribe((0,d.previousValueComparator)((async(e,t)=>{const{selectedAddress:r}=e,{selectedAddress:n,useMultiAccountBalanceChecker:s}=t;r===n||s||this._updateAccounts()}),this.onboardingController.store.getState())),this.ethersProvider=new a.Web3Provider(this._provider)}start(){this._blockTracker.removeListener("latest",this._updateForBlock),this._blockTracker.addListener("latest",this._updateForBlock),this._updateAccounts()}stop(){this._blockTracker.removeListener("latest",this._updateForBlock)}syncWithAddresses(e){const{accounts:t}=this.store.getState(),r=Object.keys(t),n=[];e.forEach((e=>{r.includes(e)||n.push(e)}));const s=[];r.forEach((t=>{e.includes(t)||s.push(t)})),this.addAccounts(n),this.removeAccount(s)}addAccounts(e){const{accounts:t}=this.store.getState();e.forEach((e=>{t[e]={}})),this.store.updateState({accounts:t}),this._currentBlockNumber&&this._updateAccounts()}removeAccount(e){const{accounts:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({accounts:t})}clearAccounts(){this.store.updateState({accounts:{}})}async _updateForBlock(e){this._currentBlockNumber=e;const t=await this._query.getBlockByNumber(e,!1);if(!t)return;const r=t.gasLimit;this.store.updateState({currentBlockGasLimit:r});try{await this._updateAccounts()}catch(e){i.default.error(e)}}async _updateAccounts(){const{completedOnboarding:e}=this.onboardingController.store.getState();if(!e)return;const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r=[];if(t){const{accounts:e}=this.store.getState();r=Object.keys(e)}else{r=[this.preferencesController.getSelectedAddress()]}const n=this.getCurrentChainId(),s=this.getNetworkIdentifier();if(s===u.LOCALHOST_RPC_URL||"http://127.0.0.1:8545"===s)await Promise.all(r.map(this._updateAccount.bind(this)));else switch(n){case u.CHAIN_IDS.MAINNET:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS);break;case u.CHAIN_IDS.GOERLI:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_GOERLI);break;case u.CHAIN_IDS.SEPOLIA:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA);break;case u.CHAIN_IDS.BSC:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_BSC);break;case u.CHAIN_IDS.OPTIMISM:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM);break;case u.CHAIN_IDS.POLYGON:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_POLYGON);break;case u.CHAIN_IDS.AVALANCHE:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE);break;case u.CHAIN_IDS.FANTOM:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_FANTOM);break;case u.CHAIN_IDS.ARBITRUM:await this._updateAccountsViaBalanceChecker(r,h.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM);break;default:await Promise.all(r.map(this._updateAccount.bind(this)))}}async _updateAccount(e){const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r="0x0";try{r=await this._query.getBalance(e)}catch(e){var n,s;if("eth_getBalance"!==(null===(n=e.data)||void 0===n||null===(s=n.request)||void 0===s?void 0:s.method))throw e}const i={address:e,balance:r},{accounts:o}=this.store.getState();if(!o[e])return;let a=o;t||(a={},Object.keys(o).forEach((t=>{e!==t&&(a[t]={address:t,balance:null})}))),a[e]=i,this.store.updateState({accounts:a})}async _updateAccountsViaBalanceChecker(e,t){const{accounts:r}=this.store.getState(),n={};Object.keys(r).forEach((t=>{e.includes(t)||(n[t]={address:t,balance:null})})),this.ethersProvider=new a.Web3Provider(this._provider);const s=await new c.Contract(t,l.default,this.ethersProvider),o=["0x0000000000000000000000000000000000000000"];try{const t=await s.balances(e,o);e.forEach(((e,r)=>{const s=t[r]?t[r].toHexString():"0x0";n[e]={address:e,balance:s}})),this.store.updateState({accounts:n})}catch(t){i.default.warn("MetaMask - Account Tracker single call balance fetch failed",t),Promise.all(e.map(this._updateAccount.bind(this)))}}}}}},{package:"$root$",file:"app/scripts/lib/account-tracker.js"}],[3753,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=function(e){return String(e).replace(r.expr,"")}).expr=/\/+$/}}},{package:"remove-trailing-slash",file:"node_modules/remove-trailing-slash/index.js"}],[3758,{buffer:2187},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(t){return t instanceof e?e.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}t.exports=function(e){return(e=e||{}).circles?function(e){var t=[],n=[];return e.proto?function e(i){if("object"!=typeof i||null===i)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return s(i,e);if(i instanceof Map)return new Map(s(Array.from(i),e));if(i instanceof Set)return new Set(s(Array.from(i),e));var o={};for(var a in t.push(i),n.push(o),i){var c=i[a];if("object"!=typeof c||null===c)o[a]=c;else if(c instanceof Date)o[a]=new Date(c);else if(c instanceof Map)o[a]=new Map(s(Array.from(c),e));else if(c instanceof Set)o[a]=new Set(s(Array.from(c),e));else if(ArrayBuffer.isView(c))o[a]=r(c);else{var l=t.indexOf(c);o[a]=-1!==l?n[l]:e(c)}}return t.pop(),n.pop(),o}:function e(i){if("object"!=typeof i||null===i)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return s(i,e);if(i instanceof Map)return new Map(s(Array.from(i),e));if(i instanceof Set)return new Set(s(Array.from(i),e));var o={};for(var a in t.push(i),n.push(o),i)if(!1!==Object.hasOwnProperty.call(i,a)){var c=i[a];if("object"!=typeof c||null===c)o[a]=c;else if(c instanceof Date)o[a]=new Date(c);else if(c instanceof Map)o[a]=new Map(s(Array.from(c),e));else if(c instanceof Set)o[a]=new Set(s(Array.from(c),e));else if(ArrayBuffer.isView(c))o[a]=r(c);else{var l=t.indexOf(c);o[a]=-1!==l?n[l]:e(c)}}return t.pop(),n.pop(),o};function s(e,s){for(var i=Object.keys(e),o=new Array(i.length),a=0;a<i.length;a++){var c=i[a],l=e[c];if("object"!=typeof l||null===l)o[c]=l;else if(l instanceof Date)o[c]=new Date(l);else if(ArrayBuffer.isView(l))o[c]=r(l);else{var u=t.indexOf(l);o[c]=-1!==u?n[u]:s(l)}}return o}}(e):e.proto?function e(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,e);if(n instanceof Map)return new Map(t(Array.from(n),e));if(n instanceof Set)return new Set(t(Array.from(n),e));var s={};for(var i in n){var o=n[i];"object"!=typeof o||null===o?s[i]=o:o instanceof Date?s[i]=new Date(o):o instanceof Map?s[i]=new Map(t(Array.from(o),e)):o instanceof Set?s[i]=new Set(t(Array.from(o),e)):ArrayBuffer.isView(o)?s[i]=r(o):s[i]=e(o)}return s}:function e(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,e);if(n instanceof Map)return new Map(t(Array.from(n),e));if(n instanceof Set)return new Set(t(Array.from(n),e));var s={};for(var i in n)if(!1!==Object.hasOwnProperty.call(n,i)){var o=n[i];"object"!=typeof o||null===o?s[i]=o:o instanceof Date?s[i]=new Date(o):o instanceof Map?s[i]=new Map(t(Array.from(o),e)):o instanceof Set?s[i]=new Set(t(Array.from(o),e)):ArrayBuffer.isView(o)?s[i]=r(o):s[i]=e(o)}return s};function t(e,t){for(var n=Object.keys(e),s=new Array(n.length),i=0;i<n.length;i++){var o=n[i],a=e[o];"object"!=typeof a||null===a?s[o]=a:a instanceof Date?s[o]=new Date(a):ArrayBuffer.isView(a)?s[o]=r(a):s[o]=t(a)}return s}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-utils>rfdc",file:"node_modules/rfdc/index.js"}],[3764,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{hasOwnProperty:n}=Object.prototype,s=f();s.configure=f,s.stringify=s,s.default=s,r.stringify=s,r.configure=f,t.exports=s;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function o(e){return e.length<5e3&&!i.test(e)?`"${e}"`:JSON.stringify(e)}function a(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){const r=e[t];let n=t;for(;0!==n&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}const c=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(e){return c.call(e)!==undefined&&0!==e.length}function u(e,t,r){e.length<r&&(r=e.length);const n=","===t?"":" ";let s=`"0":${n}${e[0]}`;for(let i=1;i<r;i++)s+=`${t}"${i}":${n}${e[i]}`;return s}function h(e,t){let r;if(n.call(e,t)&&(r=e[t],"boolean"!=typeof r))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===undefined||r}function d(e,t){let r;if(n.call(e,t)){if(r=e[t],"number"!=typeof r)throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===undefined?Infinity:r}function p(e){return 1===e?"1 item":`${e} items`}function f(e){const t=function(e){if(n.call(e,"strict")){const t=e.strict;if("boolean"!=typeof t)throw new TypeError('The "strict" argument must be of type boolean');if(t)return e=>{let t="Object can not safely be stringified. Received type "+typeof e;throw"function"!=typeof e&&(t+=` (${e.toString()})`),new Error(t)}}}(e={...e});t&&(e.bigint===undefined&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));const r=function(e){if(n.call(e,"circularValue")){const t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(e),s=h(e,"bigint"),i=h(e,"deterministic"),c=d(e,"maximumDepth"),f=d(e,"maximumBreadth");function g(e,n,u,h,d,m){let y=n[e];switch("object"==typeof y&&null!==y&&"function"==typeof y.toJSON&&(y=y.toJSON(e)),y=h.call(n,e,y),typeof y){case"string":return o(y);case"object":{if(null===y)return"null";if(-1!==u.indexOf(y))return r;let e="",t=",";const n=m;if(Array.isArray(y)){if(0===y.length)return"[]";if(c<u.length+1)return'"[Array]"';u.push(y),""!==d&&(e+=`\n${m+=d}`,t=`,\n${m}`);const r=Math.min(y.length,f);let s=0;for(;s<r-1;s++){const r=g(String(s),y,u,h,d,m);e+=r!==undefined?r:"null",e+=t}const i=g(String(s),y,u,h,d,m);if(e+=i!==undefined?i:"null",y.length-1>f){e+=`${t}"... ${p(y.length-f-1)} not stringified"`}return""!==d&&(e+=`\n${n}`),u.pop(),`[${e}]`}let s=Object.keys(y);const b=s.length;if(0===b)return"{}";if(c<u.length+1)return'"[Object]"';let w="",v="";""!==d&&(t=`,\n${m+=d}`,w=" ");const k=Math.min(b,f);i&&!l(y)&&(s=a(s)),u.push(y);for(let r=0;r<k;r++){const n=s[r],i=g(n,y,u,h,d,m);i!==undefined&&(e+=`${v}${o(n)}:${w}${i}`,v=t)}if(b>f){e+=`${v}"...":${w}"${p(b-f)} not stringified"`,v=t}return""!==d&&v.length>1&&(e=`\n${m}${e}\n${n}`),u.pop(),`{${e}}`}case"number":return isFinite(y)?String(y):t?t(y):"null";case"boolean":return!0===y?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(y);default:return t?t(y):undefined}}function m(e,n,i,a,l,u){switch("object"==typeof n&&null!==n&&"function"==typeof n.toJSON&&(n=n.toJSON(e)),typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if(-1!==i.indexOf(n))return r;const e=u;let t="",s=",";if(Array.isArray(n)){if(0===n.length)return"[]";if(c<i.length+1)return'"[Array]"';i.push(n),""!==l&&(t+=`\n${u+=l}`,s=`,\n${u}`);const r=Math.min(n.length,f);let o=0;for(;o<r-1;o++){const e=m(String(o),n[o],i,a,l,u);t+=e!==undefined?e:"null",t+=s}const h=m(String(o),n[o],i,a,l,u);if(t+=h!==undefined?h:"null",n.length-1>f){t+=`${s}"... ${p(n.length-f-1)} not stringified"`}return""!==l&&(t+=`\n${e}`),i.pop(),`[${t}]`}i.push(n);let h="";""!==l&&(s=`,\n${u+=l}`,h=" ");let d="";for(const e of a){const r=m(e,n[e],i,a,l,u);r!==undefined&&(t+=`${d}${o(e)}:${h}${r}`,d=s)}return""!==l&&d.length>1&&(t=`\n${u}${t}\n${e}`),i.pop(),`{${t}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}function y(e,n,h,d,g){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return y(e,n,h,d,g);if(null===n)return"null"}if(-1!==h.indexOf(n))return r;const t=g;if(Array.isArray(n)){if(0===n.length)return"[]";if(c<h.length+1)return'"[Array]"';h.push(n);let e=`\n${g+=d}`;const r=`,\n${g}`,s=Math.min(n.length,f);let i=0;for(;i<s-1;i++){const t=y(String(i),n[i],h,d,g);e+=t!==undefined?t:"null",e+=r}const o=y(String(i),n[i],h,d,g);if(e+=o!==undefined?o:"null",n.length-1>f){e+=`${r}"... ${p(n.length-f-1)} not stringified"`}return e+=`\n${t}`,h.pop(),`[${e}]`}let s=Object.keys(n);const m=s.length;if(0===m)return"{}";if(c<h.length+1)return'"[Object]"';const b=`,\n${g+=d}`;let w="",v="",k=Math.min(m,f);l(n)&&(w+=u(n,b,f),s=s.slice(n.length),k-=n.length,v=b),i&&(s=a(s)),h.push(n);for(let e=0;e<k;e++){const t=s[e],r=y(t,n[t],h,d,g);r!==undefined&&(w+=`${v}${o(t)}: ${r}`,v=b)}if(m>f){w+=`${v}"...": "${p(m-f)} not stringified"`,v=b}return""!==v&&(w=`\n${g}${w}\n${t}`),h.pop(),`{${w}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}function b(e,n,h){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return b(e,n,h);if(null===n)return"null"}if(-1!==h.indexOf(n))return r;let t="";if(Array.isArray(n)){if(0===n.length)return"[]";if(c<h.length+1)return'"[Array]"';h.push(n);const e=Math.min(n.length,f);let r=0;for(;r<e-1;r++){const e=b(String(r),n[r],h);t+=e!==undefined?e:"null",t+=","}const s=b(String(r),n[r],h);if(t+=s!==undefined?s:"null",n.length-1>f){t+=`,"... ${p(n.length-f-1)} not stringified"`}return h.pop(),`[${t}]`}let s=Object.keys(n);const d=s.length;if(0===d)return"{}";if(c<h.length+1)return'"[Object]"';let g="",m=Math.min(d,f);l(n)&&(t+=u(n,",",f),s=s.slice(n.length),m-=n.length,g=","),i&&(s=a(s)),h.push(n);for(let e=0;e<m;e++){const r=s[e],i=b(r,n[r],h);i!==undefined&&(t+=`${g}${o(r)}:${i}`,g=",")}if(d>f){t+=`${g}"...":"${p(d-f)} not stringified"`}return h.pop(),`{${t}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}return function(e,t,r){if(arguments.length>1){let n="";if("number"==typeof r?n=" ".repeat(Math.min(r,10)):"string"==typeof r&&(n=r.slice(0,10)),null!=t){if("function"==typeof t)return g("",{"":e},[],t,n,"");if(Array.isArray(t))return m("",e,[],function(e){const t=new Set;for(const r of e)"string"!=typeof r&&"number"!=typeof r||t.add(String(r));return t}(t),n,"")}if(0!==n.length)return y("",e,[],n,"")}return b("",e,[])}}}}},{package:"@metamask/eth-json-rpc-middleware>safe-stable-stringify",file:"node_modules/safe-stable-stringify/index.js"}],[3772,{buffer:2187,pbkdf2:3541},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("pbkdf2").pbkdf2Sync,s=2147483647;function i(e,t,n,s,i){if(r.isBuffer(e)&&r.isBuffer(n))e.copy(n,s,t,t+i);else for(;i--;)n[s++]=e[t++]}t.exports=function(e,t,o,a,c,l,u){if(0===o||0!=(o&o-1))throw Error("N must be > 0 and a power of 2");if(o>s/128/a)throw Error("Parameter N is too large");if(a>s/128/c)throw Error("Parameter r is too large");var h,d=new r(256*a),p=new r(128*a*o),f=new Int32Array(16),g=new Int32Array(16),m=new r(64),y=n(e,t,1,128*c*a,"sha256");if(u){var b=c*o*2,w=0;h=function(){++w%1e3==0&&u({current:w,total:b,percent:w/b*100})}}for(var v=0;v<c;v++)k(y,128*v*a,a,o,p,d);return n(e,y,1,l,"sha256");function k(e,t,r,n,s,i){var o,a=128*r;for(e.copy(i,0,t,t+a),o=0;o<n;o++)i.copy(s,o*a,0,0+a),T(i,0,a,r),h&&h();for(o=0;o<n;o++){var c=0+64*(2*r-1);_(s,(i.readUInt32LE(c)&n-1)*a,i,0,a),T(i,0,a,r),h&&h()}i.copy(e,t,0,0+a)}function T(e,t,r,n){var s;for(i(e,t+64*(2*n-1),m,0,64),s=0;s<2*n;s++)_(e,64*s,m,0,64),S(m),i(m,0,e,r+64*s,64);for(s=0;s<n;s++)i(e,r+2*s*64,e,t+64*s,64);for(s=0;s<n;s++)i(e,r+64*(2*s+1),e,t+64*(s+n),64)}function C(e,t){return e<<t|e>>>32-t}function S(e){var t;for(t=0;t<16;t++)f[t]=(255&e[4*t+0])<<0,f[t]|=(255&e[4*t+1])<<8,f[t]|=(255&e[4*t+2])<<16,f[t]|=(255&e[4*t+3])<<24;for(i(f,0,g,0,16),t=8;t>0;t-=2)g[4]^=C(g[0]+g[12],7),g[8]^=C(g[4]+g[0],9),g[12]^=C(g[8]+g[4],13),g[0]^=C(g[12]+g[8],18),g[9]^=C(g[5]+g[1],7),g[13]^=C(g[9]+g[5],9),g[1]^=C(g[13]+g[9],13),g[5]^=C(g[1]+g[13],18),g[14]^=C(g[10]+g[6],7),g[2]^=C(g[14]+g[10],9),g[6]^=C(g[2]+g[14],13),g[10]^=C(g[6]+g[2],18),g[3]^=C(g[15]+g[11],7),g[7]^=C(g[3]+g[15],9),g[11]^=C(g[7]+g[3],13),g[15]^=C(g[11]+g[7],18),g[1]^=C(g[0]+g[3],7),g[2]^=C(g[1]+g[0],9),g[3]^=C(g[2]+g[1],13),g[0]^=C(g[3]+g[2],18),g[6]^=C(g[5]+g[4],7),g[7]^=C(g[6]+g[5],9),g[4]^=C(g[7]+g[6],13),g[5]^=C(g[4]+g[7],18),g[11]^=C(g[10]+g[9],7),g[8]^=C(g[11]+g[10],9),g[9]^=C(g[8]+g[11],13),g[10]^=C(g[9]+g[8],18),g[12]^=C(g[15]+g[14],7),g[13]^=C(g[12]+g[15],9),g[14]^=C(g[13]+g[12],13),g[15]^=C(g[14]+g[13],18);for(t=0;t<16;++t)f[t]=g[t]+f[t];for(t=0;t<16;t++){var r=4*t;e[r+0]=f[t]>>0&255,e[r+1]=f[t]>>8&255,e[r+2]=f[t]>>16&255,e[r+3]=f[t]>>24&255}}function _(e,t,r,n,s){for(var i=0;i<s;i++)r[n+i]^=e[t+i]}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-wallet>scryptsy",file:"node_modules/scryptsy/lib/scrypt.js"}],[38,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){let{name:t}=e;t=t===undefined?"Error":String(t);let r=e.message;r=r===undefined?"":String(r),""===t?e.stack=e.message:""===r?e.stack=e.name:e.stack||(e.stack=`${e.name}: ${e.message}`);return e}}}},{package:"$root$",file:"app/scripts/lib/cleanErrorStack.js"}],[3856,{_process:3550,stream:2191},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("stream");function s(e,t,s){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,o=!1,a=[],c=!1,l=new n;function u(){for(;a.length&&!l.paused;){var e=a.shift();if(null===e)return l.emit("end");l.emit("data",e)}}return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(s&&!1===s.autoDestroy),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return c||(null===e&&(c=!0),a.push(e),u()),l},l.on("end",(function(){l.readable=!1,!l.writable&&l.autoDestroy&&r.nextTick((function(){l.destroy()}))})),l.end=function(e){if(!i)return i=!0,arguments.length&&l.write(e),l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy(),l},l.destroy=function(){if(!o)return o=!0,i=!0,a.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),u(),l.paused||l.emit("drain"),l},l}t.exports=s,s.through=s}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through",file:"node_modules/through/index.js"}],[3861,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view",file:"node_modules/to-data-view/index.js"}],[3864,{buffer:2186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var r,n;r=this,n=function(){var t={};function r(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},t.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==e.from?(t.encodeBase64=function(t){return e.from(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(e.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new e(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(new e(t,"base64"),0))}):(t.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},t.decodeBase64=function(e){r(e);var t,n=atob(e),s=new Uint8Array(n.length);for(t=0;t<n.length;t++)s[t]=n.charCodeAt(t);return s}),t},void 0!==t&&t.exports?t.exports=n():(r.nacl||(r.nacl={}),r.nacl.util=n())}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-sig-util>tweetnacl-util",file:"node_modules/tweetnacl-util/nacl-util.js"}],[3865,{crypto:2186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(t){var r=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=r(),a=r([1]),c=r([56129,1]),l=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,s){var i,o=0;for(i=0;i<s;i++)o|=e[t+i]^r[n+i];return(1&o-1>>>8)-1}function m(e,t,r,n){return g(e,t,r,n,16)}function y(e,t,r,n){return g(e,t,r,n,32)}function b(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,k=i,T=o,C=a,S=c,_=l,A=u,E=h,M=d,P=p,N=f,O=g,x=m,j=y,I=b,R=w,L=v,D=0;D<20;D+=2)k^=(s=(j^=(s=(P^=(s=(_^=(s=k+j|0)<<7|s>>>25)+k|0)<<9|s>>>23)+_|0)<<13|s>>>19)+P|0)<<18|s>>>14,A^=(s=(T^=(s=(I^=(s=(N^=(s=A+T|0)<<7|s>>>25)+A|0)<<9|s>>>23)+N|0)<<13|s>>>19)+I|0)<<18|s>>>14,O^=(s=(E^=(s=(C^=(s=(R^=(s=O+E|0)<<7|s>>>25)+O|0)<<9|s>>>23)+R|0)<<13|s>>>19)+C|0)<<18|s>>>14,L^=(s=(x^=(s=(M^=(s=(S^=(s=L+x|0)<<7|s>>>25)+L|0)<<9|s>>>23)+S|0)<<13|s>>>19)+M|0)<<18|s>>>14,k^=(s=(S^=(s=(C^=(s=(T^=(s=k+S|0)<<7|s>>>25)+k|0)<<9|s>>>23)+T|0)<<13|s>>>19)+C|0)<<18|s>>>14,A^=(s=(_^=(s=(M^=(s=(E^=(s=A+_|0)<<7|s>>>25)+A|0)<<9|s>>>23)+E|0)<<13|s>>>19)+M|0)<<18|s>>>14,O^=(s=(N^=(s=(P^=(s=(x^=(s=O+N|0)<<7|s>>>25)+O|0)<<9|s>>>23)+x|0)<<13|s>>>19)+P|0)<<18|s>>>14,L^=(s=(R^=(s=(I^=(s=(j^=(s=L+R|0)<<7|s>>>25)+L|0)<<9|s>>>23)+j|0)<<13|s>>>19)+I|0)<<18|s>>>14;k=k+i|0,T=T+o|0,C=C+a|0,S=S+c|0,_=_+l|0,A=A+u|0,E=E+h|0,M=M+d|0,P=P+p|0,N=N+f|0,O=O+g|0,x=x+m|0,j=j+y|0,I=I+b|0,R=R+w|0,L=L+v|0,e[0]=k>>>0&255,e[1]=k>>>8&255,e[2]=k>>>16&255,e[3]=k>>>24&255,e[4]=T>>>0&255,e[5]=T>>>8&255,e[6]=T>>>16&255,e[7]=T>>>24&255,e[8]=C>>>0&255,e[9]=C>>>8&255,e[10]=C>>>16&255,e[11]=C>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=_>>>0&255,e[17]=_>>>8&255,e[18]=_>>>16&255,e[19]=_>>>24&255,e[20]=A>>>0&255,e[21]=A>>>8&255,e[22]=A>>>16&255,e[23]=A>>>24&255,e[24]=E>>>0&255,e[25]=E>>>8&255,e[26]=E>>>16&255,e[27]=E>>>24&255,e[28]=M>>>0&255,e[29]=M>>>8&255,e[30]=M>>>16&255,e[31]=M>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=N>>>0&255,e[37]=N>>>8&255,e[38]=N>>>16&255,e[39]=N>>>24&255,e[40]=O>>>0&255,e[41]=O>>>8&255,e[42]=O>>>16&255,e[43]=O>>>24&255,e[44]=x>>>0&255,e[45]=x>>>8&255,e[46]=x>>>16&255,e[47]=x>>>24&255,e[48]=j>>>0&255,e[49]=j>>>8&255,e[50]=j>>>16&255,e[51]=j>>>24&255,e[52]=I>>>0&255,e[53]=I>>>8&255,e[54]=I>>>16&255,e[55]=I>>>24&255,e[56]=R>>>0&255,e[57]=R>>>8&255,e[58]=R>>>16&255,e[59]=R>>>24&255,e[60]=L>>>0&255,e[61]=L>>>8&255,e[62]=L>>>16&255,e[63]=L>>>24&255}(e,t,r,n)}function w(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,k=0;k<20;k+=2)i^=(s=(y^=(s=(p^=(s=(l^=(s=i+y|0)<<7|s>>>25)+i|0)<<9|s>>>23)+l|0)<<13|s>>>19)+p|0)<<18|s>>>14,u^=(s=(o^=(s=(b^=(s=(f^=(s=u+o|0)<<7|s>>>25)+u|0)<<9|s>>>23)+f|0)<<13|s>>>19)+b|0)<<18|s>>>14,g^=(s=(h^=(s=(a^=(s=(w^=(s=g+h|0)<<7|s>>>25)+g|0)<<9|s>>>23)+w|0)<<13|s>>>19)+a|0)<<18|s>>>14,v^=(s=(m^=(s=(d^=(s=(c^=(s=v+m|0)<<7|s>>>25)+v|0)<<9|s>>>23)+c|0)<<13|s>>>19)+d|0)<<18|s>>>14,i^=(s=(c^=(s=(a^=(s=(o^=(s=i+c|0)<<7|s>>>25)+i|0)<<9|s>>>23)+o|0)<<13|s>>>19)+a|0)<<18|s>>>14,u^=(s=(l^=(s=(d^=(s=(h^=(s=u+l|0)<<7|s>>>25)+u|0)<<9|s>>>23)+h|0)<<13|s>>>19)+d|0)<<18|s>>>14,g^=(s=(f^=(s=(p^=(s=(m^=(s=g+f|0)<<7|s>>>25)+g|0)<<9|s>>>23)+m|0)<<13|s>>>19)+p|0)<<18|s>>>14,v^=(s=(w^=(s=(b^=(s=(y^=(s=v+w|0)<<7|s>>>25)+v|0)<<9|s>>>23)+y|0)<<13|s>>>19)+b|0)<<18|s>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=v>>>0&255,e[13]=v>>>8&255,e[14]=v>>>16&255,e[15]=v>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=p>>>0&255,e[25]=p>>>8&255,e[26]=p>>>16&255,e[27]=p>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function k(e,t,r,n,s,i,o){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=i[c];for(;s>=64;){for(b(u,l,o,v),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;s-=64,t+=64,n+=64}if(s>0)for(b(u,l,o,v),c=0;c<s;c++)e[t+c]=r[n+c]^u[c];return 0}function T(e,t,r,n,s){var i,o,a=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(b(c,a,s,v),o=0;o<64;o++)e[t+o]=c[o];for(i=1,o=8;o<16;o++)i=i+(255&a[o])|0,a[o]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(b(c,a,s,v),o=0;o<r;o++)e[t+o]=c[o];return 0}function C(e,t,r,n,s){var i=new Uint8Array(32);w(i,n,s,v);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return T(e,t,r,o,i)}function S(e,t,r,n,s,i,o){var a=new Uint8Array(32);w(a,i,o,v);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=i[l+16];return k(e,t,r,n,s,c,a)}var _=function(e){var t,r,n,s,i,o,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),s=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|s<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(s>>>4|i<<12),this.r[5]=i>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|o<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,r,n,s,i){var o=new _(i);return o.update(r,n,s),o.finish(e,t),0}function E(e,t,r,n,s,i){var o=new Uint8Array(16);return A(o,0,r,n,s,i),m(e,t,o,0)}function M(e,t,r,n,s){var i;if(r<32)return-1;for(S(e,0,t,0,r,n,s),A(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function P(e,t,r,n,s){var i,o=new Uint8Array(32);if(r<32)return-1;if(C(o,0,32,n,s),0!==E(t,16,t,32,r-32,o))return-1;for(S(e,0,t,0,r,n,s),i=0;i<32;i++)e[i]=0;return 0}function N(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function O(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function x(e,t,r){for(var n,s=~(r-1),i=0;i<16;i++)n=s&(e[i]^t[i]),e[i]^=n,t[i]^=n}function j(e,t){var n,s,i,o=r(),a=r();for(n=0;n<16;n++)a[n]=t[n];for(O(a),O(a),O(a),s=0;s<2;s++){for(o[0]=a[0]-65517,n=1;n<15;n++)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,x(a,o,1-i)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function I(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return j(r,e),j(n,t),y(r,0,n,0)}function R(e){var t=new Uint8Array(32);return j(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function B(e,t,r){var n,s,i=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,p=0,f=0,g=0,m=0,y=0,b=0,w=0,v=0,k=0,T=0,C=0,S=0,_=0,A=0,E=0,M=0,P=0,N=0,O=0,x=0,j=0,I=0,R=0,L=r[0],D=r[1],U=r[2],B=r[3],$=r[4],F=r[5],q=r[6],K=r[7],z=r[8],H=r[9],G=r[10],V=r[11],W=r[12],Y=r[13],J=r[14],Q=r[15];i+=(n=t[0])*L,o+=n*D,a+=n*U,c+=n*B,l+=n*$,u+=n*F,h+=n*q,d+=n*K,p+=n*z,f+=n*H,g+=n*G,m+=n*V,y+=n*W,b+=n*Y,w+=n*J,v+=n*Q,o+=(n=t[1])*L,a+=n*D,c+=n*U,l+=n*B,u+=n*$,h+=n*F,d+=n*q,p+=n*K,f+=n*z,g+=n*H,m+=n*G,y+=n*V,b+=n*W,w+=n*Y,v+=n*J,k+=n*Q,a+=(n=t[2])*L,c+=n*D,l+=n*U,u+=n*B,h+=n*$,d+=n*F,p+=n*q,f+=n*K,g+=n*z,m+=n*H,y+=n*G,b+=n*V,w+=n*W,v+=n*Y,k+=n*J,T+=n*Q,c+=(n=t[3])*L,l+=n*D,u+=n*U,h+=n*B,d+=n*$,p+=n*F,f+=n*q,g+=n*K,m+=n*z,y+=n*H,b+=n*G,w+=n*V,v+=n*W,k+=n*Y,T+=n*J,C+=n*Q,l+=(n=t[4])*L,u+=n*D,h+=n*U,d+=n*B,p+=n*$,f+=n*F,g+=n*q,m+=n*K,y+=n*z,b+=n*H,w+=n*G,v+=n*V,k+=n*W,T+=n*Y,C+=n*J,S+=n*Q,u+=(n=t[5])*L,h+=n*D,d+=n*U,p+=n*B,f+=n*$,g+=n*F,m+=n*q,y+=n*K,b+=n*z,w+=n*H,v+=n*G,k+=n*V,T+=n*W,C+=n*Y,S+=n*J,_+=n*Q,h+=(n=t[6])*L,d+=n*D,p+=n*U,f+=n*B,g+=n*$,m+=n*F,y+=n*q,b+=n*K,w+=n*z,v+=n*H,k+=n*G,T+=n*V,C+=n*W,S+=n*Y,_+=n*J,A+=n*Q,d+=(n=t[7])*L,p+=n*D,f+=n*U,g+=n*B,m+=n*$,y+=n*F,b+=n*q,w+=n*K,v+=n*z,k+=n*H,T+=n*G,C+=n*V,S+=n*W,_+=n*Y,A+=n*J,E+=n*Q,p+=(n=t[8])*L,f+=n*D,g+=n*U,m+=n*B,y+=n*$,b+=n*F,w+=n*q,v+=n*K,k+=n*z,T+=n*H,C+=n*G,S+=n*V,_+=n*W,A+=n*Y,E+=n*J,M+=n*Q,f+=(n=t[9])*L,g+=n*D,m+=n*U,y+=n*B,b+=n*$,w+=n*F,v+=n*q,k+=n*K,T+=n*z,C+=n*H,S+=n*G,_+=n*V,A+=n*W,E+=n*Y,M+=n*J,P+=n*Q,g+=(n=t[10])*L,m+=n*D,y+=n*U,b+=n*B,w+=n*$,v+=n*F,k+=n*q,T+=n*K,C+=n*z,S+=n*H,_+=n*G,A+=n*V,E+=n*W,M+=n*Y,P+=n*J,N+=n*Q,m+=(n=t[11])*L,y+=n*D,b+=n*U,w+=n*B,v+=n*$,k+=n*F,T+=n*q,C+=n*K,S+=n*z,_+=n*H,A+=n*G,E+=n*V,M+=n*W,P+=n*Y,N+=n*J,O+=n*Q,y+=(n=t[12])*L,b+=n*D,w+=n*U,v+=n*B,k+=n*$,T+=n*F,C+=n*q,S+=n*K,_+=n*z,A+=n*H,E+=n*G,M+=n*V,P+=n*W,N+=n*Y,O+=n*J,x+=n*Q,b+=(n=t[13])*L,w+=n*D,v+=n*U,k+=n*B,T+=n*$,C+=n*F,S+=n*q,_+=n*K,A+=n*z,E+=n*H,M+=n*G,P+=n*V,N+=n*W,O+=n*Y,x+=n*J,j+=n*Q,w+=(n=t[14])*L,v+=n*D,k+=n*U,T+=n*B,C+=n*$,S+=n*F,_+=n*q,A+=n*K,E+=n*z,M+=n*H,P+=n*G,N+=n*V,O+=n*W,x+=n*Y,j+=n*J,I+=n*Q,v+=(n=t[15])*L,o+=38*(T+=n*U),a+=38*(C+=n*B),c+=38*(S+=n*$),l+=38*(_+=n*F),u+=38*(A+=n*q),h+=38*(E+=n*K),d+=38*(M+=n*z),p+=38*(P+=n*H),f+=38*(N+=n*G),g+=38*(O+=n*V),m+=38*(x+=n*W),y+=38*(j+=n*Y),b+=38*(I+=n*J),w+=38*(R+=n*Q),i=(n=(i+=38*(k+=n*D))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),v=(n=v+s+65535)-65536*(s=Math.floor(n/65536)),i=(n=(i+=s-1+37*(s-1))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),v=(n=v+s+65535)-65536*(s=Math.floor(n/65536)),i+=s-1+37*(s-1),e[0]=i,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=p,e[9]=f,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function $(e,t){B(e,t,t)}function F(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=253;n>=0;n--)$(s,s),2!==n&&4!==n&&B(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function q(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=250;n>=0;n--)$(s,s),1!==n&&B(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function K(e,t,n){var s,i,o=new Uint8Array(32),a=new Float64Array(80),l=r(),u=r(),h=r(),d=r(),p=r(),f=r();for(i=0;i<31;i++)o[i]=t[i];for(o[31]=127&t[31]|64,o[0]&=248,L(a,n),i=0;i<16;i++)u[i]=a[i],d[i]=l[i]=h[i]=0;for(l[0]=d[0]=1,i=254;i>=0;--i)x(l,u,s=o[i>>>3]>>>(7&i)&1),x(h,d,s),D(p,l,h),U(l,l,h),D(h,u,d),U(u,u,d),$(d,p),$(f,l),B(l,h,l),B(h,u,p),D(p,l,h),U(l,l,h),$(u,l),U(h,d,f),B(l,h,c),D(l,l,d),B(h,h,l),B(l,d,f),B(d,u,a),$(u,p),x(l,u,s),x(h,d,s);for(i=0;i<16;i++)a[i+16]=l[i],a[i+32]=h[i],a[i+48]=u[i],a[i+64]=d[i];var g=a.subarray(32),m=a.subarray(16);return F(g,g),B(m,m,g),j(e,m),0}function z(e,t){return K(e,t,i)}function H(e,t){return n(t,32),z(e,t)}function G(e,t,r){var n=new Uint8Array(32);return K(n,r,t),w(e,s,n,v)}_.prototype.blocks=function(e,t,r){for(var n,s,i,o,a,c,l,u,h,d,p,f,g,m,y,b,w,v,k,T=this.fin?0:2048,C=this.h[0],S=this.h[1],_=this.h[2],A=this.h[3],E=this.h[4],M=this.h[5],P=this.h[6],N=this.h[7],O=this.h[8],x=this.h[9],j=this.r[0],I=this.r[1],R=this.r[2],L=this.r[3],D=this.r[4],U=this.r[5],B=this.r[6],$=this.r[7],F=this.r[8],q=this.r[9];r>=16;)d=h=0,d+=(C+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*j,d+=(S+=8191&(n>>>13|(s=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*q),d+=(_+=8191&(s>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*F),d+=(A+=8191&(i>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*$),h=(d+=(E+=8191&(o>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*B))>>>13,d&=8191,d+=(M+=a>>>1&8191)*(5*U),d+=(P+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*D),d+=(N+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*L),d+=(O+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*R),p=h+=(d+=(x+=u>>>5|T)*(5*I))>>>13,p+=C*I,p+=S*j,p+=_*(5*q),p+=A*(5*F),h=(p+=E*(5*$))>>>13,p&=8191,p+=M*(5*B),p+=P*(5*U),p+=N*(5*D),p+=O*(5*L),h+=(p+=x*(5*R))>>>13,p&=8191,f=h,f+=C*R,f+=S*I,f+=_*j,f+=A*(5*q),h=(f+=E*(5*F))>>>13,f&=8191,f+=M*(5*$),f+=P*(5*B),f+=N*(5*U),f+=O*(5*D),g=h+=(f+=x*(5*L))>>>13,g+=C*L,g+=S*R,g+=_*I,g+=A*j,h=(g+=E*(5*q))>>>13,g&=8191,g+=M*(5*F),g+=P*(5*$),g+=N*(5*B),g+=O*(5*U),m=h+=(g+=x*(5*D))>>>13,m+=C*D,m+=S*L,m+=_*R,m+=A*I,h=(m+=E*j)>>>13,m&=8191,m+=M*(5*q),m+=P*(5*F),m+=N*(5*$),m+=O*(5*B),y=h+=(m+=x*(5*U))>>>13,y+=C*U,y+=S*D,y+=_*L,y+=A*R,h=(y+=E*I)>>>13,y&=8191,y+=M*j,y+=P*(5*q),y+=N*(5*F),y+=O*(5*$),b=h+=(y+=x*(5*B))>>>13,b+=C*B,b+=S*U,b+=_*D,b+=A*L,h=(b+=E*R)>>>13,b&=8191,b+=M*I,b+=P*j,b+=N*(5*q),b+=O*(5*F),w=h+=(b+=x*(5*$))>>>13,w+=C*$,w+=S*B,w+=_*U,w+=A*D,h=(w+=E*L)>>>13,w&=8191,w+=M*R,w+=P*I,w+=N*j,w+=O*(5*q),v=h+=(w+=x*(5*F))>>>13,v+=C*F,v+=S*$,v+=_*B,v+=A*U,h=(v+=E*D)>>>13,v&=8191,v+=M*L,v+=P*R,v+=N*I,v+=O*j,k=h+=(v+=x*(5*q))>>>13,k+=C*q,k+=S*F,k+=_*$,k+=A*B,h=(k+=E*U)>>>13,k&=8191,k+=M*D,k+=P*L,k+=N*R,k+=O*I,C=d=8191&(h=(h=((h+=(k+=x*j)>>>13)<<2)+h|0)+(d&=8191)|0),S=p+=h>>>=13,_=f&=8191,A=g&=8191,E=m&=8191,M=y&=8191,P=b&=8191,N=w&=8191,O=v&=8191,x=k&=8191,t+=16,r-=16;this.h[0]=C,this.h[1]=S,this.h[2]=_,this.h[3]=A,this.h[4]=E,this.h[5]=M,this.h[6]=P,this.h[7]=N,this.h[8]=O,this.h[9]=x},_.prototype.finish=function(e,t){var r,n,s,i,o=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this.h[i]+r,r=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,n=(1^r)-1,i=0;i<10;i++)o[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|o[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),s=this.h[0]+this.pad[0],this.h[0]=65535&s,i=1;i<8;i++)s=(this.h[i]+this.pad[i]|0)+(s>>>16)|0,this.h[i]=65535&s;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},_.prototype.update=function(e,t,r){var n,s;if(this.leftover){for((s=16-this.leftover)>r&&(s=r),n=0;n<s;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=s,t+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(s=r-r%16,this.blocks(e,t,s),t+=s,r-=s),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var V=M,W=P;var Y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function J(e,t,r,n){for(var s,i,o,a,c,l,u,h,d,p,f,g,m,y,b,w,v,k,T,C,S,_,A,E,M,P,N=new Int32Array(16),O=new Int32Array(16),x=e[0],j=e[1],I=e[2],R=e[3],L=e[4],D=e[5],U=e[6],B=e[7],$=t[0],F=t[1],q=t[2],K=t[3],z=t[4],H=t[5],G=t[6],V=t[7],W=0;n>=128;){for(T=0;T<16;T++)C=8*T+W,N[T]=r[C+0]<<24|r[C+1]<<16|r[C+2]<<8|r[C+3],O[T]=r[C+4]<<24|r[C+5]<<16|r[C+6]<<8|r[C+7];for(T=0;T<80;T++)if(s=x,i=j,o=I,a=R,c=L,l=D,u=U,B,d=$,p=F,f=q,g=K,m=z,y=H,b=G,V,A=65535&(_=V),E=_>>>16,M=65535&(S=B),P=S>>>16,A+=65535&(_=(z>>>14|L<<18)^(z>>>18|L<<14)^(L>>>9|z<<23)),E+=_>>>16,M+=65535&(S=(L>>>14|z<<18)^(L>>>18|z<<14)^(z>>>9|L<<23)),P+=S>>>16,A+=65535&(_=z&H^~z&G),E+=_>>>16,M+=65535&(S=L&D^~L&U),P+=S>>>16,S=Y[2*T],A+=65535&(_=Y[2*T+1]),E+=_>>>16,M+=65535&S,P+=S>>>16,S=N[T%16],E+=(_=O[T%16])>>>16,M+=65535&S,P+=S>>>16,M+=(E+=(A+=65535&_)>>>16)>>>16,A=65535&(_=k=65535&A|E<<16),E=_>>>16,M=65535&(S=v=65535&M|(P+=M>>>16)<<16),P=S>>>16,A+=65535&(_=($>>>28|x<<4)^(x>>>2|$<<30)^(x>>>7|$<<25)),E+=_>>>16,M+=65535&(S=(x>>>28|$<<4)^($>>>2|x<<30)^($>>>7|x<<25)),P+=S>>>16,E+=(_=$&F^$&q^F&q)>>>16,M+=65535&(S=x&j^x&I^j&I),P+=S>>>16,h=65535&(M+=(E+=(A+=65535&_)>>>16)>>>16)|(P+=M>>>16)<<16,w=65535&A|E<<16,A=65535&(_=g),E=_>>>16,M=65535&(S=a),P=S>>>16,E+=(_=k)>>>16,M+=65535&(S=v),P+=S>>>16,j=s,I=i,R=o,L=a=65535&(M+=(E+=(A+=65535&_)>>>16)>>>16)|(P+=M>>>16)<<16,D=c,U=l,B=u,x=h,F=d,q=p,K=f,z=g=65535&A|E<<16,H=m,G=y,V=b,$=w,T%16==15)for(C=0;C<16;C++)S=N[C],A=65535&(_=O[C]),E=_>>>16,M=65535&S,P=S>>>16,S=N[(C+9)%16],A+=65535&(_=O[(C+9)%16]),E+=_>>>16,M+=65535&S,P+=S>>>16,v=N[(C+1)%16],A+=65535&(_=((k=O[(C+1)%16])>>>1|v<<31)^(k>>>8|v<<24)^(k>>>7|v<<25)),E+=_>>>16,M+=65535&(S=(v>>>1|k<<31)^(v>>>8|k<<24)^v>>>7),P+=S>>>16,v=N[(C+14)%16],E+=(_=((k=O[(C+14)%16])>>>19|v<<13)^(v>>>29|k<<3)^(k>>>6|v<<26))>>>16,M+=65535&(S=(v>>>19|k<<13)^(k>>>29|v<<3)^v>>>6),P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,N[C]=65535&M|P<<16,O[C]=65535&A|E<<16;A=65535&(_=$),E=_>>>16,M=65535&(S=x),P=S>>>16,S=e[0],E+=(_=t[0])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[0]=x=65535&M|P<<16,t[0]=$=65535&A|E<<16,A=65535&(_=F),E=_>>>16,M=65535&(S=j),P=S>>>16,S=e[1],E+=(_=t[1])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[1]=j=65535&M|P<<16,t[1]=F=65535&A|E<<16,A=65535&(_=q),E=_>>>16,M=65535&(S=I),P=S>>>16,S=e[2],E+=(_=t[2])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[2]=I=65535&M|P<<16,t[2]=q=65535&A|E<<16,A=65535&(_=K),E=_>>>16,M=65535&(S=R),P=S>>>16,S=e[3],E+=(_=t[3])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[3]=R=65535&M|P<<16,t[3]=K=65535&A|E<<16,A=65535&(_=z),E=_>>>16,M=65535&(S=L),P=S>>>16,S=e[4],E+=(_=t[4])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[4]=L=65535&M|P<<16,t[4]=z=65535&A|E<<16,A=65535&(_=H),E=_>>>16,M=65535&(S=D),P=S>>>16,S=e[5],E+=(_=t[5])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[5]=D=65535&M|P<<16,t[5]=H=65535&A|E<<16,A=65535&(_=G),E=_>>>16,M=65535&(S=U),P=S>>>16,S=e[6],E+=(_=t[6])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[6]=U=65535&M|P<<16,t[6]=G=65535&A|E<<16,A=65535&(_=V),E=_>>>16,M=65535&(S=B),P=S>>>16,S=e[7],E+=(_=t[7])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&_)>>>16)>>>16)>>>16,e[7]=B=65535&M|P<<16,t[7]=V=65535&A|E<<16,W+=128,n-=128}return n}function Q(e,t,r){var n,s=new Int32Array(8),i=new Int32Array(8),o=new Uint8Array(256),a=r;for(s[0]=1779033703,s[1]=3144134277,s[2]=1013904242,s[3]=2773480762,s[4]=1359893119,s[5]=2600822924,s[6]=528734635,s[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,J(s,i,t,r),r%=128,n=0;n<r;n++)o[n]=t[a-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,f(o,r-8,a/536870912|0,a<<3),J(s,i,o,r),n=0;n<8;n++)f(e,8*n,s[n],i[n]);return 0}function Z(e,t){var n=r(),s=r(),i=r(),o=r(),a=r(),c=r(),l=r(),h=r(),d=r();U(n,e[1],e[0]),U(d,t[1],t[0]),B(n,n,d),D(s,e[0],e[1]),D(d,t[0],t[1]),B(s,s,d),B(i,e[3],t[3]),B(i,i,u),B(o,e[2],t[2]),D(o,o,o),U(a,s,n),U(c,o,i),D(l,o,i),D(h,s,n),B(e[0],a,c),B(e[1],h,l),B(e[2],l,c),B(e[3],a,h)}function X(e,t,r){var n;for(n=0;n<4;n++)x(e[n],t[n],r)}function ee(e,t){var n=r(),s=r(),i=r();F(i,t[2]),B(n,t[0],i),B(s,t[1],i),j(e,s),e[31]^=R(n)<<7}function te(e,t,r){var n,s;for(N(e[0],o),N(e[1],a),N(e[2],a),N(e[3],o),s=255;s>=0;--s)X(e,t,n=r[s/8|0]>>(7&s)&1),Z(t,e),Z(e,e),X(e,t,n)}function re(e,t){var n=[r(),r(),r(),r()];N(n[0],h),N(n[1],d),N(n[2],a),B(n[3],h,d),te(e,n,t)}function ne(e,t,s){var i,o=new Uint8Array(64),a=[r(),r(),r(),r()];for(s||n(t,32),Q(o,t,32),o[0]&=248,o[31]&=127,o[31]|=64,re(a,o),ee(e,a),i=0;i<32;i++)t[i+32]=e[i];return 0}var se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,s,i;for(n=63;n>=32;--n){for(r=0,s=n-32,i=n-12;s<i;++s)t[s]+=r-16*t[n]*se[s-(n-32)],r=Math.floor((t[s]+128)/256),t[s]-=256*r;t[s]+=r,t[n]=0}for(r=0,s=0;s<32;s++)t[s]+=r-(t[31]>>4)*se[s],r=t[s]>>8,t[s]&=255;for(s=0;s<32;s++)t[s]-=r*se[s];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function ae(e,t,n,s){var i,o,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),h=[r(),r(),r(),r()];Q(a,s,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=n+64;for(i=0;i<n;i++)e[64+i]=t[i];for(i=0;i<32;i++)e[32+i]=a[32+i];for(Q(l,e.subarray(32),n+32),oe(l),re(h,l),ee(e,h),i=32;i<64;i++)e[i]=s[i];for(Q(c,e,n+64),oe(c),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=l[i];for(i=0;i<32;i++)for(o=0;o<32;o++)u[i+o]+=c[i]*a[o];return ie(e.subarray(32),u),d}function ce(e,t,n,s){var i,c=new Uint8Array(32),u=new Uint8Array(64),h=[r(),r(),r(),r()],d=[r(),r(),r(),r()];if(n<64)return-1;if(function(e,t){var n=r(),s=r(),i=r(),c=r(),u=r(),h=r(),d=r();return N(e[2],a),L(e[1],t),$(i,e[1]),B(c,i,l),U(i,i,e[2]),D(c,e[2],c),$(u,c),$(h,u),B(d,h,u),B(n,d,i),B(n,n,c),q(n,n),B(n,n,i),B(n,n,c),B(n,n,c),B(e[0],n,c),$(s,e[0]),B(s,s,c),I(s,i)&&B(e[0],e[0],p),$(s,e[0]),B(s,s,c),I(s,i)?-1:(R(e[0])===t[31]>>7&&U(e[0],o,e[0]),B(e[3],e[0],e[1]),0)}(d,s))return-1;for(i=0;i<n;i++)e[i]=t[i];for(i=0;i<32;i++)e[i+32]=s[i];if(Q(u,e,n),oe(u),te(h,d,u),re(d,t.subarray(32)),Z(h,d),ee(c,h),n-=64,y(t,0,c,0)){for(i=0;i<n;i++)e[i]=0;return-1}for(i=0;i<n;i++)e[i]=t[i+64];return n}var le=16,ue=64,he=32,de=64;function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function fe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}t.lowlevel={crypto_core_hsalsa20:w,crypto_stream_xor:S,crypto_stream:C,crypto_stream_salsa20_xor:k,crypto_stream_salsa20:T,crypto_onetimeauth:A,crypto_onetimeauth_verify:E,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:M,crypto_secretbox_open:P,crypto_scalarmult:K,crypto_scalarmult_base:z,crypto_box_beforenm:G,crypto_box_afternm:V,crypto_box:function(e,t,r,n,s,i){var o=new Uint8Array(32);return G(o,s,i),V(e,t,r,n,o)},crypto_box_open:function(e,t,r,n,s,i){var o=new Uint8Array(32);return G(o,s,i),W(e,t,r,n,o)},crypto_box_keypair:H,crypto_hash:Q,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:le,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:he,crypto_sign_SECRETKEYBYTES:de,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:r,D:l,L:se,pack25519:j,unpack25519:L,M:B,A:D,S:$,Z:U,pow2523:q,add:Z,set25519:N,modL:ie,scalarmult:te,scalarbase:re},t.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},t.secretbox=function(e,t,r){fe(e,t,r),pe(r,t);for(var n=new Uint8Array(32+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+32]=e[i];return M(s,n,n.length,t,r),s.subarray(le)},t.secretbox.open=function(e,t,r){fe(e,t,r),pe(r,t);for(var n=new Uint8Array(le+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+le]=e[i];return n.length<32||0!==P(s,n,n.length,t,r)?null:s.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=le,t.scalarMult=function(e,t){if(fe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return K(r,e,t),r},t.scalarMult.base=function(e){if(fe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return z(t,e),t},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox(e,r,i)},t.box.before=function(e,t){fe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return G(r,e,t),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox.open(e,r,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return H(e,t),{publicKey:e,secretKey:t}},t.box.keyPair.fromSecretKey=function(e){if(fe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return z(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(e,t){if(fe(e,t),t.length!==de)throw new Error("bad secret key size");var r=new Uint8Array(ue+e.length);return ae(r,e,e.length,t),r},t.sign.open=function(e,t){if(fe(e,t),t.length!==he)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var s=new Uint8Array(n),i=0;i<s.length;i++)s[i]=r[i];return s},t.sign.detached=function(e,r){for(var n=t.sign(e,r),s=new Uint8Array(ue),i=0;i<s.length;i++)s[i]=n[i];return s},t.sign.detached.verify=function(e,t,r){if(fe(e,t,r),t.length!==ue)throw new Error("bad signature size");if(r.length!==he)throw new Error("bad public key size");var n,s=new Uint8Array(ue+e.length),i=new Uint8Array(ue+e.length);for(n=0;n<ue;n++)s[n]=t[n];for(n=0;n<e.length;n++)s[n+ue]=e[n];return ce(i,s,s.length,r)>=0},t.sign.keyPair=function(){var e=new Uint8Array(he),t=new Uint8Array(de);return ne(e,t),{publicKey:e,secretKey:t}},t.sign.keyPair.fromSecretKey=function(e){if(fe(e),e.length!==de)throw new Error("bad secret key size");for(var t=new Uint8Array(he),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},t.sign.keyPair.fromSeed=function(e){if(fe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(he),r=new Uint8Array(de),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},t.sign.publicKeyLength=he,t.sign.secretKeyLength=de,t.sign.seedLength=32,t.sign.signatureLength=ue,t.hash=function(e){fe(e);var t=new Uint8Array(64);return Q(t,e,e.length),t},t.hash.hashLength=64,t.verify=function(e,t){return fe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},t.setPRNG=function(e){n=e},function(){var r="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(r&&r.getRandomValues){t.setPRNG((function(e,t){var n,s=new Uint8Array(t);for(n=0;n<t;n+=65536)r.getRandomValues(s.subarray(n,n+Math.min(t-n,65536)));for(n=0;n<t;n++)e[n]=s[n];ge(s)}))}else void 0!==e&&(r=e("crypto"))&&r.randomBytes&&t.setPRNG((function(e,t){var n,s=r.randomBytes(t);for(n=0;n<t;n++)e[n]=s[n];ge(s)}))}()}(void 0!==t&&t.exports?t.exports:self.nacl=self.nacl||{})}}},{package:"eth-sig-util>tweetnacl",file:"node_modules/tweetnacl/nacl-fast.js"}],[3866,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/concat.js"}],[3867,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/equals.js"}],[3868,{multibase:3469},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextEncoder;t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.encode(e):"ascii"===t?function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e):n(t).decode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/from-string.js"}],[3869,{multibase:3469},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextDecoder("utf8");t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.decode(e):"ascii"===t?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):n(t).encode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/to-string.js"}],[39,{loglevel:3454},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){const e=[];return function(t,r,n,i){return e.indexOf(t.id)>=0?(s.default.info(`RPC request with id ${t.id} already seen.`),i()):(e.push(t.id),n())}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterMiddleware.js"}],[3911,{builtins:2200},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=new RegExp("^(?:@([^/]+?)[/])?([^/]+?)$"),s=e("builtins"),i=["node_modules","favicon.ico"];var o=function(e,t){var r={validForNewPackages:0===t.length&&0===e.length,validForOldPackages:0===t.length,warnings:e,errors:t};return r.warnings.length||delete r.warnings,r.errors.length||delete r.errors,r};t.exports=function(e){var t=[],r=[];if(null===e)return r.push("name cannot be null"),o(t,r);if(e===undefined)return r.push("name cannot be undefined"),o(t,r);if("string"!=typeof e)return r.push("name must be a string"),o(t,r);if(e.length||r.push("name length must be greater than zero"),e.match(/^\./)&&r.push("name cannot start with a period"),e.match(/^_/)&&r.push("name cannot start with an underscore"),e.trim()!==e&&r.push("name cannot contain leading or trailing spaces"),i.forEach((function(t){e.toLowerCase()===t&&r.push(t+" is a blacklisted name")})),s({version:"*"}).forEach((function(r){e.toLowerCase()===r&&t.push(r+" is a core module name")})),e.length>214&&t.push("name can no longer contain more than 214 characters"),e.toLowerCase()!==e&&t.push("name can no longer contain capital letters"),/[~'!()*]/.test(e.split("/").slice(-1)[0])&&t.push('name can no longer contain special characters ("~\'!()*")'),encodeURIComponent(e)!==e){var a=e.match(n);if(a){var c=a[1],l=a[2];if(encodeURIComponent(c)===c&&encodeURIComponent(l)===l)return o(t,r)}r.push("name can only contain URL-friendly characters")}return o(t,r)}}}},{package:"@metamask/snaps-utils>validate-npm-package-name",file:"node_modules/validate-npm-package-name/lib/index.js"}],[3921,{util:2194},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,r.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding",file:"node_modules/web-encoding/src/lib.js"}],[3931,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(e.WHATWGFetch={})}(this,(function(e){var t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==t&&t,r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in t,o="ArrayBuffer"in t;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&s&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(g)}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=f(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=u(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,s=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(s))}})),t}function k(e,t){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===undefined?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===undefined?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];k.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(r,n){return new Promise((function(i,a){var c=new w(r,n);if(c.signal&&c.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function h(){l.abort()}l.onload=function(){var e,t,r={status:l.status,statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var s=r.join(":").trim();t.append(n,s)}})),t)};r.url="responseURL"in l?l.responseURL:r.headers.get("X-Request-URL");var n="response"in l?l.response:l.responseText;setTimeout((function(){i(new k(n,r))}),0)},l.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},l.onabort=function(){setTimeout((function(){a(new e.DOMException("Aborted","AbortError"))}),0)},l.open(c.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?l.withCredentials=!0:"omit"===c.credentials&&(l.withCredentials=!1),"responseType"in l&&(s?l.responseType="blob":o&&c.headers.get("Content-Type")&&-1!==c.headers.get("Content-Type").indexOf("application/octet-stream")&&(l.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof d?c.headers.forEach((function(e,t){l.setRequestHeader(t,e)})):Object.getOwnPropertyNames(n.headers).forEach((function(e){l.setRequestHeader(e,u(n.headers[e]))})),c.signal&&(c.signal.addEventListener("abort",h),l.onreadystatechange=function(){4===l.readyState&&c.signal.removeEventListener("abort",h)}),l.send(void 0===c._bodyInit?null:c._bodyInit)}))}C.polyfill=!0,t.fetch||(t.fetch=C,t.Headers=d,t.Request=w,t.Response=k),e.Headers=d,e.Request=w,e.Response=k,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"@metamask/smart-transactions-controller>isomorphic-fetch>whatwg-fetch",file:"node_modules/whatwg-fetch/dist/fetch.umd.js"}],[3944,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=r.AUTO_LOCK_TIMEOUT_ALARM=void 0;r.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM";r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$",file:"shared/constants/alarms.js"}],[3958,{"./time":3962},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=void 0;const n=10*e("./time").SECOND;r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=n;r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=180;r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=2}}},{package:"$root$",file:"shared/constants/smartTransactions.js"}],[3961,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ACTION_QUEUE_METRICS_E2E_TEST=void 0;r.ACTION_QUEUE_METRICS_E2E_TEST="action_queue_metrics_e2e_test"}}},{package:"$root$",file:"shared/constants/test-flags.js"}],[4,{"../../../shared/modules/hexstring-utils":3982,"../lib/util":80,"@ethersproject/hdnode":470,"ethereumjs-util":2623,"ethereumjs-wallet":2629,"ethereumjs-wallet/thirdparty":2644,loglevel:3454},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@ethersproject/hdnode"),s=e("ethereumjs-util"),i=u(e("ethereumjs-wallet")),o=u(e("ethereumjs-wallet/thirdparty")),a=u(e("loglevel")),c=e("../../../shared/modules/hexstring-utils"),l=e("../lib/util");function u(e){return e&&e.__esModule?e:{default:e}}var h={async importAccount(e,t){return(0,this.strategies[e])(...t)},strategies:{"Private Key":e=>{if(!e)throw new Error("Cannot import an empty key.");if((0,n.isValidMnemonic)(e.trim()))throw new Error("t('importAccountErrorIsSRP')");const t=e.replace(/\s+/gu,""),r=(0,l.addHexPrefix)(t);let i;try{i=(0,s.toBuffer)(r)}catch(e){throw new Error("t('importAccountErrorNotHexadecimal')")}try{if(!(0,s.isValidPrivate)(i)||66!==(0,s.getBinarySize)(r))throw new Error("t('importAccountErrorNotAValidPrivateKey')")}catch(e){throw new Error("t('importAccountErrorNotAValidPrivateKey')")}return(0,c.stripHexPrefix)(r)},"JSON File":(e,t)=>{let r;try{r=o.default.fromEtherWallet(e,t)}catch(n){a.default.debug("Attempt to import as EtherWallet format failed, trying V3"),r=i.default.fromV3(e,t,!0)}return function(e){const t=e.getPrivateKey();return(0,s.bufferToHex)(t)}(r)}}};r.default=h}}},{package:"$root$",file:"app/scripts/account-import-strategies/index.js"}],[40,{loglevel:3454},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){n((n=>{r.error&&s.default.error("Error in RPC response:\n",r),t.isMetamaskInternal||(s.default.info(`RPC (${e.origin}):`,t,"->",r),n())}))}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[41,{"../../../shared/modules/mv3.utils":3984,"eth-rpc-errors":2587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../shared/modules/mv3.utils");var i=(e,t,r,i)=>async o=>{if(t._writableState.ended)return;if(!e[o.method])return void t.write({jsonrpc:"2.0",error:n.ethErrors.rpc.methodNotFound({message:`${o.method} not found`}),id:o.id});let a,c;try{a=await e[o.method](...o.params)}catch(e){c=e}finally{s.isManifestV3&&r&&"getState"!==o.method&&i.set(r.getState())}t._writableState.ended?c&&console.error(c):c?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(c,{shouldIncludeStack:!0}),id:o.id}):t.write({jsonrpc:"2.0",result:a,id:o.id})};r.default=i}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[42,{"./middleware/pending":57,"@metamask/eth-json-rpc-middleware":1161,"json-rpc-engine":3239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({version:e,getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:c,processTypedMessageV4:l,processPersonalMessage:u,processDecryptMessage:h,processEncryptionPublicKey:d,getPendingNonce:p,getPendingTransactionByHash:f}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,s.createWalletMiddleware)({getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:c,processTypedMessageV4:l,processPersonalMessage:u,processDecryptMessage:h,processEncryptionPublicKey:d}),(0,i.createPendingNonceMiddleware)({getPendingNonce:p}),(0,i.createPendingTxMiddleware)({getPendingTransactionByHash:f})])};var n=e("json-rpc-engine"),s=e("@metamask/eth-json-rpc-middleware"),i=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[43,{loglevel:3454,"webextension-polyfill":3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({location:e,registerOnboarding:t}){return async function(r,i,o,a){try{if("wallet_registerOnboarding"!==r.method)return void o();r.tabId&&r.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,r.tabId):n.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),i.result=!0,a()}catch(e){a(e)}}};var n=i(e("loglevel")),s=i(e("webextension-polyfill"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[44,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.origin=e.origin,n()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[45,{"../../../shared/constants/app":3946,"../../../shared/constants/metametrics":3953,"../../../shared/constants/time":3962,"../../../shared/constants/transaction":3964,"@metamask/controller-utils":1090,"eth-rpc-errors":2587,"ethereumjs-util":2623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({trackEvent:e,getMetricsState:t,rateLimitSeconds:r=300,securityProviderRequest:f}){return async function(g,m,y){const{origin:b,method:w}=g,v=h[w]??u.RATE_LIMITED,k=v===u.RATE_LIMITED&&void 0!==p[w],T=!0===t().participateInMetaMetrics,C=d[w],S={},_=b!==o.ORIGIN_METAMASK&&v!==u.BLOCKED&&!1===k&&!0===T;if(_){const t=C?C.REQUESTED:l.MetaMetricsEventName.ProviderMethodCalled;if(t===l.MetaMetricsEventName.SignatureRequested){var A,E;let e,t;var M,P,N,O;if(S.signature_type=w,(0,i.isValidAddress)(null==g||null===(A=g.params)||void 0===A?void 0:A[1]))e=null==g||null===(M=g.params)||void 0===M?void 0:M[0],t=null==g||null===(P=g.params)||void 0===P?void 0:P[1];else e=null==g||null===(N=g.params)||void 0===N?void 0:N[1],t=null==g||null===(O=g.params)||void 0===O?void 0:O[0];const r={msgParams:{...null==g||null===(E=g.params)||void 0===E?void 0:E[2],from:t,data:e,origin:b},status:a.TransactionStatus.unapproved,type:g.method};try{const t=await f(r,g.method);if(1===(null==t?void 0:t.flagAsDangerous)?S.ui_customizations=[l.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:2===(null==t?void 0:t.flagAsDangerous)&&(S.ui_customizations=[l.MetaMetricsEventUiCustomization.FlaggedAsSafetyUnknown]),w===o.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,s.detectSIWE)({data:e});t&&(S.ui_customizations=(S.ui_customizations||[]).concat(l.MetaMetricsEventUiCustomization.Siwe))}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Error calling securityProviderRequest - ${e}`)}}else S.method=w;e({event:t,category:l.MetaMetricsEventCategory.InpageProvider,referrer:{url:b},properties:S}),p[w]=setTimeout((()=>{delete p[w]}),c.SECOND*r)}y((async t=>{var r,s;if(!1===_||void 0===C)return t();let i;return w===o.MESSAGE_TYPE.ETH_SIGN&&(null===(r=m.error)||void 0===r?void 0:r.code)===n.errorCodes.rpc.methodNotFound?(i=C.FAILED,S.error=m.error):i=(null===(s=m.error)||void 0===s?void 0:s.code)===n.errorCodes.provider.userRejectedRequest?C.REJECTED:C.APPROVED,e({event:i,category:l.MetaMetricsEventCategory.InpageProvider,referrer:{url:b},properties:S}),t()}))}};var n=e("eth-rpc-errors"),s=e("@metamask/controller-utils"),i=e("ethereumjs-util"),o=e("../../../shared/constants/app"),a=e("../../../shared/constants/transaction"),c=e("../../../shared/constants/time"),l=e("../../../shared/constants/metametrics");const u={RATE_LIMITED:"rate_limited",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited"},h={[o.MESSAGE_TYPE.ETH_SIGN]:u.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:u.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:u.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:u.NON_RATE_LIMITED,[o.MESSAGE_TYPE.PERSONAL_SIGN]:u.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_DECRYPT]:u.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:u.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:u.RATE_LIMITED,[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:u.RATE_LIMITED,[o.MESSAGE_TYPE.SEND_METADATA]:u.BLOCKED,[o.MESSAGE_TYPE.GET_PROVIDER_STATE]:u.BLOCKED},d={[o.MESSAGE_TYPE.ETH_SIGN]:{APPROVED:l.MetaMetricsEventName.SignatureApproved,FAILED:l.MetaMetricsEventName.SignatureFailed,REJECTED:l.MetaMetricsEventName.SignatureRejected,REQUESTED:l.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:l.MetaMetricsEventName.SignatureApproved,REJECTED:l.MetaMetricsEventName.SignatureRejected,REQUESTED:l.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:l.MetaMetricsEventName.SignatureApproved,REJECTED:l.MetaMetricsEventName.SignatureRejected,REQUESTED:l.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:l.MetaMetricsEventName.SignatureApproved,REJECTED:l.MetaMetricsEventName.SignatureRejected,REQUESTED:l.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:l.MetaMetricsEventName.SignatureApproved,REJECTED:l.MetaMetricsEventName.SignatureRejected,REQUESTED:l.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:l.MetaMetricsEventName.DecryptionApproved,REJECTED:l.MetaMetricsEventName.DecryptionRejected,REQUESTED:l.MetaMetricsEventName.DecryptionRequested},[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:l.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:l.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:l.MetaMetricsEventName.EncryptionPublicKeyRequested},[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:l.MetaMetricsEventName.PermissionsApproved,REJECTED:l.MetaMetricsEventName.PermissionsRejected,REQUESTED:l.MetaMetricsEventName.PermissionsRequested},[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:l.MetaMetricsEventName.PermissionsApproved,REJECTED:l.MetaMetricsEventName.PermissionsRejected,REQUESTED:l.MetaMetricsEventName.PermissionsRequested}},p={}}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[46,{"promise-to-callback":3551,"readable-stream":3743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return new o(e,t)};var n,s=e("readable-stream"),i=(n=e("promise-to-callback"))&&n.__esModule?n:{default:n};class o extends s.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,r){(0,i.default)(this._asyncWriteFn(e,t))(r)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[47,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.tabId=e.tabId,n()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[48,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}];r.default=n}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[49,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}];r.default=n}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[50,{"./contracts/registry":48,"./contracts/resolver":49,"@ensdomains/content-hash":307,"eth-ens-namehash":2483,"ethjs-contract":2654,"ethjs-query":2658},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=async function({provider:e,name:t}){const r=new s.default(e),l=n.default.hash(t),h=new i.default(r),d=Number.parseInt(await r.net_version(),10),p=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(d);if(!p)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${d}"`);const f=h(a.default).at(p),g=(await f.resolver(l))[0];if(u(g))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const m=h(c.default).at(g),y=await m.supportsInterface("0xbc1c58d1"),b=await m.supportsInterface("0xd8389dc5");if(y[0]){const e=(await m.contenthash(l))[0];let t=o.default.decode(e);const r=o.default.getCodec(e);return"ipfs-ns"!==r&&"ipns-ns"!==r||(t=o.default.helpers.cidV0ToV1Base32(t)),{type:r,hash:t}}if(b[0]){const e=(await m.content(l))[0];if(u(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var n=l(e("eth-ens-namehash")),s=l(e("ethjs-query")),i=l(e("ethjs-contract")),o=l(e("@ensdomains/content-hash")),a=l(e("./contracts/registry")),c=l(e("./contracts/resolver"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[51,{"../../../../shared/modules/fetch-with-timeout":3980,"./resolver":50,"base32-encode":2087,"base64-js":2088,"webextension-polyfill":3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:r}){const o=u.map((e=>`*://*.${e}/*`));return i.default.webRequest.onErrorOccurred.addListener(c,{urls:o,types:["main_frame"]}),{remove(){i.default.webRequest.onErrorOccurred.removeListener(c)}};async function c(o){const{tabId:c,url:h}=o;if(-1===c||"0x1"!==t())return;const{hostname:d,pathname:p,search:f,hash:g}=new URL(h),m=d.split("."),y=m[m.length-1];u.includes(y)&&async function({tabId:t,name:o,pathname:c,search:u,fragment:h}){const d=r();i.default.tabs.update(t,{url:"loading.html"});let p=`https://app.ens.domains/name/${o}`;try{const{type:t,hash:r}=await(0,a.default)({provider:e,name:o});if("ipfs-ns"===t||"ipns-ns"===t){const e=`https://${r}.${t.slice(0,4)}.${d}${c}${u||""}${h||""}`;try{200===(await l(e,{method:"HEAD"})).status&&(p=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)p=`https://swarm-gateways.net/bzz:/${r}${c}${u||""}${h||""}`;else if("onion"===t||"onion3"===t)p=`http://${r}.onion${c}${u||""}${h||""}`;else if("zeronet"===t)p=`http://127.0.0.1:43110/${r}${c}${u||""}${h||""}`;else if("skynet-ns"===t){const e=r.padEnd(r.length+4-r.length%4,"="),t=s.default.toByteArray(e),i={padding:!1};p=`https://${(0,n.default)(t,"RFC4648-HEX",i).toLowerCase()}.siasky.net${c}${u||""}${h||""}`}}catch(e){console.warn(e)}finally{i.default.tabs.update(t,{url:p})}}({tabId:c,name:d,pathname:p,search:f,fragment:g})}};var n=c(e("base32-encode")),s=c(e("base64-js")),i=c(e("webextension-polyfill")),o=c(e("../../../../shared/modules/fetch-with-timeout")),a=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const l=(0,o.default)(),u=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[54,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return s((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function s(e={},t){return Object.entries(e).forEach((([r,n])=>{e[r]="object"==typeof n&&null!==n?s(n,t):t(n)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[557,{"@ethereumjs/tx":380,"@ethereumjs/util":404,"@keystonehq/bc-ur-registry-eth":563,buffer:2187,hdkey:3197,rlp:560,uuid:3895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("hdkey")),i=e("@ethereumjs/util"),o=n(e("rlp")),a=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),l=e("uuid");const u="QR Hardware Wallet Device",h="m",d="0/*";var p,f;!function(e){e.hd="hd",e.pubkey="pubkey"}(p||(p={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(f||(f={}));class g{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=u,this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),o=s.getSignature();if(i){if(l.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n=`m/${e.getOrigin().getPath()}`,s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),i=(null==(r=e.getChildren())?void 0:r.getPath())||d,o=e.getName();if(e.getNote()===f.standard?this.keyringAccount=f.standard:e.getNote()===f.ledger_legacy&&(this.keyringAccount=f.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const a=e.getBip32Key();this.xfp=s,this.xpub=a,this.hdPath=n,this.childrenPath=i,o!==undefined&&""!==o&&(this.name=o),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r=`M/${t.getOrigin().getPath()}`,n="0x"+i.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===f.ledger_live&&(this.keyringAccount=f.ledger_live),this.paths[i.toChecksumAddress(n)]===undefined&&(s=!0),this.paths[i.toChecksumAddress(n)]=r}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(h,e);n.push({address:t,balance:null,index:e}),this.indexes[i.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(h,e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===p.hd){this.checkKeyring(),this.hdk||(this.hdk=s.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),o="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(o)}{const e=Object.keys(this.paths)[t];if(e)return i.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=p.hd,this.keyringAccount=f.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=d,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===c.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=p.hd,this.__readCryptoHDKey(e)):(this.keyringMode=p.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||p.hd,this.keyringAccount=e.keyringAccount||f.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||d)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(h,e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===p.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?c.DataType.transaction:c.DataType.typedTransaction;let s;s=0===r.type?t.from(o.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),u=Number(r.common.chainId()),h=l.v4(),d=c.EthSignRequest.constructETHRequest(s,n,i,this.xfp,h,u),{r:p,s:f,v:g}=await this.requestSignature(h,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return a.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=i.stripHexPrefix(r),s=await this._pathFromAddress(e),o=l.v4(),a=c.EthSignRequest.constructETHRequest(t.from(n,"hex"),c.DataType.personalMessage,s,this.xfp,o,undefined,e),{r:u,s:h,v:d}=await this.requestSignature(o,a,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([u,h,d]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=l.v4(),i=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),c.DataType.typedData,n,this.xfp,s,undefined,e),{r:o,s:a,v:u}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,a,u]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===p.hd){const t=i.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(h,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=i.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}g.type=u,r.BaseKeyring=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[558,{"@ethereumjs/tx":380,"@ethereumjs/util":404,"@keystonehq/bc-ur-registry-eth":563,buffer:2187,hdkey:3197,rlp:560,uuid:3895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s,i,o=n(e("hdkey")),a=e("@ethereumjs/util"),c=n(e("rlp")),l=e("@ethereumjs/tx"),u=e("@keystonehq/bc-ur-registry-eth"),h=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(s||(s={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(i||(i={}));class d{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),o=s.getSignature();if(i&&h.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n="m/"+e.getOrigin().getPath(),s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),o=(null==(r=e.getChildren())?void 0:r.getPath())||"0/*",a=e.getName();if(e.getNote()===i.standard?this.keyringAccount=i.standard:e.getNote()===i.ledger_legacy&&(this.keyringAccount=i.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const c=e.getBip32Key();this.xfp=s,this.xpub=c,this.hdPath=n,this.childrenPath=o,void 0!==a&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r="M/"+t.getOrigin().getPath(),n="0x"+a.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===i.ledger_live&&(this.keyringAccount=i.ledger_live),void 0===this.paths[a.toChecksumAddress(n)]&&(s=!0),this.paths[a.toChecksumAddress(n)]=r}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e}),this.indexes[a.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===s.hd){this.checkKeyring(),this.hdk||(this.hdk=o.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),s="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(s)}{const e=Object.keys(this.paths)[t];if(e)return a.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=s.hd,this.keyringAccount=i.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===u.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=s.hd,this.__readCryptoHDKey(e)):(this.keyringMode=s.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||s.hd,this.keyringAccount=e.keyringAccount||i.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===s.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?u.DataType.transaction:u.DataType.typedTransaction;let s;s=0===r.type?t.from(c.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),o=Number(r.common.chainId()),a=h.v4(),d=u.EthSignRequest.constructETHRequest(s,n,i,this.xfp,a,o),{r:p,s:f,v:g}=await this.requestSignature(a,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return l.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=a.stripHexPrefix(r),s=await this._pathFromAddress(e),i=h.v4(),o=u.EthSignRequest.constructETHRequest(t.from(n,"hex"),u.DataType.personalMessage,s,this.xfp,i,void 0,e),{r:c,s:l,v:d}=await this.requestSignature(i,o,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([c,l,d]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=h.v4(),i=u.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),u.DataType.typedData,n,this.xfp,s,void 0,e),{r:o,s:a,v:c}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,a,c]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===s.hd){const t=a.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=a.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}d.type="QR Hardware Wallet Device",r.BaseKeyring=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[559,{"./base-eth-keyring.cjs.development.js":557,"./base-eth-keyring.cjs.production.min.js":558},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[560,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(n(e[r]));const r=p(...t);return p(o(r.length,192),r)}const t=y(e);return 1===t.length&&t[0]<128?t:p(o(t.length,128),t)}function s(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return h(u(e))}function o(e,t){if(e<56)return Uint8Array.from([e+t]);const r=g(e),n=g(t+55+r.length/2);return Uint8Array.from(d(n+r))}function a(e,t=!1){if(!e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,o,a;const l=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(u<=183){if(t=u-127,n=128===u?Uint8Array.from([]):s(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(u<=191){if(r=u-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(s(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=s(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(u<=247){for(t=u-191,o=s(e,1,t);o.length;)a=c(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(t)}}{if(r=u-246,t=i(s(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(o=s(e,r,n);o.length;)a=c(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=a;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function h(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function d(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=h(e.slice(n,n+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function f(e){return(new TextEncoder).encode(e)}function g(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function m(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return m(e)?d((t="string"!=typeof(r=e)?r:m(r)?r.slice(2):r).length%2?`0${t}`:t):f(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?d(g(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:u,concatBytes:p,hexToBytes:d,utf8ToBytes:f};const b={encode:n,decode:a};r.default=b}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>rlp",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/rlp/dist/index.js"}],[57,{"../util":80,"json-rpc-engine":3239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:s,params:i}=t;if("eth_getTransactionCount"!==s)return void n();const[o,a]=i;"pending"===a?r.result=await e(o):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:o}=t;if("eth_getTransactionByHash"!==i)return void n();const[a]=o,c=e(a);c?r.result=(0,s.formatTxMetaForRpcResult)(c):n()}))};var n=e("json-rpc-engine"),s=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[58,{events:2188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("events"))&&n.__esModule?n:{default:n};class i extends s.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}r.default=i}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[587,{"./metamask-airgapped-keyring.cjs.development.js":588,"./metamask-airgapped-keyring.cjs.production.min.js":589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./metamask-airgapped-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/index.js"}],[588,{"@ethereumjs/tx":380,"@keystonehq/base-eth-keyring":559,"@keystonehq/bc-ur-registry-eth":563,"@metamask/obs-store":594,buffer:2187,events:2188,rlp:3760,uuid:3895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),l=e("@ethereumjs/tx"),u=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class h extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(`${e}-signed`),this.removeAllListeners(`${e}-canceled`)},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const o=e.toUR(),l=e.getRequestId(),u=c.stringify(l),h={requestId:u,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:h}}),this.once(`${u}-signed`,(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(`${u}-canceled`,(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},h.instance)return h.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),h.instance=this}}class d extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new h,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,d.instance)return d.instance.deserialize(e),d.instance;d.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?u.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),o=c.v4(),h=a.EthSignRequest.constructETHRequest(n,r,s,this.xfp,o,i,e),{r:d,s:p,v:f}=await this.requestSignature(o,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();g.v=f,g.s=p,g.r=d,g.type=t.type;return l.TransactionFactory.fromTxData(g,{common:t.common})}}d.type=s.BaseKeyring.type,r.MetaMaskKeyring=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.development.js"}],[589,{"@ethereumjs/tx":380,"@keystonehq/base-eth-keyring":559,"@keystonehq/bc-ur-registry-eth":563,"@metamask/obs-store":594,buffer:2187,events:2188,rlp:3760,uuid:3895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),l=e("@ethereumjs/tx"),u=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class h extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(e+"-signed"),this.removeAllListeners(e+"-canceled")},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const o=e.toUR(),l=e.getRequestId(),u=c.stringify(l),h={requestId:u,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:h}}),this.once(u+"-signed",(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(u+"-canceled",(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},h.instance)return h.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),h.instance=this}}class d extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new h,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,d.instance)return d.instance.deserialize(e),d.instance;d.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?u.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),o=c.v4(),h=a.EthSignRequest.constructETHRequest(n,r,s,this.xfp,o,i,e),{r:d,s:p,v:f}=await this.requestSignature(o,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();return g.v=f,g.s=p,g.r=d,g.type=t.type,l.TransactionFactory.fromTxData(g,{common:t.common})}}d.type=s.BaseKeyring.type,r.MetaMaskKeyring=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.production.min.js"}],[590,{"./ObservableStore":592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[591,{"./ObservableStore":592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[592,{"@metamask/safe-event-emitter":1415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[593,{stream:2191},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/asStream.js"}],[594,{"./ComposedStore":590,"./MergedStore":591,"./ObservableStore":592,"./asStream":593,"./transform":595},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/index.js"}],[595,{through2:596},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[596,{_process:3550,"readable-stream":3743,util:2194,xtend:3934},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,s=e("util").inherits,i=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}s(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=i(e,t),o.call(this,this.options)}return s(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(i({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[6,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA=r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON=r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM=r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI=r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM=r.SINGLE_CALL_BALANCES_ADDRESS_BSC=r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE=r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM=r.SINGLE_CALL_BALANCES_ADDRESS=void 0;r.SINGLE_CALL_BALANCES_ADDRESS="0xb1f8e55c7f64d203c1400b9d8555d050f94adf39";r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI="0x9788C4E93f9002a7ad8e72633b11E8d1ecd51f9b";r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA="";r.SINGLE_CALL_BALANCES_ADDRESS_BSC="0x2352c63A83f9Fd126af8676146721Fa00924d7e4";r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM="0xB1c568e9C3E6bdaf755A60c7418C269eb11524FC";r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON="0x2352c63A83f9Fd126af8676146721Fa00924d7e4";r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE="0xD023D153a0DFa485130ECFdE2FAA7e612EF94818";r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM="0x07f697424ABe762bB808c109860c04eA488ff92B";r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM="0x151E24A486D7258dd7C33Fb67E4bB01919B7B32c"}}},{package:"$root$",file:"app/scripts/constants/contracts.ts"}],[60,{"../platforms/extension":179,"@metamask/safe-event-emitter":1415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=i(e("@metamask/safe-event-emitter")),s=i(e("../platforms/extension"));function i(e){return e&&e.__esModule?e:{default:e}}const o={POPUP_CLOSED:"onPopupClosed"};r.NOTIFICATION_MANAGER_EVENTS=o;class a extends n.default{constructor(){super(),this.platform=new s.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const r=await this._getPopup(t);if(r)await this.platform.focusWindow(r.id);else{let e=0,t=0;try{const r=await this.platform.getLastFocusedWindow();t=r.top,e=r.left+(r.width-360)}catch(r){const{screenX:n,screenY:s,outerWidth:i}=window;t=Math.max(s,0),e=Math.max(n+(i-360),0)}const r=await this.platform.openWindow({url:"notification.html",type:"popup",width:360,height:620,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._setCurrentPopupId(r.id),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(o.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=a}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[61,{"../../../../shared/constants/network":3954,"./handlers":65,"@metamask/permission-controller":1359,"@metamask/rpc-methods":1375,"eth-rpc-errors":2587,lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMethodMiddleware=function(e){const t=h.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,r,n,s){if(c.UNSUPPORTED_RPC_METHODS.has(t.method))return s(o.ethErrors.rpc.methodNotSupported());const a=u.get(t.method);if(a){const{implementation:o,hookNames:c}=a;try{return await o(t,r,n,s,(0,i.selectHooks)(e,c))}catch(e){return console.error(e),s(e)}}return n()}};var n,s=e("@metamask/permission-controller"),i=e("@metamask/rpc-methods"),o=e("eth-rpc-errors"),a=e("lodash"),c=e("../../../../shared/constants/network");const l=[...((n=e("./handlers"))&&n.__esModule?n:{default:n}).default,...s.permissionRpcMethods.handlers],u=l.reduce(((e,t)=>{for(const r of t.methodNames)e.set(r,t);return e}),new Map),h=Array.from(new Set((0,a.flatten)(l.map((({hookNames:e})=>Object.keys(e))))).values())}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[62,{"../../../../../shared/constants/app":3946,"../../../../../shared/constants/metametrics":3953,"../../../../../shared/modules/network.utils":3985,"@metamask/controller-utils":1090,"eth-rpc-errors":2587,lodash:3442,"valid-url":3910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("eth-rpc-errors"),i=(n=e("valid-url"))&&n.__esModule?n:{default:n},o=e("lodash"),a=e("@metamask/controller-utils"),c=e("../../../../../shared/constants/app"),l=e("../../../../../shared/modules/network.utils"),u=e("../../../../../shared/constants/metametrics");var h={methodNames:[c.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,r,n,{upsertNetworkConfiguration:h,getCurrentChainId:d,getCurrentRpcUrl:p,findNetworkConfigurationBy:f,setActiveNetwork:g,requestUserApproval:m,startApprovalFlow:y,endApprovalFlow:b}){var w;if(null===(w=e.params)||void 0===w||!w[0]||"object"!=typeof e.params[0])return n(s.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:v}=e,{chainId:k,chainName:T=null,blockExplorerUrls:C=null,nativeCurrency:S=null,rpcUrls:_}=e.params[0],A=Object.keys((0,o.omit)(e.params[0],["chainId","chainName","blockExplorerUrls","iconUrls","rpcUrls","nativeCurrency"]));if(A.length>0)return n(s.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${A}`}));const E=e=>{try{const t=new URL(e);return"localhost"===t.hostname||"127.0.0.1"===t.hostname}catch(e){return!1}},M=Array.isArray(_)?_.find((e=>E(e)||i.default.isHttpsUri(e))):null,P=null!==C&&Array.isArray(C)?C.find((e=>E(e)||i.default.isHttpsUri(e))):null;if(!M)return n(s.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${_}`}));if(null!==C&&!P)return n(s.ethErrors.rpc.invalidParams({message:`Expected null or array with at least one valid string HTTPS URL 'blockExplorerUrl'. Received: ${C}`}));const N="string"==typeof k&&k.toLowerCase();if(!(0,l.isPrefixedFormattedHexString)(N))return n(s.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${k}`}));if(!(0,l.isSafeChainId)(parseInt(N,16)))return n(s.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${N}": numerical value greater than max safe value. Received:\n${k}`}));const O=f({chainId:N});if(O&&O.rpcUrl===M){t.result=null;const e=d(),r=p();if(e===N&&r===M)return n();try{await m({origin:v,type:a.ApprovalType.SwitchEthereumChain,requestData:{rpcUrl:O.rpcUrl,chainId:O.chainId,nickname:O.nickname,ticker:O.ticker}}),await g(O.id),t.result=null}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return n(e)}return n()}if("string"!=typeof T||!T)return n(s.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${T}`}));const x=T.length>100?T.substring(0,100):T;if(null!==S){if("object"!=typeof S||Array.isArray(S))return n(s.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${S}`}));if(18!==S.decimals)return n(s.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${S.decimals}`}));if(!S.symbol||"string"!=typeof S.symbol)return n(s.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${S.symbol}`}))}const j=(null==S?void 0:S.symbol)||c.UNKNOWN_TICKER_SYMBOL;if(j!==c.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof j||j.length<2||j.length>6))return n(s.ethErrors.rpc.invalidParams({message:`Expected 2-6 character string 'nativeCurrency.symbol'. Received:\n${j}`}));if(O&&O.chainId===N&&O.ticker!==j)return n(s.ethErrors.rpc.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${j}`}));let I;const{id:R}=await y();try{await m({origin:v,type:a.ApprovalType.AddEthereumChain,requestData:{chainId:N,rpcPrefs:{blockExplorerUrl:P},chainName:x,rpcUrl:M,ticker:j}}),I=await h({chainId:N,rpcPrefs:{blockExplorerUrl:P},nickname:x,rpcUrl:M,ticker:j},{source:u.MetaMetricsNetworkEventSource.Dapp,referrer:v}),t.result=null}catch(e){return b({id:R}),n(e)}try{await m({origin:v,type:a.ApprovalType.SwitchEthereumChain,requestData:{rpcUrl:M,chainId:N,nickname:x,ticker:j,networkConfigurationId:I}})}catch(e){return n(e.code===s.errorCodes.provider.userRejectedRequest?undefined:e)}finally{b({id:R})}try{await g(I)}catch(e){return n(e)}return n()},hookNames:{upsertNetworkConfiguration:!0,getCurrentChainId:!0,getCurrentRpcUrl:!0,findNetworkConfigurationBy:!0,setActiveNetwork:!0,requestUserApproval:!0,startApprovalFlow:!0,endApprovalFlow:!0}};r.default=h}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[63,{"../../../../../shared/constants/app":3946},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,r,n,{getAccounts:s}){return t.result=await s(),n()},hookNames:{getAccounts:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.js"}],[64,{"../../../../../shared/constants/app":3946},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,r,n,{getProviderState:s}){return t.result={...await s(e.origin)},n()},hookNames:{getProviderState:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[65,{"./add-ethereum-chain":62,"./eth-accounts":63,"./get-provider-state":64,"./log-web3-shim-usage":66,"./request-accounts":67,"./send-metadata":68,"./switch-ethereum-chain":69,"./watch-asset":70},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=h(e("./add-ethereum-chain")),s=h(e("./eth-accounts")),i=h(e("./get-provider-state")),o=h(e("./log-web3-shim-usage")),a=h(e("./request-accounts")),c=h(e("./send-metadata")),l=h(e("./switch-ethereum-chain")),u=h(e("./watch-asset"));function h(e){return e&&e.__esModule?e:{default:e}}var d=[n.default,s.default,i.default,o.default,a.default,c.default,l.default,u.default];r.default=d}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.js"}],[66,{"../../../../../shared/constants/app":3946,"../../../../../shared/constants/metametrics":3953},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../../../shared/constants/app"),s=e("../../../../../shared/constants/metametrics");var i={methodNames:[n.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,r,n,{sendMetrics:i,getWeb3ShimUsageState:o,setWeb3ShimUsageRecorded:a}){const{origin:c}=e;o(c)===undefined&&(a(c),i({event:"Website Accessed window.web3 Shim",category:s.MetaMetricsEventCategory.InpageProvider,referrer:{url:c}},{excludeMetaMetricsId:!0}));return t.result=!0,n()},hookNames:{sendMetrics:!0,getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};r.default=i}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.js"}],[67,{"../../../../../shared/constants/app":3946,"eth-rpc-errors":2587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");var i={methodNames:[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,r,i,{origin:a,getAccounts:c,getUnlockPromise:l,hasPermission:u,requestAccountsPermission:h}){if(o.has(a))return t.error=n.ethErrors.rpc.resourceUnavailable(`Already processing ${s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),i();if(u(s.MESSAGE_TYPE.ETH_ACCOUNTS)){try{o.add(a),await l(!0),t.result=await c(),i()}catch(e){i(e)}finally{o.delete(a)}return undefined}try{await h()}catch(e){return t.error=e,i()}const d=await c();d.length>0?t.result=d:t.error=n.ethErrors.rpc.internal("Accounts unexpectedly unavailable. Please report this bug.");return i()},hookNames:{origin:!0,getAccounts:!0,getUnlockPromise:!0,hasPermission:!0,requestAccountsPermission:!0}};r.default=i;const o=new Set}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[68,{"../../../../../shared/constants/app":3946,"eth-rpc-errors":2587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors");var s={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,r,s,{addSubjectMetadata:i,subjectType:o}){const{origin:a,params:c}=e;if(!c||"object"!=typeof c||Array.isArray(c))return s(n.ethErrors.rpc.invalidParams({data:c}));{const{icon:e=null,name:t=null,...r}=c;i({...r,iconUrl:e,name:t,subjectType:o,origin:a})}return t.result=!0,s()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};r.default=s}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[69,{"../../../../../shared/constants/app":3946,"../../../../../shared/constants/network":3954,"../../../../../shared/modules/network.utils":3985,"@metamask/controller-utils":1090,"eth-rpc-errors":2587,lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("lodash"),i=e("@metamask/controller-utils"),o=e("../../../../../shared/constants/app"),a=e("../../../../../shared/constants/network"),c=e("../../../../../shared/modules/network.utils");var l={methodNames:[o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,r,l,{getCurrentChainId:u,findNetworkConfigurationBy:h,setProviderType:d,setActiveNetwork:p,requestUserApproval:f}){var g;if(null===(g=e.params)||void 0===g||!g[0]||"object"!=typeof e.params[0])return l(n.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:m}=e,{chainId:y}=e.params[0],b=Object.keys((0,s.omit)(e.params[0],["chainId"]));if(b.length>0)return l(n.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${b}`}));const w="string"==typeof y&&y.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(w))return l(n.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${y}`}));if(!(0,c.isSafeChainId)(parseInt(w,16)))return l(n.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${w}": numerical value greater than max safe value. Received:\n${y}`}));const v=function(e,t){if(Object.values(a.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(e))return{chainId:e,ticker:a.CURRENCY_SYMBOLS.ETH,nickname:a.NETWORK_TO_NAME_MAP[e],rpcUrl:a.CHAIN_ID_TO_RPC_URL_MAP[e],type:a.CHAIN_ID_TO_TYPE_MAP[e]};return t({chainId:e})}(w,h);if(v){if(u()===w)return t.result=null,l();try{const e=await f({origin:m,type:i.ApprovalType.SwitchEthereumChain,requestData:v});Object.values(a.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(y)?await d(e.type):await p(e.id),t.result=null}catch(e){return l(e)}return l()}return l(n.ethErrors.provider.custom({code:4902,message:`Unrecognized chain ID "${y}". Try adding the chain using ${o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}))},hookNames:{getCurrentChainId:!0,findNetworkConfigurationBy:!0,setProviderType:!0,setActiveNetwork:!0,requestUserApproval:!0}};r.default=l}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[7,{"../../../shared/constants/alerts":3945,"@metamask/obs-store":1351},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("../../../shared/constants/alerts");const i={alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};r.default=class{constructor(e={}){const{initState:t={},preferencesStore:r}=e,s={...i,alertEnabledness:{...i.alertEnabledness,...t.alertEnabledness}};this.store=new n.ObservableStore(s),this.selectedAddress=r.getState().selectedAddress,r.subscribe((({selectedAddress:e})=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e&&(this.selectedAddress=e,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({alertEnabledness:r})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t={...t},t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.dismissed)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({web3ShimUsageOrigins:r})}}}}},{package:"$root$",file:"app/scripts/controllers/alert.js"}],[70,{"../../../../../shared/constants/app":3946,"@metamask/controller-utils":1090,"eth-rpc-errors":2587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/controller-utils"),s=e("eth-rpc-errors"),i=e("../../../../../shared/constants/app");var o={methodNames:[i.MESSAGE_TYPE.WATCH_ASSET,i.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,r,i,{handleWatchAssetRequest:o}){try{const{params:{options:r,type:a},origin:c}=e,{tokenId:l}=r;return[n.ERC721,n.ERC1155].includes(a)&&l!==undefined&&"string"!=typeof l?i(s.ethErrors.rpc.invalidParams({message:`Expected parameter 'tokenId' to be type 'string'. Received type '${typeof l}'`})):(await o(r,a,c),t.result=!0,i())}catch(e){return i(e)}},hookNames:{handleWatchAssetRequest:!0}};r.default=o}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[71,{"./createMethodMiddleware":61},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./createMethodMiddleware");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/index.js"}],[72,{"../../../shared/constants/app":3946,"../../../shared/modules/fetch-with-timeout":3980},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.securityProviderCheck=async function(e,t,r,n){let s;const a=e.msgParams||e.messageParams;if(t===i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA)s={host_name:null==a?void 0:a.origin,rpc_method_name:t,chain_id:r,data:null==a?void 0:a.data,currentLocale:n};else if(t===i.MESSAGE_TYPE.ETH_SIGN||t===i.MESSAGE_TYPE.PERSONAL_SIGN)s={host_name:null==a?void 0:a.origin,rpc_method_name:t,chain_id:r,data:{signer_address:null==a?void 0:a.from,msg_to_sign:null==a?void 0:a.data},currentLocale:n};else{var c,l,u,h,d,p;s={host_name:e.origin,rpc_method_name:t,chain_id:r,data:{from_address:null===(c=e.txParams)||void 0===c?void 0:c.from,to_address:null===(l=e.txParams)||void 0===l?void 0:l.to,gas:null===(u=e.txParams)||void 0===u?void 0:u.gas,gasPrice:null===(h=e.txParams)||void 0===h?void 0:h.gasPrice,value:null===(d=e.txParams)||void 0===d?void 0:d.value,data:null===(p=e.txParams)||void 0===p?void 0:p.data},currentLocale:n}}const f=await o("https://proxy.metafi.codefi.network/opensea/security/v1/validate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});return await f.json()};var n,s=(n=e("../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n},i=e("../../../shared/constants/app");const o=(0,s.default)()}}},{package:"$root$",file:"app/scripts/lib/security-provider-helpers.ts"}],[73,{"../../../shared/constants/keyring":3951,"@metamask/eth-keyring-controller":1189,loglevel:3454},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/eth-keyring-controller"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/keyring");var a={async verifyAccounts(e,t){if(!e||e.length<1)throw new Error("No created accounts defined.");const r=new s.KeyringController({}).getKeyringBuilderForType(o.KeyringType.hdKeyTree)(),n={mnemonic:t,numberOfAccounts:e.length};await r.deserialize(n);const a=await r.getAccounts();if(i.default.debug(`Created accounts: ${JSON.stringify(e)}`),i.default.debug(`Restored accounts: ${JSON.stringify(a)}`),a.length!==e.length)throw new Error("Wrong number of accounts");for(let t=0;t<a.length;t++)if(a[t].toLowerCase()!==e[t].toLowerCase())throw new Error(`Not identical accounts! Original: ${e[t]}, Restored: ${a[t]}`)}};r.default=a}}},{package:"$root$",file:"app/scripts/lib/seed-phrase-verifier.js"}],[74,{"../util":80,"@segment/loosely-validate-event":1590,buffer:2187,"is-retry-allowed":3221,lodash:3442,"remove-trailing-slash":3753,timers:3857},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=l(e("remove-trailing-slash")),i=l(e("@segment/loosely-validate-event")),o=e("lodash"),a=l(e("is-retry-allowed")),c=e("../util");function l(e){return e&&e.__esModule?e:{default:e}}const u=()=>({});r.default=class{constructor(e,t={}){this.writeKey=e,this.host=(0,s.default)(t.host||"https://api.segment.io"),this.flushInterval=t.flushInterval||1e4,this.flushAt=t.flushAt||Math.max(t.flushAt,1)||20,this.queue=[],this.path="/v1/batch",this.maxQueueSize=460800,this.flushed=!1,this.retryCount=3,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:!0})}_validate(e,t){(0,i.default)(e,t)}_message(e,t,r){return this._validate(t,e),this.enqueue(e,t,r),this}identify(e,t){return this._message("identify",e,t)}track(e,t){return this._message("track",e,t)}page(e,t){return this._message("page",e,t)}enqueue(e,t,r=u){if(!this.enable)return void n(r);const s={...t,type:e};if(s.context={...s.context,library:{name:"analytics-node"}},s.timestamp||(s.timestamp=new Date),s.messageId||(s.messageId=(0,c.generateRandomId)()),s.anonymousId&&!(0,o.isString)(s.anonymousId)&&(s.anonymousId=JSON.stringify(s.anonymousId)),s.userId&&!(0,o.isString)(s.userId)&&(s.userId=JSON.stringify(s.userId)),this.queue.push({message:s,callback:r}),!this.flushed)return this.flushed=!0,void this.flush();const i=this.queue.length>=this.flushAt,a=this.queue.reduce(((e,t)=>e+JSON.stringify(t).length),0)>=this.maxQueueSize;(i||a)&&this.flush(),this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))}flush(e=u){if(!this.enable)return n(e),Promise.resolve();if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return n(e),Promise.resolve();const r=this.queue.splice(0,this.flushAt),s=r.map((e=>e.callback)),i={batch:r.map((e=>e.message)),timestamp:new Date,sentAt:new Date},o={Authorization:`Basic ${t.from(this.writeKey,"utf8").toString("base64")}`};return this._sendRequest(`${this.host}${this.path}`,{method:"POST",body:JSON.stringify(i),headers:o},(t=>{n((()=>{s.forEach((e=>e(t,i))),e(t,i)}))}),0)}_retryRequest(e,t,r,n){const s=100*Math.pow(2,n);setTimeout((()=>{this._sendRequest(e,t,r,n+1)}),s)}async _sendRequest(e,t,r,n){return fetch(e,t).then((async s=>{if(s.ok)r();else if(this._isErrorRetryable({response:s})&&n<=this.retryCount)this._retryRequest(e,t,r,n);else{const e=new Error(s.statusText);r(e)}})).catch((s=>{this._isErrorRetryable(s)&&n<=this.retryCount?this._retryRequest(e,t,r,n):r(s)}))}_isErrorRetryable(e){return!!function(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,a.default)(e)}(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}}).call(this)}).call(this,e("buffer").Buffer,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/lib/segment/analytics.js"}],[75,{"../../../../shared/constants/time":3962,"./analytics":74},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.segment=r.createSegmentMock=void 0;var n,s=e("../../../../shared/constants/time"),i=(n=e("./analytics"))&&n.__esModule?n:{default:n};const o="XdGJ17zKf3NjBPCDQ2UDjJjkx6FYBMGP",a=undefined,c=5*s.SECOND,l=(e=a)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(r,n=(()=>undefined)){t.queue.push([r,n]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};r.createSegmentMock=l;const u=o?new i.default(o,{host:null,flushAt:a,flushInterval:c}):l(a);r.segment=u}}},{package:"$root$",file:"app/scripts/lib/segment/index.js"}],[8,{"../../../shared/constants/alarms":3944,"../../../shared/constants/app":3946,"../../../shared/constants/preferences":3956,"../../../shared/constants/time":3962,"../../../shared/modules/mv3.utils":3984,"../../../ui/helpers/utils/build-types":4659,"../metamask-controller":81,"@metamask/controller-utils":1090,"@metamask/obs-store":1351,events:2188,loglevel:3454,uuid:3895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=g(e("events")),s=e("@metamask/obs-store"),i=e("uuid"),o=g(e("loglevel")),a=e("@metamask/controller-utils"),c=e("../metamask-controller"),l=e("../../../shared/constants/time"),u=e("../../../shared/constants/alarms"),h=e("../../../shared/modules/mv3.utils"),d=e("../../../ui/helpers/utils/build-types"),p=e("../../../shared/constants/app"),f=e("../../../shared/constants/preferences");function g(e){return e&&e.__esModule?e:{default:e}}class m extends n.default{constructor(e={}){const{addUnlockListener:t,isUnlocked:r,initState:n,onInactiveTimeout:i,preferencesStore:o,qrHardwareStore:a,messenger:c}=e;super(),this.onInactiveTimeout=i||(()=>undefined),this.store=new s.ObservableStore({timeoutMinutes:f.DEFAULT_AUTO_LOCK_TIME_LIMIT,connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,browserEnvironment:{},popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[],recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),outdatedBrowserWarningLastShown:(new Date).getTime(),nftsDetectionNoticeDismissed:!1,showTestnetMessageInDropdown:!0,showBetaHeader:(0,d.isBeta)(),showProductTour:!0,trezorModel:null,currentPopupId:undefined,...n,qrHardware:{},nftsDropdownState:{},usedNetworks:{"0x1":!0,"0x5":!0,"0x539":!0},serviceWorkerLastActiveTime:0}),this.timer=null,this.isUnlocked=r,this.waitingForUnlock=[],t(this.handleUnlock.bind(this)),o.subscribe((({preferences:e})=>{this.store.getState().timeoutMinutes!==e.autoLockTimeLimit&&this._setInactiveTimeout(e.autoLockTimeLimit)})),a.subscribe((e=>{this.store.updateState({qrHardware:e})}));const{preferences:l}=o.getState();this._setInactiveTimeout(l.autoLockTimeLimit),this.messagingSystem=c,this._approvalRequestId=null}getUnlockPromise(e){return new Promise((t=>{this.isUnlocked()?t():this.waitForUnlock(t,e)}))}waitForUnlock(e,t){this.waitingForUnlock.push({resolve:e}),this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE),t&&this._requestApproval()}handleUnlock(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;)this.waitingForUnlock.shift().resolve();this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}this._acceptApproval()}setDefaultHomeActiveTabName(e){this.store.updateState({defaultHomeActiveTabName:e})}setConnectedStatusPopoverHasBeenShown(){this.store.updateState({connectedStatusPopoverHasBeenShown:!0})}setRecoveryPhraseReminderHasBeenShown(){this.store.updateState({recoveryPhraseReminderHasBeenShown:!0})}setRecoveryPhraseReminderLastShown(e){this.store.updateState({recoveryPhraseReminderLastShown:e})}setTermsOfUseLastAgreed(e){this.store.updateState({termsOfUseLastAgreed:e})}setOutdatedBrowserWarningLastShown(e){this.store.updateState({outdatedBrowserWarningLastShown:e})}setLastActiveTime(){this._resetTimer()}_setInactiveTimeout(e){this.store.updateState({timeoutMinutes:e}),this._resetTimer()}_resetTimer(){const{timeoutMinutes:e}=this.store.getState();this.timer?clearTimeout(this.timer):h.isManifestV3&&chrome.alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM),e&&(h.isManifestV3?(chrome.alarms.create(u.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:e,periodInMinutes:e}),chrome.alarms.onAlarm.addListener((e=>{e.name===u.AUTO_LOCK_TIMEOUT_ALARM&&(this.onInactiveTimeout(),chrome.alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM))}))):this.timer=setTimeout((()=>this.onInactiveTimeout()),e*l.MINUTE))}setBrowserEnvironment(e,t){this.store.updateState({browserEnvironment:{os:e,browser:t}})}addPollingToken(e,t){if(t!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:[...r,e]})}}removePollingToken(e,t){if(t!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:r.filter((t=>t!==e))})}}clearPollingTokens(){this.store.updateState({popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[]})}setShowTestnetMessageInDropdown(e){this.store.updateState({showTestnetMessageInDropdown:e})}setShowBetaHeader(e){this.store.updateState({showBetaHeader:e})}setShowProductTour(e){this.store.updateState({showProductTour:e})}setTrezorModel(e){this.store.updateState({trezorModel:e})}updateNftDropDownState(e){this.store.updateState({nftsDropdownState:e})}setFirstTimeUsedNetwork(e){const t=this.store.getState(),{usedNetworks:r}=t;r[e]=!0,this.store.updateState({usedNetworks:r})}setCurrentPopupId(e){this.store.updateState({currentPopupId:e})}getCurrentPopupId(){return this.store.getState().currentPopupId}setServiceWorkerLastActiveTime(e){this.store.updateState({serviceWorkerLastActiveTime:e})}_requestApproval(){this._approvalRequestId=(0,i.v4)(),this.messagingSystem.call("ApprovalController:addRequest",{id:this._approvalRequestId,origin:p.ORIGIN_METAMASK,type:a.ApprovalType.Unlock},!0).catch((()=>{}))}_acceptApproval(){if(this._approvalRequestId){try{this.messagingSystem.call("ApprovalController:acceptRequest",this._approvalRequestId)}catch(e){o.default.error("Failed to accept transaction approval request",e)}this._approvalRequestId=null}else o.default.error("Attempted to accept missing unlock approval request")}}r.default=m}}},{package:"$root$",file:"app/scripts/controllers/app-state.js"}],[81,{"../../shared/constants/app":3946,"../../shared/constants/hardware-wallets":3950,"../../shared/constants/keyring":3951,"../../shared/constants/metametrics":3953,"../../shared/constants/network":3954,"../../shared/constants/permissions":3955,"../../shared/constants/swaps":3959,"../../shared/constants/test-flags":3961,"../../shared/constants/time":3962,"../../shared/constants/tokens":3963,"../../shared/constants/transaction":3964,"../../shared/lib/metamask-controller-utils":3967,"../../shared/lib/token-util.ts":3971,"../../shared/modules/conversion.utils":3978,"../../shared/modules/mv3.utils":3984,"../../shared/modules/string-utils":3991,"../../shared/modules/transaction.utils":3993,"../../shared/notifications":3995,"./account-import-strategies":4,"./controllers/alert":7,"./controllers/app-state":8,"./controllers/backup":9,"./controllers/cached-balances":10,"./controllers/decrypt-message":11,"./controllers/detect-tokens":12,"./controllers/encryption-public-key":13,"./controllers/ens":15,"./controllers/incoming-transactions":16,"./controllers/metametrics":17,"./controllers/onboarding":18,"./controllers/permissions":22,"./controllers/preferences":26,"./controllers/swaps":27,"./controllers/transactions":28,"./detect-multiple-instances":34,"./lib/ComposableObservableStore":36,"./lib/account-tracker":37,"./lib/createDupeReqFilterMiddleware":39,"./lib/createLoggerMiddleware":40,"./lib/createMetaRPCHandler":41,"./lib/createMetamaskMiddleware":42,"./lib/createOnboardingMiddleware":43,"./lib/createOriginMiddleware":44,"./lib/createRPCMethodTrackingMiddleware":45,"./lib/createTabIdMiddleware":47,"./lib/rpc-method-middleware":71,"./lib/security-provider-helpers":72,"./lib/seed-phrase-verifier":73,"./lib/segment":75,"./lib/stream-utils":79,"./lib/util":80,"./translate":180,"@keystonehq/metamask-airgapped-keyring":587,"@metamask/address-book-controller":1056,"@metamask/announcement-controller":1058,"@metamask/approval-controller":1061,"@metamask/assets-controllers":1080,"@metamask/base-controller":1085,"@metamask/controller-utils":1090,"@metamask/eth-json-rpc-middleware":1161,"@metamask/eth-keyring-controller":1189,"@metamask/eth-ledger-bridge-keyring":1204,"@metamask/eth-trezor-keyring":1258,"@metamask/gas-fee-controller":1281,"@metamask/network-controller":1344,"@metamask/obs-store":1351,"@metamask/obs-store/dist/asStream":1350,"@metamask/permission-controller":1359,"@metamask/phishing-controller":1368,"@metamask/signature-controller":1428,"@metamask/smart-transactions-controller":1432,"@metamask/subject-metadata-controller":1508,"@sentry/browser":1623,"await-semaphore":2061,buffer:2187,"eth-json-rpc-filters":2490,"eth-json-rpc-filters/subscriptionManager":2492,"eth-lattice-keyring":2494,"eth-query":2583,"eth-rpc-errors":2587,events:2188,"json-rpc-engine":3239,"json-rpc-middleware-stream":3243,lodash:3442,loglevel:3454,nanoid:3497,pump:3594},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.METAMASK_CONTROLLER_EVENTS=void 0;var n=Re(e("events")),s=Re(e("pump")),i=e("@metamask/obs-store"),o=e("@metamask/obs-store/dist/asStream"),a=e("json-rpc-engine"),c=e("json-rpc-middleware-stream"),l=e("@metamask/eth-json-rpc-middleware"),u=e("lodash"),h=e("@metamask/eth-keyring-controller"),d=Re(e("eth-json-rpc-filters")),p=Re(e("eth-json-rpc-filters/subscriptionManager")),f=e("eth-rpc-errors"),g=e("await-semaphore"),m=Re(e("loglevel")),y=Re(e("@metamask/eth-trezor-keyring")),b=Re(e("@metamask/eth-ledger-bridge-keyring")),w=Re(e("eth-lattice-keyring")),v=e("@keystonehq/metamask-airgapped-keyring"),k=Re(e("eth-query")),T=Re(e("nanoid")),C=e("@sentry/browser"),S=e("@metamask/address-book-controller"),_=e("@metamask/approval-controller"),A=e("@metamask/base-controller"),E=e("@metamask/assets-controllers"),M=e("@metamask/phishing-controller"),P=e("@metamask/announcement-controller"),N=e("@metamask/network-controller"),O=e("@metamask/gas-fee-controller"),x=e("@metamask/permission-controller"),j=e("@metamask/subject-metadata-controller"),I=Re(e("@metamask/smart-transactions-controller")),R=e("@metamask/signature-controller"),L=e("@metamask/controller-utils"),D=e("../../shared/constants/transaction"),U=e("../../shared/constants/swaps"),B=e("../../shared/constants/network"),$=e("../../shared/constants/hardware-wallets"),F=e("../../shared/constants/keyring"),q=e("../../shared/constants/permissions"),K=e("../../shared/notifications"),z=e("../../shared/constants/time"),H=e("../../shared/constants/app"),G=e("../../shared/constants/metametrics"),V=e("../../shared/lib/token-util.ts"),W=e("../../shared/modules/string-utils"),Y=e("../../shared/modules/transaction.utils"),J=e("../../shared/constants/tokens"),Q=e("../../shared/lib/metamask-controller-utils"),Z=e("../../shared/modules/mv3.utils"),X=e("../../shared/modules/conversion.utils"),ee=e("../../shared/constants/test-flags"),te=e("./detect-multiple-instances"),re=Re(e("./lib/ComposableObservableStore")),ne=Re(e("./lib/account-tracker")),se=Re(e("./lib/createDupeReqFilterMiddleware")),ie=Re(e("./lib/createLoggerMiddleware")),oe=e("./lib/rpc-method-middleware"),ae=Re(e("./lib/createOriginMiddleware")),ce=Re(e("./lib/createTabIdMiddleware")),le=Re(e("./lib/createOnboardingMiddleware")),ue=e("./lib/stream-utils"),he=Re(e("./controllers/ens")),de=Re(e("./controllers/preferences")),pe=Re(e("./controllers/app-state")),fe=Re(e("./controllers/cached-balances")),ge=Re(e("./controllers/alert")),me=Re(e("./controllers/onboarding")),ye=Re(e("./controllers/backup")),be=Re(e("./controllers/incoming-transactions")),we=Re(e("./controllers/decrypt-message")),ve=Re(e("./controllers/transactions")),ke=Re(e("./controllers/detect-tokens")),Te=Re(e("./controllers/swaps")),Ce=Re(e("./account-import-strategies")),Se=Re(e("./lib/seed-phrase-verifier")),_e=Re(e("./controllers/metametrics")),Ae=e("./lib/segment"),Ee=Re(e("./lib/createMetaRPCHandler")),Me=e("./lib/util"),Pe=Re(e("./lib/createMetamaskMiddleware")),Ne=Re(e("./controllers/encryption-public-key")),Oe=e("./controllers/permissions"),xe=Re(e("./lib/createRPCMethodTrackingMiddleware")),je=e("./lib/security-provider-helpers"),Ie=e("./translate");function Re(e){return e&&e.__esModule?e:{default:e}}function Le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.METAMASK_CONTROLLER_EVENTS={UPDATE_BADGE:"updateBadge",APPROVAL_STATE_CHANGE:"ApprovalController:stateChange"};class De extends n.default{constructor(e){var t;super(),Le(this,"handleWatchAssetRequest",((e,t,r)=>{switch(t){case L.ERC20:return this.tokensController.watchAsset(e,t);case L.ERC721:case L.ERC1155:return this.nftController.watchNft(e,t,r);default:throw new Error(`Asset type ${t} not supported`)}})),Le(this,"removePermissionsFor",(e=>{try{this.permissionController.revokePermissions(e)}catch(e){if(!(e instanceof x.PermissionsRequestNotFoundError))throw e}})),Le(this,"rejectPermissionsRequest",(e=>{try{this.permissionController.rejectPermissionsRequest(e)}catch(e){if(!(e instanceof x.PermissionsRequestNotFoundError))throw e}})),Le(this,"acceptPermissionsRequest",(e=>{try{this.permissionController.acceptPermissionsRequest(e)}catch(e){if(!(e instanceof x.PermissionsRequestNotFoundError))throw e}})),Le(this,"resolvePendingApproval",(async(e,t,r)=>{try{await this.approvalController.accept(e,t,r)}catch(e){if(!(e instanceof _.ApprovalRequestNotFoundError))throw e}})),Le(this,"rejectPendingApproval",((e,t)=>{try{this.approvalController.reject(e,new f.EthereumRpcError(t.code,t.message,t.data))}catch(e){if(!(e instanceof _.ApprovalRequestNotFoundError))throw e}}));const{isFirstMetaMaskControllerSetup:r}=e;this.defaultMaxListeners=20,this.sendUpdate=(0,u.debounce)(this.privateSendUpdate.bind(this),200*z.MILLISECOND),this.opts=e,this.extension=e.browser,this.platform=e.platform,this.notificationManager=e.notificationManager;const n=e.initState||{},s=this.platform.getVersion();this.recordFirstTimeInfo(n),this.activeControllerConnections=0,this.getRequestAccountTabIds=e.getRequestAccountTabIds,this.getOpenMetamaskTabsIds=e.getOpenMetamaskTabsIds,this.controllerMessenger=new A.ControllerMessenger,this.localStoreApiWrapper=e.localStore,this.store=new re.default({state:n,controllerMessenger:this.controllerMessenger,persist:!0}),this.connections={},this.createVaultMutex=new g.Mutex,this.extension.runtime.onInstalled.addListener((e=>{"update"===e.reason&&"8.1.0"===s&&this.platform.openExtensionInBrowser()})),this.approvalController=new _.ApprovalController({messenger:this.controllerMessenger.getRestricted({name:"ApprovalController"}),showApprovalRequest:e.showUserConfirmation,typesExcludedFromRateLimiting:[L.ApprovalType.EthSign,L.ApprovalType.PersonalSign,L.ApprovalType.EthSignTypedData,L.ApprovalType.Transaction,L.ApprovalType.WatchAsset,L.ApprovalType.EthGetEncryptionPublicKey,L.ApprovalType.EthDecrypt]});const i=this.controllerMessenger.getRestricted({name:"NetworkController",allowedEvents:["NetworkController:stateChange","NetworkController:networkWillChange","NetworkController:networkDidChange","NetworkController:infuraIsBlocked","NetworkController:infuraIsUnblocked"]});let o;const a=o?{providerConfig:o,...n.NetworkController}:n.NetworkController;this.networkController=new N.NetworkController({messenger:i,state:a,infuraProjectId:e.infuraProjectId,trackMetaMetricsEvent:(...e)=>this.metaMetricsController.trackEvent(...e)}),this.networkController.initializeProvider(),this.provider=this.networkController.getProviderAndBlockTracker().provider,this.blockTracker=this.networkController.getProviderAndBlockTracker().blockTracker;const c=this.controllerMessenger.getRestricted({name:"TokenListController",allowedEvents:["TokenListController:stateChange","NetworkController:stateChange"]});this.tokenListController=new E.TokenListController({chainId:this.networkController.state.providerConfig.chainId,preventPollingOnNetworkRestart:!n.TokenListController||n.TokenListController.preventPollingOnNetworkRestart,messenger:c,state:n.TokenListController}),this.preferencesController=new de.default({initState:n.PreferencesController,initLangCode:e.initLangCode,onInfuraIsBlocked:i.subscribe.bind(i,"NetworkController:infuraIsBlocked"),onInfuraIsUnblocked:i.subscribe.bind(i,"NetworkController:infuraIsUnblocked"),tokenListController:this.tokenListController,provider:this.provider}),this.preferencesController.store.subscribe((async({currentLocale:e})=>{await(0,Ie.updateCurrentLocale)(e)}));const l=this.controllerMessenger.getRestricted({name:"TokensController",allowedActions:["ApprovalController:addRequest"],allowedEvents:["NetworkController:stateChange"]});this.tokensController=new E.TokensController({messenger:l,chainId:this.networkController.state.providerConfig.chainId,onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:i.subscribe.bind(i,"NetworkController:stateChange"),config:{provider:this.provider},state:n.TokensController}),this.assetsContractController=new E.AssetsContractController({chainId:this.networkController.state.providerConfig.chainId,onPreferencesStateChange:e=>this.preferencesController.store.subscribe(e),onNetworkStateChange:e=>i.subscribe("NetworkController:networkDidChange",(()=>{const t=this.networkController.state;return e(t)}))},{provider:this.provider},n.AssetsContractController);const d=this.controllerMessenger.getRestricted({name:"NftController",allowedActions:[`${this.approvalController.name}:addRequest`]});this.nftController=new E.NftController({messenger:d,chainId:this.networkController.state.providerConfig.chainId,onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:i.subscribe.bind(i,"NetworkController:stateChange"),getERC721AssetName:this.assetsContractController.getERC721AssetName.bind(this.assetsContractController),getERC721AssetSymbol:this.assetsContractController.getERC721AssetSymbol.bind(this.assetsContractController),getERC721TokenURI:this.assetsContractController.getERC721TokenURI.bind(this.assetsContractController),getERC721OwnerOf:this.assetsContractController.getERC721OwnerOf.bind(this.assetsContractController),getERC1155BalanceOf:this.assetsContractController.getERC1155BalanceOf.bind(this.assetsContractController),getERC1155TokenURI:this.assetsContractController.getERC1155TokenURI.bind(this.assetsContractController),onNftAdded:({address:e,symbol:t,tokenId:r,standard:n,source:s})=>this.metaMetricsController.trackEvent({event:G.MetaMetricsEventName.NftAdded,category:G.MetaMetricsEventCategory.Wallet,properties:{token_contract_address:e,token_symbol:t,asset_type:D.AssetType.NFT,token_standard:n,source:s},sensitiveProperties:{tokenId:r}})},{},n.NftController),this.nftController.setApiKey(null),this.nftDetectionController=new E.NftDetectionController({chainId:this.networkController.state.providerConfig.chainId,onNftsStateChange:e=>this.nftController.subscribe(e),onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:i.subscribe.bind(i,"NetworkController:stateChange"),getOpenSeaApiKey:()=>this.nftController.openSeaApiKey,getBalancesInSingleCall:this.assetsContractController.getBalancesInSingleCall.bind(this.assetsContractController),addNft:this.nftController.addNft.bind(this.nftController),getNftState:()=>this.nftController.state}),this.metaMetricsController=new _e.default({segment:Ae.segment,preferencesStore:this.preferencesController.store,onNetworkDidChange:i.subscribe.bind(i,"NetworkController:networkDidChange"),getNetworkIdentifier:()=>{const{type:e,rpcUrl:t}=this.networkController.state.providerConfig;return e===B.NETWORK_TYPES.RPC?t:e},getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,version:this.platform.getVersion(),environment:"production",extension:this.extension,initState:n.MetaMetricsController,captureException:C.captureException}),this.on("update",(e=>{this.metaMetricsController.handleMetaMaskStateUpdate(e)}));const p=this.controllerMessenger.getRestricted({name:"GasFeeController"}),k=U.GAS_API_BASE_URL;this.gasFeeController=new O.GasFeeController({state:n.GasFeeController,interval:1e4,messenger:p,clientId:U.SWAPS_CLIENT_ID,getProvider:()=>this.networkController.getProviderAndBlockTracker().provider,onNetworkStateChange:e=>{i.subscribe("NetworkController:networkDidChange",(()=>e(this.networkController.state)))},getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getCurrentAccountEIP1559Compatibility:this.getCurrentAccountEIP1559Compatibility.bind(this),EIP1559APIEndpoint:`${k}/networks/<chain_id>/suggestedGasFees`,getCurrentNetworkLegacyGasAPICompatibility:()=>!1,getChainId:()=>this.networkController.state.providerConfig.chainId}),this.qrHardwareKeyring=new v.MetaMaskKeyring,this.appStateController=new pe.default({addUnlockListener:this.on.bind(this,"unlock"),isUnlocked:this.isUnlocked.bind(this),initState:n.AppStateController,onInactiveTimeout:()=>this.setLocked(),preferencesStore:this.preferencesController.store,qrHardwareStore:this.qrHardwareKeyring.getMemStore(),messenger:this.controllerMessenger.getRestricted({name:"AppStateController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`]})});const T=this.controllerMessenger.getRestricted({name:"CurrencyRateController"});this.currencyRateController=new E.CurrencyRateController({includeUsdRate:!0,messenger:T,state:{...n.CurrencyController,nativeCurrency:this.networkController.state.providerConfig.ticker}}),this.phishingController=new M.PhishingController({},n.PhishingController),this.phishingController.maybeUpdateState();const $=this.controllerMessenger.getRestricted({name:"AnnouncementController"});let F=K.UI_NOTIFICATIONS;this.announcementController=new P.AnnouncementController({messenger:$,allAnnouncements:F,state:n.AnnouncementController}),this.tokenRatesController=new E.TokenRatesController({chainId:this.networkController.state.providerConfig.chainId,onTokensStateChange:e=>this.tokensController.subscribe(e),onCurrencyRateStateChange:e=>this.controllerMessenger.subscribe(`${this.currencyRateController.name}:stateChange`,e),onNetworkStateChange:i.subscribe.bind(i,"NetworkController:stateChange")},{disabled:!this.preferencesController.store.getState().useCurrencyRateCheck},n.TokenRatesController),this.preferencesController.store.subscribe((0,Me.previousValueComparator)(((e,t)=>{const{useCurrencyRateCheck:r}=e,{useCurrencyRateCheck:n}=t;n&&!r?(this.currencyRateController.start(),this.tokenRatesController.configure({disabled:!1},!1,!1)):!n&&r&&(this.currencyRateController.stop(),this.tokenRatesController.configure({disabled:!0},!1,!1))}),this.preferencesController.store.getState())),this.ensController=new he.default({provider:this.provider,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,onNetworkDidChange:i.subscribe.bind(i,"NetworkController:networkDidChange")}),this.onboardingController=new me.default({initState:n.OnboardingController}),this.incomingTransactionsController=new be.default({blockTracker:this.blockTracker,onNetworkDidChange:i.subscribe.bind(i,"NetworkController:networkDidChange"),getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,preferencesController:this.preferencesController,onboardingController:this.onboardingController,initState:n.IncomingTransactionsController}),this.accountTracker=new ne.default({provider:this.provider,blockTracker:this.blockTracker,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,getNetworkIdentifier:()=>{const{type:e,rpcUrl:t}=this.networkController.state.providerConfig;return e===B.NETWORK_TYPES.RPC?t:e},preferencesController:this.preferencesController,onboardingController:this.onboardingController,initState:Z.isManifestV3&&!1===r&&null!==(t=n.AccountTracker)&&void 0!==t&&t.accounts?{accounts:n.AccountTracker.accounts}:{accounts:{}}}),this.on("controllerConnectionChanged",(e=>{const{completedOnboarding:t}=this.onboardingController.store.getState();e>0&&t?this.triggerNetworkrequests():this.stopNetworkRequests()})),this.onboardingController.store.subscribe((0,Me.previousValueComparator)((async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;!r&&n&&this.triggerNetworkrequests()}),this.onboardingController.store.getState())),this.cachedBalancesController=new fe.default({accountTracker:this.accountTracker,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,initState:n.CachedBalancesController});let J=[(0,h.keyringBuilderFactory)(v.MetaMaskKeyring)];if(this.canUseHardwareWallets()){var X;const e=null===(X=this.opts.overrides)||void 0===X?void 0:X.keyrings;J=[(null==e?void 0:e.trezor)||y.default,(null==e?void 0:e.ledger)||b.default,(null==e?void 0:e.lattice)||w.default,v.MetaMaskKeyring].map((e=>(0,h.keyringBuilderFactory)(e)))}this.keyringController=new h.KeyringController({keyringBuilders:J,initState:n.KeyringController,encryptor:e.encryptor||undefined,cacheEncryptionKey:Z.isManifestV3}),this.keyringController.memStore.subscribe((e=>this._onKeyringControllerUpdate(e))),this.keyringController.on("unlock",(()=>this._onUnlock())),this.keyringController.on("lock",(()=>this._onLock()));const ee=()=>this.preferencesController.store.getState().identities;this.permissionController=new x.PermissionController({messenger:this.controllerMessenger.getRestricted({name:"PermissionController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:hasRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`,"SnapController:getPermitted","SnapController:install","SubjectMetadataController:getSubjectMetadata"]}),state:n.PermissionController,caveatSpecifications:(0,Oe.getCaveatSpecifications)({getIdentities:ee}),permissionSpecifications:{...(0,Oe.getPermissionSpecifications)({getIdentities:ee,getAllAccounts:this.keyringController.getAccounts.bind(this.keyringController),captureKeyringTypesWithMissingIdentities:(e={},t=[])=>{const r=t.filter((t=>!e[t])).map((e=>{var t;return null===(t=this.keyringController.getKeyringForAccount(e))||void 0===t?void 0:t.type})),n=Object.keys(e||{}).length,s=Object.keys(this.accountTracker.store.getState().accounts||{}).length;(0,C.captureException)(new Error(`Attempt to get permission specifications failed because their were ${t.length} accounts, but ${n} identities, and the ${r} keyrings included accounts with missing identities. Meanwhile, there are ${s} accounts in the account tracker.`))}})},unrestrictedMethods:Oe.unrestrictedMethods}),this.permissionLogController=new Oe.PermissionLogController({restrictedMethods:new Set(Object.keys(q.RestrictedMethods)),initState:n.PermissionLogController}),this.subjectMetadataController=new j.SubjectMetadataController({messenger:this.controllerMessenger.getRestricted({name:"SubjectMetadataController",allowedActions:[`${this.permissionController.name}:hasPermissions`]}),state:n.SubjectMetadataController,subjectCacheLimit:100});const se=this.controllerMessenger.getRestricted({name:"DetectTokensController",allowedEvents:["NetworkController:stateChange"]});if(this.detectTokensController=new ke.default({messenger:se,preferences:this.preferencesController,tokensController:this.tokensController,assetsContractController:this.assetsContractController,network:this.networkController,keyringMemStore:this.keyringController.memStore,tokenList:this.tokenListController,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.addressBookController=new S.AddressBookController(undefined,n.AddressBookController),this.alertController=new ge.default({initState:n.AlertController,preferencesStore:this.preferencesController.store}),this.backupController=new ye.default({preferencesController:this.preferencesController,addressBookController:this.addressBookController,networkController:this.networkController,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.txController=new ve.default({initState:n.TransactionController||n.TransactionManager,getPermittedAccounts:this.getPermittedAccounts.bind(this),getProviderConfig:()=>this.networkController.state.providerConfig,getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getCurrentAccountEIP1559Compatibility:this.getCurrentAccountEIP1559Compatibility.bind(this),getNetworkId:()=>this.networkController.state.networkId,getNetworkStatus:()=>this.networkController.state.networkStatus,onNetworkStateChange:e=>{i.subscribe("NetworkController:stateChange",(()=>e()),(({networkId:e})=>e))},getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,preferencesStore:this.preferencesController.store,txHistoryLimit:60,signTransaction:this.keyringController.signTransaction.bind(this.keyringController),provider:this.provider,blockTracker:this.blockTracker,createEventFragment:this.metaMetricsController.createEventFragment.bind(this.metaMetricsController),updateEventFragment:this.metaMetricsController.updateEventFragment.bind(this.metaMetricsController),finalizeEventFragment:this.metaMetricsController.finalizeEventFragment.bind(this.metaMetricsController),getEventFragmentById:this.metaMetricsController.getEventFragmentById.bind(this.metaMetricsController),trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getParticipateInMetrics:()=>this.metaMetricsController.state.participateInMetaMetrics,getEIP1559GasFeeEstimates:this.gasFeeController.fetchGasFeeEstimates.bind(this.gasFeeController),getExternalPendingTransactions:this.getExternalPendingTransactions.bind(this),getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),securityProviderRequest:this.securityProviderRequest.bind(this),messenger:this.controllerMessenger.getRestricted({name:"TransactionController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`]})}),this.txController.on("tx:status-update",(async(e,t)=>{if(t===D.TransactionStatus.confirmed||t===D.TransactionStatus.failed){const t=this.txController.txStateManager.getTransaction(e);let i={};if(t.chainId){const{networkConfigurations:e}=this.networkController.state,r=Object.values(e).find((e=>e.chainId===t.chainId));i=(null==r?void 0:r.rpcPrefs)??{}}try{await this.platform.showTransactionNotification(t,i)}catch(e){m.default.error("Failed to create transaction notification",e)}const{txReceipt:o}=t;if(t.type===D.TransactionType.tokenMethodTransferFrom&&t.txParams!==undefined){var r,n;const{data:e,to:s,from:i}=t.txParams,{chainId:o}=t,a=(0,Y.parseStandardTokenTransactionData)(e),c=(0,V.getTokenIdParam)(a)??(0,Q.getTokenValueParam)(a),{allNfts:l}=this.nftController.state,u=null==l||null===(r=l[i])||void 0===r||null===(n=r[o])||void 0===n?void 0:n.find((({address:e,tokenId:t})=>(0,W.isEqualCaseInsensitive)(e,s)&&t===c));u&&this.nftController.checkAndUpdateSingleNftOwnershipStatus(u,!1,{userAddress:i,chainId:o})}const a=this.getState();var s;if(o&&"0x0"===o.status)this.metaMetricsController.trackEvent({event:"Tx Status Update: On-Chain Failure",category:G.MetaMetricsEventCategory.Background,properties:{action:"Transactions",errorMessage:null===(s=t.simulationFails)||void 0===s?void 0:s.reason,numberOfTokens:a.tokens.length,numberOfAccounts:Object.keys(a.accounts).length}},{matomoEvent:!0})}})),i.subscribe("NetworkController:networkDidChange",(async()=>{const{ticker:e}=this.networkController.state.providerConfig;try{await this.currencyRateController.setNativeCurrency(e)}catch(e){console.error(e)}})),this.networkController.lookupNetwork(),this.decryptMessageController=new we.default({getState:this.getState.bind(this),keyringController:this.keyringController,messenger:this.controllerMessenger.getRestricted({name:"DecryptMessageController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`]}),metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.encryptionPublicKeyController=new Ne.default({messenger:this.controllerMessenger.getRestricted({name:"EncryptionPublicKeyController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`]}),keyringController:this.keyringController,getState:this.getState.bind(this),metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.signatureController=new R.SignatureController({messenger:this.controllerMessenger.getRestricted({name:"SignatureController",allowedActions:[`${this.approvalController.name}:addRequest`]}),keyringController:this.keyringController,isEthSignEnabled:()=>{var e,t;return null===(e=this.preferencesController.store.getState())||void 0===e||null===(t=e.disabledRpcMethodPreferences)||void 0===t?void 0:t.eth_sign},getAllState:this.getState.bind(this),securityProviderRequest:this.securityProviderRequest.bind(this),getCurrentChainId:()=>this.networkController.state.providerConfig.chainId}),this.signatureController.hub.on("cancelWithReason",(({message:e,reason:t})=>{this.metaMetricsController.trackEvent({event:t,category:G.MetaMetricsEventCategory.Transactions,properties:{action:"Sign Request",type:e.type}})})),this.swapsController=new Te.default({getBufferedGasLimit:this.txController.txGasUtil.getBufferedGasLimit.bind(this.txController.txGasUtil),networkController:this.networkController,onNetworkStateChange:i.subscribe.bind(i,"NetworkController:stateChange"),provider:this.provider,getProviderConfig:()=>this.networkController.state.providerConfig,getTokenRatesState:()=>this.tokenRatesController.state,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,getEIP1559GasFeeEstimates:this.gasFeeController.fetchGasFeeEstimates.bind(this.gasFeeController)},n.SwapsController),this.smartTransactionsController=new I.default({onNetworkStateChange:i.subscribe.bind(i,"NetworkController:stateChange"),getNetwork:()=>this.networkController.state.networkId??"loading",getNonceLock:this.txController.nonceTracker.getNonceLock.bind(this.txController.nonceTracker),confirmExternalTransaction:this.txController.confirmExternalTransaction.bind(this.txController),provider:this.provider,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)},{supportedChainIds:[B.CHAIN_IDS.MAINNET,B.CHAIN_IDS.GOERLI]},n.SmartTransactionsController),this.txController.on("newSwapApproval",(e=>{this.swapsController.setApproveTxId(e.id)})),this.txController.on("newSwap",(e=>{this.swapsController.setTradeTxId(e.id)})),i.subscribe("NetworkController:networkDidChange",(()=>{this.accountTracker._updateAccounts()})),i.subscribe("NetworkController:networkWillChange",(()=>{this.txController.txStateManager.clearUnapprovedTxs(),this.encryptionPublicKeyController.clearUnapproved(),this.decryptMessageController.clearUnapproved(),this.signatureController.clearUnapproved()})),Z.isManifestV3&&globalThis.isFirstTimeProfileLoaded===undefined){const{serviceWorkerLastActiveTime:e}=this.appStateController.store.getState(),t={category:G.MetaMetricsEventCategory.ServiceWorkers,event:G.MetaMetricsEventName.ServiceWorkerRestarted,properties:{service_worker_restarted_time:Date.now()-e}};try{this.metaMetricsController.trackEvent(t)}catch(e){m.default.warn("Failed to track service worker restart metric:",e)}}this.metamaskMiddleware=(0,Pe.default)({static:{eth_syncing:!1,web3_clientVersion:`MetaMask/v${s}`},version:s,getAccounts:async({origin:e},{suppressUnauthorizedError:t=!0}={})=>{if(e===H.ORIGIN_METAMASK){const e=this.preferencesController.getSelectedAddress();return e?[e]:[]}return this.isUnlocked()?await this.getPermittedAccounts(e,{suppressUnauthorizedError:t}):[]},processTransaction:this.newUnapprovedTransaction.bind(this),processEthSignMessage:this.signatureController.newUnsignedMessage.bind(this.signatureController),processTypedMessage:this.signatureController.newUnsignedTypedMessage.bind(this.signatureController),processTypedMessageV3:this.signatureController.newUnsignedTypedMessage.bind(this.signatureController),processTypedMessageV4:this.signatureController.newUnsignedTypedMessage.bind(this.signatureController),processPersonalMessage:this.signatureController.newUnsignedPersonalMessage.bind(this.signatureController),processEncryptionPublicKey:this.encryptionPublicKeyController.newRequestEncryptionPublicKey.bind(this.encryptionPublicKeyController),processDecryptMessage:this.decryptMessageController.newRequestDecryptMessage.bind(this.decryptMessageController),getPendingNonce:this.getPendingNonce.bind(this),getPendingTransactionByHash:e=>this.txController.getTransactions({searchCriteria:{hash:e,status:D.TransactionStatus.submitted}})[0]}),this.on("update",(e=>this._onStateUpdate(e)));const ie={AccountTracker:this.accountTracker.store,TxController:this.txController.memStore,TokenRatesController:this.tokenRatesController,DecryptMessageController:this.decryptMessageController,EncryptionPublicKeyController:this.encryptionPublicKeyController,SignatureController:this.signatureController,SwapsController:this.swapsController.store,EnsController:this.ensController.store,ApprovalController:this.approvalController};this.store.updateStructure({AppStateController:this.appStateController.store,TransactionController:this.txController.store,KeyringController:this.keyringController.store,PreferencesController:this.preferencesController.store,MetaMetricsController:this.metaMetricsController.store,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,NetworkController:this.networkController,CachedBalancesController:this.cachedBalancesController.store,AlertController:this.alertController.store,OnboardingController:this.onboardingController.store,IncomingTransactionsController:this.incomingTransactionsController.store,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController.store,SubjectMetadataController:this.subjectMetadataController,BackupController:this.backupController,AnnouncementController:this.announcementController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,PhishingController:this.phishingController,...ie}),this.memStore=new re.default({config:{AppStateController:this.appStateController.store,NetworkController:this.networkController,CachedBalancesController:this.cachedBalancesController.store,KeyringController:this.keyringController.memStore,PreferencesController:this.preferencesController.store,MetaMetricsController:this.metaMetricsController.store,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,AlertController:this.alertController.store,OnboardingController:this.onboardingController.store,IncomingTransactionsController:this.incomingTransactionsController.store,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController.store,SubjectMetadataController:this.subjectMetadataController,BackupController:this.backupController,AnnouncementController:this.announcementController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,...ie},controllerMessenger:this.controllerMessenger});const oe=[this.accountTracker.resetState,this.txController.resetState,this.decryptMessageController.resetState.bind(this.decryptMessageController),this.encryptionPublicKeyController.resetState.bind(this.encryptionPublicKeyController),this.signatureController.resetState.bind(this.signatureController),this.swapsController.resetState,this.ensController.resetState,this.approvalController.clear.bind(this.approvalController)];Z.isManifestV3?!0===r&&(this.resetStates(oe),this.extension.storage.session.set({isFirstMetaMaskControllerSetup:!1})):this.resetStates(oe),!this.isUnlocked()&&this.onboardingController.store.getState().completedOnboarding?this._loginUser():this._startUISync(),this.extension.runtime.getPlatformInfo().then((({os:e})=>{this.appStateController.setBrowserEnvironment(e,this.extension.runtime.getBrowserInfo===undefined?"chrome":"firefox")})),this.setupControllerEventSubscriptions(),this.publicConfigStore=this.createPublicConfigStore(),this.extension.runtime.onMessageExternal.addListener(te.onMessageReceived),(0,te.checkForMultipleVersionsRunning)()}triggerNetworkrequests(){this.accountTracker.start(),this.incomingTransactionsController.start(),this.preferencesController.store.getState().useCurrencyRateCheck&&this.currencyRateController.start(),this.preferencesController.store.getState().useTokenDetection&&this.tokenListController.start()}stopNetworkRequests(){this.accountTracker.stop(),this.incomingTransactionsController.stop(),this.preferencesController.store.getState().useCurrencyRateCheck&&this.currencyRateController.stop(),this.preferencesController.store.getState().useTokenDetection&&this.tokenListController.stop()}canUseHardwareWallets(){return!Z.isManifestV3||!1}resetStates(e){e.forEach((e=>{try{e()}catch(e){console.error(e)}}))}setupControllerEventSubscriptions(){const e=async(e,t)=>{this.isUnlocked()&&this.notifyConnections(e,{method:Oe.NOTIFICATION_NAMES.accountsChanged,params:t.length<2?t:await this.getPermittedAccounts(e)}),this.permissionLogController.updateAccountsHistory(e,t)};let t;this.preferencesController.store.subscribe((async({selectedAddress:r})=>{if(r&&r!==t){t=r;const n=(0,Oe.getPermittedAccountsByOrigin)(this.permissionController.state);for(const[t,s]of n.entries())s.includes(r)&&e(t,s)}})),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,(async(t,r)=>{const n=(0,Oe.getChangedAccounts)(t,r);for(const[t,r]of n.entries())e(t,r)}),Oe.getPermittedAccountsByOrigin)}createPublicConfigStore(){const e=new i.ObservableStore,{networkController:t}=this;function r(r){const{chainId:n}=t.state.providerConfig;r.networkStatus===B.NetworkStatus.Available&&e.putState(function(e,{isUnlocked:t,networkId:r}){return{isUnlocked:t,chainId:e,networkVersion:r??"loading"}}(n,r))}return this.on("update",r),r(this.getState()),e}async getProviderState(e){return{isUnlocked:this.isUnlocked(),...this.getProviderNetworkState(),accounts:await this.getPermittedAccounts(e)}}getProviderNetworkState(e){const{networkId:t}=e||this.getState();return{chainId:this.networkController.state.providerConfig.chainId,networkVersion:t??"loading"}}getState(){const{vault:e}=this.keyringController.store.getState();return{isInitialized:Boolean(e),...this.memStore.getFlatState()}}getApi(){const{addressBookController:e,alertController:t,appStateController:r,nftController:n,nftDetectionController:s,currencyRateController:i,detectTokensController:o,ensController:a,gasFeeController:c,metaMetricsController:l,networkController:u,announcementController:h,onboardingController:d,permissionController:p,preferencesController:f,qrHardwareKeyring:g,swapsController:m,tokensController:y,smartTransactionsController:b,txController:w,assetsContractController:v,backupController:k,approvalController:T}=this;return{getState:this.getState.bind(this),setCurrentCurrency:i.setCurrentCurrency.bind(i),setUseBlockie:f.setUseBlockie.bind(f),setUseNonceField:f.setUseNonceField.bind(f),setUsePhishDetect:f.setUsePhishDetect.bind(f),setUseMultiAccountBalanceChecker:f.setUseMultiAccountBalanceChecker.bind(f),setUseTokenDetection:f.setUseTokenDetection.bind(f),setUseNftDetection:f.setUseNftDetection.bind(f),setUseCurrencyRateCheck:f.setUseCurrencyRateCheck.bind(f),setOpenSeaEnabled:f.setOpenSeaEnabled.bind(f),setIpfsGateway:f.setIpfsGateway.bind(f),setParticipateInMetaMetrics:l.setParticipateInMetaMetrics.bind(l),setCurrentLocale:f.setCurrentLocale.bind(f),markPasswordForgotten:this.markPasswordForgotten.bind(this),unMarkPasswordForgotten:this.unMarkPasswordForgotten.bind(this),getRequestAccountTabIds:this.getRequestAccountTabIds,getOpenMetamaskTabsIds:this.getOpenMetamaskTabsIds,markNotificationPopupAsAutomaticallyClosed:()=>this.notificationManager.markAsAutomaticallyClosed(),requestUserApproval:T.addAndShowApprovalRequest.bind(T),addNewAccount:this.addNewAccount.bind(this),verifySeedPhrase:this.verifySeedPhrase.bind(this),resetAccount:this.resetAccount.bind(this),removeAccount:this.removeAccount.bind(this),importAccountWithStrategy:this.importAccountWithStrategy.bind(this),connectHardware:this.connectHardware.bind(this),forgetDevice:this.forgetDevice.bind(this),checkHardwareStatus:this.checkHardwareStatus.bind(this),unlockHardwareWalletAccount:this.unlockHardwareWalletAccount.bind(this),setLedgerTransportPreference:this.setLedgerTransportPreference.bind(this),attemptLedgerTransportCreation:this.attemptLedgerTransportCreation.bind(this),establishLedgerTransportPreference:this.establishLedgerTransportPreference.bind(this),submitQRHardwareCryptoHDKey:g.submitCryptoHDKey.bind(g),submitQRHardwareCryptoAccount:g.submitCryptoAccount.bind(g),cancelSyncQRHardware:g.cancelSync.bind(g),submitQRHardwareSignature:g.submitSignature.bind(g),cancelQRHardwareSignRequest:g.cancelSignRequest.bind(g),submitPassword:this.submitPassword.bind(this),verifyPassword:this.verifyPassword.bind(this),setProviderType:u.setProviderType.bind(u),rollbackToPreviousProvider:u.rollbackToPreviousProvider.bind(u),removeNetworkConfiguration:u.removeNetworkConfiguration.bind(u),setActiveNetwork:u.setActiveNetwork.bind(u),upsertNetworkConfiguration:this.networkController.upsertNetworkConfiguration.bind(this.networkController),getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),setSelectedAddress:f.setSelectedAddress.bind(f),addToken:y.addToken.bind(y),updateTokenType:y.updateTokenType.bind(y),setAccountLabel:f.setAccountLabel.bind(f),setFeatureFlag:f.setFeatureFlag.bind(f),setPreference:f.setPreference.bind(f),addKnownMethodData:f.addKnownMethodData.bind(f),setDismissSeedBackUpReminder:f.setDismissSeedBackUpReminder.bind(f),setDisabledRpcMethodPreference:f.setDisabledRpcMethodPreference.bind(f),getRpcMethodPreferences:f.getRpcMethodPreferences.bind(f),setAdvancedGasFee:f.setAdvancedGasFee.bind(f),setTheme:f.setTheme.bind(f),setTransactionSecurityCheckEnabled:f.setTransactionSecurityCheckEnabled.bind(f),getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),addNft:n.addNft.bind(n),addNftVerifyOwnership:n.addNftVerifyOwnership.bind(n),removeAndIgnoreNft:n.removeAndIgnoreNft.bind(n),removeNft:n.removeNft.bind(n),checkAndUpdateAllNftsOwnershipStatus:n.checkAndUpdateAllNftsOwnershipStatus.bind(n),checkAndUpdateSingleNftOwnershipStatus:n.checkAndUpdateSingleNftOwnershipStatus.bind(n),isNftOwner:n.isNftOwner.bind(n),setAddressBook:e.set.bind(e),removeFromAddressBook:e.delete.bind(e),setLastActiveTime:r.setLastActiveTime.bind(r),setDefaultHomeActiveTabName:r.setDefaultHomeActiveTabName.bind(r),setConnectedStatusPopoverHasBeenShown:r.setConnectedStatusPopoverHasBeenShown.bind(r),setRecoveryPhraseReminderHasBeenShown:r.setRecoveryPhraseReminderHasBeenShown.bind(r),setRecoveryPhraseReminderLastShown:r.setRecoveryPhraseReminderLastShown.bind(r),setTermsOfUseLastAgreed:r.setTermsOfUseLastAgreed.bind(r),setOutdatedBrowserWarningLastShown:r.setOutdatedBrowserWarningLastShown.bind(r),setShowTestnetMessageInDropdown:r.setShowTestnetMessageInDropdown.bind(r),setShowBetaHeader:r.setShowBetaHeader.bind(r),setShowProductTour:r.setShowProductTour.bind(r),updateNftDropDownState:r.updateNftDropDownState.bind(r),setFirstTimeUsedNetwork:r.setFirstTimeUsedNetwork.bind(r),tryReverseResolveAddress:a.reverseResolveAddress.bind(a),setLocked:this.setLocked.bind(this),createNewVaultAndKeychain:this.createNewVaultAndKeychain.bind(this),createNewVaultAndRestore:this.createNewVaultAndRestore.bind(this),exportAccount:this.exportAccount.bind(this),updateTransaction:w.updateTransaction.bind(w),approveTransactionsWithSameNonce:w.approveTransactionsWithSameNonce.bind(w),createCancelTransaction:this.createCancelTransaction.bind(this),createSpeedUpTransaction:this.createSpeedUpTransaction.bind(this),estimateGas:this.estimateGas.bind(this),getNextNonce:this.getNextNonce.bind(this),addUnapprovedTransaction:w.addUnapprovedTransaction.bind(w),createTransactionEventFragment:w.createTransactionEventFragment.bind(w),getTransactions:w.getTransactions.bind(w),updateEditableParams:w.updateEditableParams.bind(w),updateTransactionGasFees:w.updateTransactionGasFees.bind(w),updateTransactionSendFlowHistory:w.updateTransactionSendFlowHistory.bind(w),updatePreviousGasParams:w.updatePreviousGasParams.bind(w),decryptMessage:this.decryptMessageController.decryptMessage.bind(this.decryptMessageController),decryptMessageInline:this.decryptMessageController.decryptMessageInline.bind(this.decryptMessageController),cancelDecryptMessage:this.decryptMessageController.cancelDecryptMessage.bind(this.decryptMessageController),encryptionPublicKey:this.encryptionPublicKeyController.encryptionPublicKey.bind(this.encryptionPublicKeyController),cancelEncryptionPublicKey:this.encryptionPublicKeyController.cancelEncryptionPublicKey.bind(this.encryptionPublicKeyController),setSeedPhraseBackedUp:d.setSeedPhraseBackedUp.bind(d),completeOnboarding:d.completeOnboarding.bind(d),setFirstTimeFlowType:d.setFirstTimeFlowType.bind(d),setAlertEnabledness:t.setAlertEnabledness.bind(t),setUnconnectedAccountAlertShown:t.setUnconnectedAccountAlertShown.bind(t),setWeb3ShimUsageAlertDismissed:t.setWeb3ShimUsageAlertDismissed.bind(t),removePermissionsFor:this.removePermissionsFor,approvePermissionsRequest:this.acceptPermissionsRequest,rejectPermissionsRequest:this.rejectPermissionsRequest,...(0,Oe.getPermissionBackgroundApiMethods)(p),fetchAndSetQuotes:m.fetchAndSetQuotes.bind(m),setSelectedQuoteAggId:m.setSelectedQuoteAggId.bind(m),resetSwapsState:m.resetSwapsState.bind(m),setSwapsTokens:m.setSwapsTokens.bind(m),clearSwapsQuotes:m.clearSwapsQuotes.bind(m),setApproveTxId:m.setApproveTxId.bind(m),setTradeTxId:m.setTradeTxId.bind(m),setSwapsTxGasPrice:m.setSwapsTxGasPrice.bind(m),setSwapsTxGasLimit:m.setSwapsTxGasLimit.bind(m),setSwapsTxMaxFeePerGas:m.setSwapsTxMaxFeePerGas.bind(m),setSwapsTxMaxFeePriorityPerGas:m.setSwapsTxMaxFeePriorityPerGas.bind(m),safeRefetchQuotes:m.safeRefetchQuotes.bind(m),stopPollingForQuotes:m.stopPollingForQuotes.bind(m),setBackgroundSwapRouteState:m.setBackgroundSwapRouteState.bind(m),resetPostFetchState:m.resetPostFetchState.bind(m),setSwapsErrorKey:m.setSwapsErrorKey.bind(m),setInitialGasEstimate:m.setInitialGasEstimate.bind(m),setCustomApproveTxData:m.setCustomApproveTxData.bind(m),setSwapsLiveness:m.setSwapsLiveness.bind(m),setSwapsFeatureFlags:m.setSwapsFeatureFlags.bind(m),setSwapsUserFeeLevel:m.setSwapsUserFeeLevel.bind(m),setSwapsQuotesPollingLimitEnabled:m.setSwapsQuotesPollingLimitEnabled.bind(m),setSmartTransactionsOptInStatus:b.setOptInState.bind(b),fetchSmartTransactionFees:b.getFees.bind(b),clearSmartTransactionFees:b.clearFees.bind(b),submitSignedTransactions:b.submitSignedTransactions.bind(b),cancelSmartTransaction:b.cancelSmartTransaction.bind(b),fetchSmartTransactionsLiveness:b.fetchLiveness.bind(b),updateSmartTransaction:b.updateSmartTransaction.bind(b),setStatusRefreshInterval:b.setStatusRefreshInterval.bind(b),trackMetaMetricsEvent:l.trackEvent.bind(l),trackMetaMetricsPage:l.trackPage.bind(l),createEventFragment:l.createEventFragment.bind(l),updateEventFragment:l.updateEventFragment.bind(l),finalizeEventFragment:l.finalizeEventFragment.bind(l),resolvePendingApproval:this.resolvePendingApproval,rejectPendingApproval:this.rejectPendingApproval,updateViewedNotifications:h.updateViewed.bind(h),getGasFeeEstimatesAndStartPolling:c.getGasFeeEstimatesAndStartPolling.bind(c),disconnectGasFeeEstimatePoller:c.disconnectPoller.bind(c),getGasFeeTimeEstimate:c.getTimeEstimate.bind(c),addPollingTokenToAppState:r.addPollingToken.bind(r),removePollingTokenFromAppState:r.removePollingToken.bind(r),backupUserData:k.backupUserData.bind(k),restoreUserData:k.restoreUserData.bind(k),detectNewTokens:o.detectNewTokens.bind(o),detectNfts:s.detectNfts.bind(s),addDetectedTokens:y.addDetectedTokens.bind(y),addImportedTokens:y.addTokens.bind(y),ignoreTokens:y.ignoreTokens.bind(y),getBalancesInSingleCall:v.getBalancesInSingleCall.bind(v)}}async exportAccount(e,t){return await this.verifyPassword(t),this.keyringController.exportAccount(e,t)}async getTokenStandardAndDetails(e,t,r){var n,s,i,o;const{tokenList:a}=this.tokenListController.state,{tokens:c}=this.tokensController.state,l={...J.STATIC_MAINNET_TOKEN_LIST[e.toLowerCase()]||{},...a[e.toLowerCase()]||{},...c.find((({address:t})=>(0,W.isEqualCaseInsensitive)(t,e)))||{}},u=(0,W.isEqualCaseInsensitive)(l.standard,D.TokenStandard.ERC20)||!0===l.erc20,h=!(r||(0,W.isEqualCaseInsensitive)(l.standard,D.TokenStandard.ERC1155)||(0,W.isEqualCaseInsensitive)(l.standard,D.TokenStandard.ERC721)||l.erc721),d=l.decimals!==undefined&&l.symbol;let p;if(u||h&&d)try{const r=await(0,V.fetchTokenBalance)(e,t,this.provider);p={address:e,balance:r,standard:D.TokenStandard.ERC20,decimals:l.decimals,symbol:l.symbol}}catch(e){m.default.warning(`Failed to get token balance. Error: ${e}`)}return p===undefined&&(p=await this.assetsContractController.getTokenStandardAndDetails(e,t,r)),{...p,decimals:null===(n=p)||void 0===n||null===(s=n.decimals)||void 0===s?void 0:s.toString(10),balance:null===(i=p)||void 0===i||null===(o=i.balance)||void 0===o?void 0:o.toString(10)}}async createNewVaultAndKeychain(e){const t=await this.createVaultMutex.acquire();try{let t;if((await this.keyringController.getAccounts()).length>0)t=await this.keyringController.fullUpdate();else{t=await this.keyringController.createNewVaultAndKeychain(e);const r=await this.keyringController.getAccounts();this.preferencesController.setAddresses(r),this.selectFirstIdentity()}return t}finally{t()}}async createNewVaultAndRestore(e,r){const n=await this.createVaultMutex.acquire();try{let n,s;const i=t.from(r),{keyringController:o}=this;this.preferencesController.setAddresses([]),this.permissionController.clearState(),this.accountTracker.clearAccounts(),this.cachedBalancesController.clearCachedBalances(),this.txController.txStateManager.clearUnapprovedTxs();const a=await o.createNewVaultAndRestore(e,i),c=new k.default(this.provider);n=await o.getAccounts(),s=await this.getBalance(n[n.length-1],c);const[l]=o.getKeyringsByType(F.KeyringType.hdKeyTree);if(!l)throw new Error("MetamaskController - No HD Key Tree found");for(;"0x0"!==s;)await o.addNewAccount(l),n=await o.getAccounts(),s=await this.getBalance(n[n.length-1],c);n.length>1&&"0x0"===s&&(await this.removeAccount(n[n.length-1]),n=await o.getAccounts());const u=this.preferencesController.getLedgerTransportPreference();return this.setLedgerTransportPreference(u),this.preferencesController.setAddresses(n),this.selectFirstIdentity(),a}finally{n()}}getBalance(e,t){return new Promise(((r,n)=>{const s=this.accountTracker.store.getState().accounts[e];s&&s.balance?r(s.balance):t.getBalance(e,((e,t)=>{e?(n(e),m.default.error(e)):r(t||"0x0")}))}))}async submitPassword(e){await this.keyringController.submitPassword(e);try{await this.blockTracker.checkForLatestBlock()}catch(e){m.default.error("Error while unlocking extension.",e)}const t=this.preferencesController.getLedgerTransportPreference();return this.setLedgerTransportPreference(t),this.keyringController.fullUpdate()}async _loginUser(){try{const e=null;e?await this.submitPassword(e):Z.isManifestV3&&await this.submitEncryptionKey(),await this.accountTracker._updateAccounts()}finally{this._startUISync()}}_startUISync(){this.emit("startUISync"),this.startUISync=!0,this.memStore.subscribe(this.sendUpdate.bind(this))}async submitEncryptionKey(){try{const{loginToken:e,loginSalt:t}=await this.extension.storage.session.get(["loginToken","loginSalt"]);if(e&&t){const{vault:r}=this.keyringController.store.getState();if(JSON.parse(r).salt!==t)return console.warn("submitEncryptionKey: Stored salt and vault salt do not match"),void await this.clearLoginArtifacts();await this.keyringController.submitEncryptionKey(e,t)}}catch(e){throw await this.clearLoginArtifacts(),e}}async clearLoginArtifacts(){await this.extension.storage.session.remove(["loginToken","loginSalt"])}async verifyPassword(e){await this.keyringController.verifyPassword(e)}selectFirstIdentity(){const{identities:e}=this.preferencesController.store.getState(),[t]=Object.keys(e);this.preferencesController.setSelectedAddress(t)}getPrimaryKeyringMnemonic(){const[e]=this.keyringController.getKeyringsByType(F.KeyringType.hdKeyTree);if(!e.mnemonic)throw new Error("Primary keyring mnemonic unavailable.");return e.mnemonic}async getKeyringForDevice(e,t=null){var r,n,s,i;const o=null===(r=this.opts.overrides)||void 0===r?void 0:r.keyrings;let a=null;if(e!==$.HardwareDeviceNames.QR&&!this.canUseHardwareWallets())throw new Error("Hardware wallets are not supported on this version.");switch(e){case $.HardwareDeviceNames.trezor:a=(null==o||null===(n=o.trezor)||void 0===n?void 0:n.type)||y.default.type;break;case $.HardwareDeviceNames.ledger:a=(null==o||null===(s=o.ledger)||void 0===s?void 0:s.type)||b.default.type;break;case $.HardwareDeviceNames.qr:a=v.MetaMaskKeyring.type;break;case $.HardwareDeviceNames.lattice:a=(null==o||null===(i=o.lattice)||void 0===i?void 0:i.type)||w.default.type;break;default:throw new Error("MetamaskController:getKeyringForDevice - Unknown device")}let[c]=await this.keyringController.getKeyringsByType(a);if(c||(c=await this.keyringController.addNewKeyring(a)),t&&c.setHdPath&&c.setHdPath(t),e===$.HardwareDeviceNames.lattice&&(c.appName="MetaMask"),e===$.HardwareDeviceNames.trezor){const e=c.getModel();this.appStateController.setTrezorModel(e)}return c.network=this.networkController.state.providerConfig.type,c}async attemptLedgerTransportCreation(){const e=await this.getKeyringForDevice($.HardwareDeviceNames.ledger);return await e.attemptMakeApp()}async establishLedgerTransportPreference(){const e=this.preferencesController.getLedgerTransportPreference();return await this.setLedgerTransportPreference(e)}async connectHardware(e,t,r){const n=await this.getKeyringForDevice(e,r);let s=[];switch(t){case-1:s=await n.getPreviousPage();break;case 1:s=await n.getNextPage();break;default:s=await n.getFirstPage()}const i=await this.keyringController.getAccounts(),o=[...new Set(i.concat(s.map((e=>e.address.toLowerCase()))))];return this.accountTracker.syncWithAddresses(o),s}async checkHardwareStatus(e,t){return(await this.getKeyringForDevice(e,t)).isUnlocked()}async forgetDevice(e){return(await this.getKeyringForDevice(e)).forgetDevice(),!0}async getAccountType(e){switch((await this.keyringController.getKeyringForAccount(e)).type){case F.KeyringType.trezor:case F.KeyringType.lattice:case F.KeyringType.qr:case F.KeyringType.ledger:return"hardware";case F.KeyringType.imported:return"imported";default:return"MetaMask"}}async getDeviceModel(e){const t=await this.keyringController.getKeyringForAccount(e);switch(t.type){case F.KeyringType.trezor:return t.getModel();case F.KeyringType.qr:return t.getName();case F.KeyringType.ledger:return $.HardwareDeviceNames.ledger;case F.KeyringType.lattice:return $.HardwareDeviceNames.lattice;default:return"N/A"}}getAccountLabel(e,t,r){return`${e[0].toUpperCase()}${e.slice(1)} ${parseInt(t,10)+1} ${r||""}`.trim()}async unlockHardwareWalletAccount(e,t,r,n){const s=await this.getKeyringForDevice(t,r);s.setAccountToUnlock(e);const i=await this.keyringController.getAccounts(),o=await this.keyringController.addNewAccount(s),a=await this.keyringController.getAccounts();this.preferencesController.setAddresses(a),a.forEach((r=>{if(!i.includes(r)){const i=this.getAccountLabel(t===$.HardwareDeviceNames.qr?s.getName():t,e,n);this.preferencesController.setAccountLabel(r,i),this.preferencesController.setSelectedAddress(r)}}));const{identities:c}=this.preferencesController.store.getState();return{...o,identities:c}}async addNewAccount(e){this.appStateController.store.getState()[ee.ACTION_QUEUE_METRICS_E2E_TEST];const[t]=this.keyringController.getKeyringsByType(F.KeyringType.hdKeyTree);if(!t)throw new Error("MetamaskController - No HD Key Tree found");const{keyringController:r}=this,{identities:n}=this.preferencesController.store.getState();if(Object.keys(n).length===e){const e=await r.getAccounts(),n=await r.addNewAccount(t),s=await r.getAccounts();await this.verifySeedPhrase(),this.preferencesController.setAddresses(s),s.forEach((t=>{e.includes(t)||this.preferencesController.setSelectedAddress(t)}));const{identities:i}=this.preferencesController.store.getState();return{...n,identities:i}}return{...r.memStore.getState(),identities:n}}async verifySeedPhrase(){const[e]=this.keyringController.getKeyringsByType(F.KeyringType.hdKeyTree);if(!e)throw new Error("MetamaskController - No HD Key Tree found");const r=await e.serialize(),n=t.from(r.mnemonic),s=await e.getAccounts();if(s.length<1)throw new Error("MetamaskController - No accounts found");try{return await Se.default.verifyAccounts(s,n),Array.from(n.values())}catch(e){throw m.default.error(e.message),e}}async resetAccount(){const e=this.preferencesController.getSelectedAddress();return this.txController.wipeTransactions(e),this.networkController.resetConnection(),e}async getPermittedAccounts(e,{suppressUnauthorizedError:t=!0}={}){try{return await this.permissionController.executeRestrictedMethod(e,q.RestrictedMethods.eth_accounts)}catch(e){if(t&&e.code===f.errorCodes.provider.unauthorized)return[];throw e}}removeAllAccountPermissions(e){this.permissionController.updatePermissionsByCaveat(q.CaveatTypes.restrictReturnedAccounts,(t=>Oe.CaveatMutatorFactories[q.CaveatTypes.restrictReturnedAccounts].removeAccount(e,t)))}async removeAccount(e){this.removeAllAccountPermissions(e),this.preferencesController.removeAddress(e),this.accountTracker.removeAccount([e]);const t=await this.keyringController.getKeyringForAccount(e);await this.keyringController.removeAccount(e);const r=t?await t.getAccounts():{};var n;0===(null==r?void 0:r.length)&&(null===(n=t.destroy)||void 0===n||n.call(t));return e}async importAccountWithStrategy(e,t){const r=await Ce.default.importAccount(e,t),n=await this.keyringController.addNewKeyring(F.KeyringType.imported,[r]),[s]=await n.getAccounts(),i=await this.keyringController.getAccounts();this.preferencesController.setAddresses(i),this.preferencesController.setSelectedAddress(s)}async newUnapprovedTransaction(e,t){return await this.txController.newUnapprovedTransaction(e,t)}async getCurrentAccountEIP1559Compatibility(){return!0}async createCancelTransaction(e,t,r){await this.txController.createCancelTransaction(e,t,r);return this.getState()}async createSpeedUpTransaction(e,t,r){await this.txController.createSpeedUpTransaction(e,t,r);return this.getState()}estimateGas(e){return new Promise(((t,r)=>this.txController.txGasUtil.query.estimateGas(e,((e,n)=>e?r(e):t(n.toString(16))))))}markPasswordForgotten(){this.preferencesController.setPasswordForgotten(!0),this.sendUpdate()}unMarkPasswordForgotten(){this.preferencesController.setPasswordForgotten(!1),this.sendUpdate()}setupUntrustedCommunication({connectionStream:e,sender:t,subjectType:r}){const{usePhishDetect:n}=this.preferencesController.store.getState();let s;if(s=r||(t.id&&t.id!==this.extension.runtime.id?j.SubjectType.Extension:j.SubjectType.Website),t.url){const{hostname:r}=new URL(t.url);this.phishingController.maybeUpdateState();const s=this.phishingController.test(r);if(n&&null!=s&&s.result)return this.sendPhishingWarning(e,r),void this.metaMetricsController.trackEvent({event:G.MetaMetricsEventName.PhishingPageDisplayed,category:G.MetaMetricsEventCategory.Phishing,properties:{url:r}})}const i=(0,ue.setupMultiplex)(e);this.setupProviderConnection(i.createStream("metamask-provider"),t,s),t.url&&this.setupPublicConfig(i.createStream("publicConfig"))}setupTrustedCommunication(e,t){const r=(0,ue.setupMultiplex)(e);this.setupControllerConnection(r.createStream("controller")),this.setupProviderConnection(r.createStream("provider"),t,j.SubjectType.Internal)}setupPhishingCommunication({connectionStream:e}){const{usePhishDetect:t}=this.preferencesController.store.getState();if(!t)return;const r=(0,ue.setupMultiplex)(e).createStream("metamask-phishing-safelist");r.on("data",(0,Ee.default)({safelistPhishingDomain:this.safelistPhishingDomain.bind(this),backToSafetyPhishingWarning:this.backToSafetyPhishingWarning.bind(this)},r))}sendPhishingWarning(e,t){(0,ue.setupMultiplex)(e).createStream("phishing").write({hostname:t})}setupControllerConnection(e){const t=this.getApi();this.activeControllerConnections+=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),e.on("data",(0,Ee.default)(t,e,this.store,this.localStoreApiWrapper));const r=t=>{e._writableState.ended||e.write({jsonrpc:"2.0",method:"sendUpdate",params:[t]})};this.on("update",r);const n=()=>{e._writableState.ended||e.write({jsonrpc:"2.0",method:"startUISync"})};this.startUISync?n():this.once("startUISync",n),e.on("end",(()=>{this.activeControllerConnections-=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),this.removeListener("update",r)}))}setupProviderConnection(e,t,r){let n,i;n=r===j.SubjectType.Internal?H.ORIGIN_METAMASK:new URL(t.url).origin,t.id&&t.id!==this.extension.runtime.id&&this.subjectMetadataController.addSubjectMetadata({origin:n,extensionId:t.id,subjectType:j.SubjectType.Extension}),t.tab&&t.tab.id&&(i=t.tab.id);const o=this.setupProviderEngine({origin:n,sender:t,subjectType:r,tabId:i}),a=(0,c.createEngineStream)({engine:o}),l=this.addConnection(n,{engine:o});(0,s.default)(e,a,e,(e=>{o._middleware.forEach((e=>{e.destroy&&"function"==typeof e.destroy&&e.destroy()})),l&&this.removeConnection(n,l),e&&m.default.error(e)}))}setupProviderEngine({origin:e,subjectType:t,sender:r,tabId:n}){const s=new a.JsonRpcEngine,{blockTracker:i,provider:o}=this,c=(0,d.default)({provider:o,blockTracker:i}),u=(0,p.default)({provider:o,blockTracker:i});return u.events.on("notification",(e=>s.emit("notification",e))),Z.isManifestV3&&s.push((0,se.default)()),s.push((0,ae.default)({origin:e})),n&&s.push((0,ce.default)({tabId:n})),s.push((0,ie.default)({origin:e})),s.push(this.permissionLogController.createMiddleware()),s.push((0,xe.default)({trackEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getMetricsState:this.metaMetricsController.store.getState.bind(this.metaMetricsController.store),securityProviderRequest:this.securityProviderRequest.bind(this)})),t===j.SubjectType.Website&&s.push((0,le.default)({location:r.url,registerOnboarding:this.onboardingController.registerOnboarding})),s.push((0,oe.createMethodMiddleware)({origin:e,subjectType:t,addSubjectMetadata:this.subjectMetadataController.addSubjectMetadata.bind(this.subjectMetadataController),getProviderState:this.getProviderState.bind(this),getUnlockPromise:this.appStateController.getUnlockPromise.bind(this.appStateController),handleWatchAssetRequest:this.handleWatchAssetRequest.bind(this),requestUserApproval:this.approvalController.addAndShowApprovalRequest.bind(this.approvalController),startApprovalFlow:this.approvalController.startFlow.bind(this.approvalController),endApprovalFlow:this.approvalController.endFlow.bind(this.approvalController),setApprovalFlowLoadingText:this.approvalController.setFlowLoadingText.bind(this.approvalController),sendMetrics:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getAccounts:this.getPermittedAccounts.bind(this,e),getPermissionsForOrigin:this.permissionController.getPermissions.bind(this.permissionController,e),hasPermission:this.permissionController.hasPermission.bind(this.permissionController,e),requestAccountsPermission:this.permissionController.requestPermissions.bind(this.permissionController,{origin:e},{eth_accounts:{}}),requestPermissionsForOrigin:this.permissionController.requestPermissions.bind(this.permissionController,{origin:e}),getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,getCurrentRpcUrl:()=>this.networkController.state.providerConfig.rpcUrl,getNetworkConfigurations:()=>this.networkController.state.networkConfigurations,upsertNetworkConfiguration:this.networkController.upsertNetworkConfiguration.bind(this.networkController),setActiveNetwork:this.networkController.setActiveNetwork.bind(this.networkController),findNetworkConfigurationBy:this.findNetworkConfigurationBy.bind(this),setProviderType:this.networkController.setProviderType.bind(this.networkController),getWeb3ShimUsageState:this.alertController.getWeb3ShimUsageState.bind(this.alertController),setWeb3ShimUsageRecorded:this.alertController.setWeb3ShimUsageRecorded.bind(this.alertController)})),s.push(c),s.push(u.middleware),t!==j.SubjectType.Internal&&s.push(this.permissionController.createPermissionMiddleware({origin:e})),s.push(this.metamaskMiddleware),s.push((0,l.providerAsMiddleware)(o)),s}setupPublicConfig(e){const t=(0,o.storeAsStream)(this.publicConfigStore);(0,s.default)(t,e,(e=>{t.destroy(),e&&m.default.error(e)}))}addConnection(e,{engine:t}){if(e===H.ORIGIN_METAMASK)return null;this.connections[e]||(this.connections[e]={});const r=(0,T.default)();return this.connections[e][r]={engine:t},r}removeConnection(e,t){const r=this.connections[e];r&&(delete r[t],0===Object.keys(r).length&&delete this.connections[e])}removeAllConnections(e){const t=this.connections[e];t&&Object.keys(t).forEach((t=>{this.removeConnection(e,t)}))}notifyConnections(e,t){const r=this.connections[e];r&&Object.values(r).forEach((e=>{e.engine&&e.engine.emit("notification",t)}))}notifyAllConnections(e){const t="function"==typeof e?t=>e(t):()=>e;Object.keys(this.connections).forEach((e=>{Object.values(this.connections[e]).forEach((async r=>{r.engine&&r.engine.emit("notification",await t(e))}))}))}async _onKeyringControllerUpdate(e){const{keyrings:t,encryptionKey:r,encryptionSalt:n}=e,s=t.reduce(((e,{accounts:t})=>e.concat(t)),[]);Z.isManifestV3&&await this.extension.storage.session.set({loginToken:r,loginSalt:n}),s.length&&(this.preferencesController.syncAddresses(s),this.accountTracker.syncWithAddresses(s))}_onUnlock(){this.notifyAllConnections((async e=>({method:Oe.NOTIFICATION_NAMES.unlockStateChanged,params:{isUnlocked:!0,accounts:await this.getPermittedAccounts(e)}}))),this.unMarkPasswordForgotten(),this.emit("unlock")}_onLock(){this.notifyAllConnections({method:Oe.NOTIFICATION_NAMES.unlockStateChanged,params:{isUnlocked:!1}}),this.emit("lock")}_onStateUpdate(e){this.isClientOpenAndUnlocked=e.isUnlocked&&this._isClientOpen,this.notifyAllConnections({method:Oe.NOTIFICATION_NAMES.chainChanged,params:this.getProviderNetworkState(e)})}privateSendUpdate(){this.emit("update",this.getState())}isUnlocked(){return this.keyringController.memStore.getState().isUnlocked}getExternalPendingTransactions(e){return this.smartTransactionsController.getTransactions({addressFrom:e,status:"pending"})}async getPendingNonce(e){const{nonceDetails:t,releaseLock:r}=await this.txController.nonceTracker.getNonceLock(e),n=t.params.highestSuggested;return r(),n}async getNextNonce(e){const t=await this.txController.nonceTracker.getNonceLock(e);return t.releaseLock(),t.nextNonce}findNetworkConfigurationBy(e){const{networkConfigurations:t}=this.networkController.state;return Object.values(t).find((t=>Object.keys(e).some((r=>t[r]===e[r]))))||null}async setLedgerTransportPreference(e){if(!this.canUseHardwareWallets())return undefined;const t=this.preferencesController.getLedgerTransportPreference(),r=this.preferencesController.setLedgerTransportPreference(e),n=await this.getKeyringForDevice($.HardwareDeviceNames.ledger);return null!=n&&n.updateTransportMethod?n.updateTransportMethod(r).catch((e=>{throw this.preferencesController.setLedgerTransportPreference(t),e})):undefined}recordFirstTimeInfo(e){if(!("firstTimeInfo"in e)){const t=this.platform.getVersion();e.firstTimeInfo={version:t,date:Date.now()}}}set isClientOpen(e){this._isClientOpen=e,this.detectTokensController.isOpen=e}onClientClosed(){try{this.gasFeeController.stopPolling(),this.appStateController.clearPollingTokens()}catch(e){console.error(e)}}onEnvironmentTypeClosed(e){const t=H.POLLING_TOKEN_ENVIRONMENT_TYPES[e];this.appStateController.store.getState()[t].forEach((e=>{this.gasFeeController.disconnectPoller(e),this.appStateController.removePollingToken(e,t)}))}safelistPhishingDomain(e){return this.phishingController.bypass(e)}async backToSafetyPhishingWarning(){const e=this.platform.getExtensionURL();await this.platform.switchToAnotherURL(undefined,e)}setLocked(){var e;const[t]=this.keyringController.getKeyringsByType(F.KeyringType.trezor);t&&t.dispose();const[r]=this.keyringController.getKeyringsByType(F.KeyringType.ledger);return null==r||null===(e=r.destroy)||void 0===e||e.call(r),Z.isManifestV3&&this.clearLoginArtifacts(),this.keyringController.setLocked()}async securityProviderRequest(e,t){const{currentLocale:r,transactionSecurityCheckEnabled:n}=this.preferencesController.store.getState();if(n){const n=Number((0,X.hexToDecimal)(this.networkController.state.providerConfig.chainId));try{return await(0,je.securityProviderCheck)(e,t,n,r)}catch(e){throw m.default.error(e.message),e}}return null}}r.default=De}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/metamask-controller.js"}],[82,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:2,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=2;try{"etherscan"===t.data.config.provider.type&&(t.data.config.provider.type="rpc",t.data.config.provider.rpcTarget="https://rpc.metamask.io/")}catch(e){}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/002.js"}],[83,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:3,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=3;try{"https://rawtestrpc.metamask.io/"===t.data.config.provider.rpcTarget&&(t.data.config.provider.rpcTarget="https://testrpc.metamask.io/")}catch(e){}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/003.js"}],[84,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:4,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=4;try{if("rpc"!==t.data.config.provider.type)return Promise.resolve(t);switch(t.data.config.provider.rpcTarget){case"https://testrpc.metamask.io/":t.data.config.provider={type:"testnet"};break;case"https://rpc.metamask.io/":t.data.config.provider={type:"mainnet"}}}catch(e){}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/004.js"}],[85,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:5,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=5;try{const e=function(e){const{config:t}=e,r={...e,KeyringController:{vault:e.vault,selectedAccount:t.selectedAccount,walletNicknames:e.walletNicknames}};return delete r.vault,delete r.walletNicknames,delete r.config.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #5${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/005.js"}],[86,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:6,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=6;try{const e=function(e){const t=e.KeyringController,r={...e,PreferencesController:{selectedAddress:t.selectedAccount}};return delete r.KeyringController.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #6${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/006.js"}],[87,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:7,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=7;try{const e=function(e){const t={...e,TransactionManager:{transactions:e.transactions||[],gasMultiplier:e.gasMultiplier||1}};return delete t.transactions,delete t.gasMultiplier,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #7${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/007.js"}],[88,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:8,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=8;try{const e=function(e){const t={...e,NoticeController:{noticesList:e.noticesList||[]}};return delete t.noticesList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #8${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/008.js"}],[89,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:9,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=9;try{const e=function(e){const t=(0,n.merge)({},e,{CurrencyController:{currentCurrency:e.currentFiat||e.fiatCurrency||"USD",conversionRate:e.conversionRate,conversionDate:e.conversionDate}});return delete t.currentFiat,delete t.fiatCurrency,delete t.conversionRate,delete t.conversionDate,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #9${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/009.js"}],[9,{"../../../shared/modules/string-utils":3991},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../shared/modules/string-utils");r.default=class{constructor(e={}){const{preferencesController:t,addressBookController:r,networkController:n,trackMetaMetricsEvent:s}=e;this.preferencesController=t,this.addressBookController=r,this.networkController=n,this._trackMetaMetricsEvent=s}async restoreUserData(e){const t=this.preferencesController.store.getState(),{preferences:r,addressBook:n,network:s}=JSON.parse(e);r&&(r.identities=t.identities,r.lostIdentities=t.lostIdentities,r.selectedAddress=t.selectedAddress,this.preferencesController.store.updateState(r)),n&&this.addressBookController.update(n,!0),s&&this.networkController.loadBackup(s),(r||n||s)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.store.getState()},addressBook:{...this.addressBookController.state},network:{networkConfigurations:this.networkController.state.networkConfigurations}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),r=new Date,s=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${r.getFullYear()}_${s(r.getMonth()+1)}_${s(r.getDay())}_${s(r.getHours())}_${s(r.getMinutes())}_${s(r.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/controllers/backup.js"}],[90,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:10,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=10;try{const e=function(e){const t=(0,n.merge)({},e,{ShapeShiftController:{shapeShiftTxList:e.shapeShiftTxList||[]}});return delete t.shapeShiftTxList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #10${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/010.js"}],[91,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:11,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/011.js"}],[92,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:12,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach((e=>{e.read&&(e.body="")})),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/012.js"}],[93,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:13,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:r}=t;r&&r.provider&&"testnet"===r.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/013.js"}],[94,{lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");var s={version:14,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}};r.default=s}}},{package:"$root$",file:"app/scripts/migrations/014.js"}],[95,{"../../../shared/constants/transaction":3964,lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:15,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=s.TransactionStatus.failed),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[96,{"../../../shared/constants/transaction":3964,lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:16,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=s.TransactionStatus.submitted,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[97,{"../../../shared/constants/transaction":3964,lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:17,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===s.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=s.TransactionStatus.submitted,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[98,{"../controllers/transactions/lib/tx-state-history-helpers":29,lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../controllers/transactions/lib/tx-state-history-helpers");var i={version:18,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=(0,s.snapshotFromTxMeta)(e);return e.history=[t],e}const t=(0,s.migrateFromSnapshotsToDiffs)(e.history).filter((e=>!Array.isArray(e)||e.length>0));return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[99,{"../../../shared/constants/transaction":3964,lodash:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),s=e("../../../shared/constants/transaction");var i={version:19,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==s.TransactionStatus.submitted)return e;const n=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===s.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),i=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===s.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),n),o=Math.max(i,n);return parseInt(e.txParams.nonce,16)>o+1&&(e.status=s.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}};r.default=i}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[5,{"../../shared/constants/app":3946,"../../shared/constants/metametrics":3953,"../../shared/modules/browser-runtime.utils":3975,"../../shared/modules/mv3.utils":3984,"../../shared/modules/object.utils":3986,"./first-time-state":35,"./lib/createStreamSink":46,"./lib/ens-ipfs/setup":51,"./lib/get-first-preferred-lang-code":53,"./lib/getObjStructure":54,"./lib/local-store":55,"./lib/migrator":58,"./lib/network-store":59,"./lib/notification-manager":60,"./lib/setup-persisted-state-hook":77,"./lib/setupSentry":78,"./lib/util":80,"./metamask-controller":81,"./migrations":178,"./platforms/extension":179,"@metamask/obs-store":1351,"debounce-stream":2429,"end-of-stream":2469,"eth-rpc-errors":2587,events:2188,"extension-port-stream":2671,loglevel:3454,pump:3594,"webextension-polyfill":3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.loadStateFromPersistence=oe,r.setupController=ae,r.statePersistenceEvents=void 0,e("./lib/setup-persisted-state-hook");var n=x(e("events")),s=x(e("end-of-stream")),i=x(e("pump")),o=x(e("debounce-stream")),a=x(e("loglevel")),c=x(e("webextension-polyfill")),l=e("@metamask/obs-store"),u=x(e("extension-port-stream")),h=e("eth-rpc-errors"),d=e("../../shared/constants/app"),p=e("../../shared/constants/metametrics"),f=e("../../shared/modules/browser-runtime.utils"),g=e("../../shared/modules/mv3.utils"),m=e("../../shared/modules/object.utils"),y=x(e("./migrations")),b=x(e("./lib/migrator")),w=x(e("./platforms/extension")),v=x(e("./lib/local-store")),k=(x(e("./lib/network-store")),e("./lib/setupSentry")),T=x(e("./lib/createStreamSink")),C=O(e("./lib/notification-manager")),S=O(e("./metamask-controller")),_=x(e("./first-time-state")),A=x(e("./lib/get-first-preferred-lang-code")),E=x(e("./lib/getObjStructure")),M=x(e("./lib/ens-ipfs/setup")),P=e("./lib/util");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(N=function(e){return e?r:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=N(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function x(e){return e&&e.__esModule?e:{default:e}}const{sentry:j}=global,I={..._.default},R={[d.ENVIRONMENT_TYPE_POPUP]:!0,[d.ENVIRONMENT_TYPE_NOTIFICATION]:!0,[d.ENVIRONMENT_TYPE_FULLSCREEN]:!0},L=["trezor-connect"];a.default.setDefaultLevel("info");const D=new w.default,U=new C.default;let B=!1,$=!1,F=!1;const q={},K={};let z;const H=new v.default;let G;const V=new URL("https://metamask.github.io/phishing-warning/v2.1.0/"),W=1e3,Y="ACK_KEEP_ALIVE_MESSAGE",J="WORKER_KEEP_ALIVE_MESSAGE",Q=new n.default;r.statePersistenceEvents=Q;const{promise:Z,resolve:X,reject:ee}=(0,P.deferredPromise)(),te=async()=>{const e=await c.default.tabs.query({url:"<all_urls>",windowType:"normal"}).then((e=>((0,f.checkForLastErrorAndLog)(),e))).catch((()=>{(0,f.checkForLastErrorAndLog)()}));for(const t of e)c.default.tabs.sendMessage(t.id,{name:d.EXTENSION_MESSAGES.READY}).then((()=>{(0,f.checkForLastErrorAndLog)()})).catch((()=>{(0,f.checkForLastErrorAndLog)()}))};let re,ne;async function se(){try{const e=await oe(),t=await(0,A.default)();let r;if(g.isManifestV3){const e=await c.default.storage.session.get(["isFirstMetaMaskControllerSetup"]);r=(null==e?void 0:e.isFirstMetaMaskControllerSetup)===undefined,await c.default.storage.session.set({isFirstMetaMaskControllerSetup:r})}ae(e,t,{},r),g.isManifestV3||await async function(){let e;try{const t=new URL("https://metamask.github.io/phishing-warning/v2.1.0/");let r,n;t.hash="#extensionStartup",e=window.document.createElement("iframe"),e.setAttribute("src",t.href),e.setAttribute("sandbox","allow-scripts allow-same-origin");const s=new Promise(((e,t)=>{r=e,n=t}));e.addEventListener("load",r),window.document.body.appendChild(e),setTimeout((()=>n(new ie)),W),await s}catch(e){e instanceof ie?console.warn("Phishing warning page timeout; page not guaraneteed to work offline."):console.error("Failed to initialize phishing warning page",e)}finally{e&&e.remove()}}(),await te(),a.default.info("MetaMask initialization complete."),X()}catch(e){ee(e)}}c.default.runtime.onConnect.addListener((async(...e)=>{await Z,re(...e)})),c.default.runtime.onConnectExternal.addListener((async(...e)=>{await Z,ne(...e)}));class ie extends Error{constructor(){super("Timeout failed")}}async function oe(){const e=new b.default({migrations:y.default});if(e.on("error",console.warn),G=await H.get()||e.generateInitialState(I),G&&!G.data&&(G=e.generateInitialState(I),j.captureMessage("MetaMask - Empty vault found - unable to recover")),e.on("error",(e=>{const t=(0,E.default)(G);j.captureException(e,{extra:{vaultStructure:t}})})),G=await e.migrateData(G),!G)throw new Error("MetaMask - migrator returned undefined");return H.setMetadata(G.meta),H.set(G.data),G.data}function ae(e,t,r,n){var f;z=new S.default({infuraProjectId:"b6bf7d3508c941499b10025c0776eaf8",showUserConfirmation:ce,initState:e,initLangCode:t,platform:D,notificationManager:U,browser:c.default,getRequestAccountTabIds:()=>K,getOpenMetamaskTabsIds:()=>q,localStore:H,overrides:r,isFirstMetaMaskControllerSetup:n}),(0,M.default)({getCurrentChainId:()=>z.networkController.state.providerConfig.chainId,getIpfsGateway:z.preferencesController.getIpfsGateway.bind(z.preferencesController),provider:z.provider}),(0,i.default)((0,l.storeAsStream)(z.store),(0,o.default)(1e3),(0,T.default)((async e=>{await H.set(e),Q.emit("state-persisted",e)})),(e=>{a.default.error("MetaMask - Persistence pipeline failed",e)})),f=z,global.stateHooks.getSentryState=function(){const e=f.getState(),t=(0,m.maskObject)({metamask:e},k.SENTRY_STATE);return{browser:window.navigator.userAgent,store:t,version:D.getVersion()}};const y=()=>B||Boolean(Object.keys(q).length)||$,b=(e,t)=>{if(!1===e)z.onClientClosed();else{if(t===d.ENVIRONMENT_TYPE_FULLSCREEN&&Boolean(Object.keys(q).length))return;z.onEnvironmentTypeClosed(t)}};function w(){let e="";const t=v();t&&(e=String(t)),g.isManifestV3?(c.default.action.setBadgeText({text:e}),c.default.action.setBadgeBackgroundColor({color:"#037DD6"})):(c.default.browserAction.setBadgeText({text:e}),c.default.browserAction.setBadgeBackgroundColor({color:"#037DD6"}))}function v(){return z.approvalController.getTotalApprovalCount()+z.appStateController.waitingForUnlock.length}re=async e=>{var t;const n=e.name;if(L.includes(e.name))return;let i=!1;const o=(0,P.getPlatform)(),a=null!==(t=e.sender)&&void 0!==t&&t.url?new URL(e.sender.url):null;if(i=o===d.PLATFORM_FIREFOX?R[n]:(null==a?void 0:a.origin)===`chrome-extension://${c.default.runtime.id}`,i){var l;const t=(null==r||null===(l=r.getPortStream)||void 0===l?void 0:l.call(r,e))||new u.default(e);if(z.isClientOpen=!0,z.setupTrustedCommunication(t,e.sender),g.isManifestV3&&e.onMessage.addListener((t=>{t.name===J&&(e.postMessage({name:Y}),z.appStateController.setServiceWorkerLastActiveTime(Date.now()))})),n===d.ENVIRONMENT_TYPE_POPUP&&(B=!0,(0,s.default)(t,(()=>{B=!1;const e=y();z.isClientOpen=e,b(e,d.ENVIRONMENT_TYPE_POPUP)}))),n===d.ENVIRONMENT_TYPE_NOTIFICATION&&($=!0,(0,s.default)(t,(()=>{$=!1;const e=y();z.isClientOpen=e,b(e,d.ENVIRONMENT_TYPE_NOTIFICATION)}))),n===d.ENVIRONMENT_TYPE_FULLSCREEN){const r=e.sender.tab.id;q[r]=!0,(0,s.default)(t,(()=>{delete q[r];const e=y();z.isClientOpen=e,b(e,d.ENVIRONMENT_TYPE_FULLSCREEN)}))}}else if(a&&a.origin===V.origin&&a.pathname===V.pathname){var h;const t=(null==r||null===(h=r.getPortStream)||void 0===h?void 0:h.call(r,e))||new u.default(e);z.setupPhishingCommunication({connectionStream:t})}else{if(e.sender&&e.sender.tab&&e.sender.url){const t=e.sender.tab.id,r=new URL(e.sender.url),{origin:n}=r;e.onMessage.addListener((e=>{e.data&&"eth_requestAccounts"===e.data.method&&(K[n]=t)}))}ne(e)}},ne=e=>{var t;const n=(null==r||null===(t=r.getPortStream)||void 0===t?void 0:t.call(r,e))||new u.default(e);z.setupUntrustedCommunication({connectionStream:n,sender:e.sender})},null!=r&&r.registerConnectListeners&&r.registerConnectListeners(re,ne),w(),z.txController.on(S.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,w),z.decryptMessageController.hub.on(S.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,w),z.encryptionPublicKeyController.hub.on(S.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,w),z.signatureController.hub.on(S.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,w),z.appStateController.on(S.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,w),z.controllerMessenger.subscribe(S.METAMASK_CONTROLLER_EVENTS.APPROVAL_STATE_CHANGE,w),z.txController.initApprovals(),U.on(C.NOTIFICATION_MANAGER_EVENTS.POPUP_CLOSED,(({automaticallyClosed:e})=>{e?v()>0&&ce():(Object.keys(z.txController.txStateManager.getUnapprovedTxList()).forEach((e=>z.txController.txStateManager.setTxStatusRejected(e))),z.signatureController.rejectUnapproved(p.REJECT_NOTIFICATION_CLOSE_SIG),z.decryptMessageController.rejectUnapproved(p.REJECT_NOTIFICATION_CLOSE),z.encryptionPublicKeyController.rejectUnapproved(p.REJECT_NOTIFICATION_CLOSE),Object.values(z.approvalController.state.pendingApprovals).forEach((({id:e,type:t})=>{z.approvalController.reject(e,h.ethErrors.provider.userRejectedRequest())})),w())}))}async function ce(){const e=await D.getActiveTabs(),t=Boolean(e.find((e=>q[e.id]))),r=e.length>0&&e[0].extData&&e[0].extData.indexOf("vivaldi_tab")>-1;if(!F&&(r||!B)&&!t){F=!0;try{const e=z.appStateController.getCurrentPopupId();await U.showPopup((e=>z.appStateController.setCurrentPopupId(e)),e)}finally{F=!1}}}const le=()=>{if(z)return z.metaMetricsController.updateTraits({[p.MetaMetricsUserTrait.InstallDateExt]:(new Date).toISOString().split("T")[0]}),void z.metaMetricsController.addEventBeforeMetricsOptIn({category:p.MetaMetricsEventCategory.App,event:p.MetaMetricsEventName.AppInstalled,properties:{}});setTimeout((()=>{le()}),1e3)};c.default.runtime.onInstalled.addListener((({reason:e})=>{"install"===e&&(le(),D.openExtensionInBrowser())})),se().catch(a.default.error)}}},{package:"$root$",file:"app/scripts/background.js"}]],[5],{});